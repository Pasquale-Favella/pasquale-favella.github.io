(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1068],{2297:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/de-sign",function(){return s(50266)}])},77117:function(e,t,s){"use strict";var a=s(85893),n=s(67294);t.Z=(0,n.memo)(()=>(0,a.jsx)("div",{className:"flex justify-center px-4 py-16",children:(0,a.jsx)("span",{className:"loading loading-ring loading-lg"})}))},52068:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(85893),n=s(67294),l=s(90512),i=e=>{let{Icon:t,hide:s=!1,className:i,...r}=e,o=(0,n.useId)();return(0,a.jsxs)("div",{hidden:s,className:(0,l.Z)("relative",r.containerClassName),children:[(0,a.jsx)("input",{className:(0,l.Z)("w-full input input-bordered pl-12 transition-colors duration-200 ease-linear focus:border-primary focus:outline-none",i),id:o,...r}),(0,a.jsx)("label",{htmlFor:o,children:(0,a.jsx)(t,{size:20,className:(0,l.Z)("absolute top-1/2 left-4 -translate-y-1/2",r.iconClassName)})})]})}},5567:function(e,t,s){"use strict";s.d(t,{Bw:function(){return m},Ph:function(){return o},Ql:function(){return u},i4:function(){return d},ki:function(){return c}});var a=s(85893),n=s(67294),l=s(92882),i=s(39025),r=s(61121);let o=l.fC;l.ZA;let c=l.B4,d=n.forwardRef((e,t)=>{let{className:s,children:n,...o}=e;return(0,a.jsxs)(l.xz,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border input-bordered bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-base-content focus:border-primary focus:outline-none disabled:cursor-not-allowed disabled:opacity-50",s),...o,children:[n,(0,a.jsx)(l.JO,{asChild:!0,children:(0,a.jsx)(r.OrA,{className:"h-4 w-4 opacity-50"})})]})});d.displayName=l.xz.displayName;let m=n.forwardRef((e,t)=>{let{className:s,children:n,position:r="popper",...o}=e;return(0,a.jsx)(l.h_,{children:(0,a.jsx)(l.VY,{ref:t,className:(0,i.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-base-100 shadow-md",s),position:r,...o,children:(0,a.jsx)(l.l_,{className:"p-1",children:n})})})});m.displayName=l.VY.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.__,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n})}).displayName=l.__.displayName;let u=n.forwardRef((e,t)=>{let{className:s,children:n,...o}=e;return(0,a.jsxs)(l.ck,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-base-300 ",s),...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.wU,{children:(0,a.jsx)(r.hXj,{className:"h-4 w-4"})})}),(0,a.jsx)(l.eT,{children:n})]})});u.displayName=l.ck.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-base-300",s),...n})}).displayName=l.Z0.displayName},40281:function(e,t,s){"use strict";s.d(t,{Ei:function(){return p},Tu:function(){return h},aM:function(){return c},bC:function(){return x},ue:function(){return u},yo:function(){return o}});var a=s(85893),n=s(67294),l=s(89056),i=s(89833),r=s(39025);let o=l.fC,c=l.xz;l.x8;let d=l.h_,m=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.aV,{ref:t,"data-slot":"sheet-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-base-content/50",s),...n})});m.displayName=l.aV.displayName;let u=n.forwardRef((e,t)=>{let{side:s="right",className:n,children:o,...c}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.VY,{ref:t,"data-slot":"sheet-content",className:(0,r.cn)("bg-base-100 data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===s&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===s&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===s&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===s&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",n),...c,children:[o,(0,a.jsxs)(l.x8,{className:"btn btn-ghost btn-sm absolute top-4 right-4 opacity-70 transition-opacity hover:opacity-100",children:[(0,a.jsx)(i.ven,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.VY.displayName;let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,"data-slot":"sheet-header",className:(0,r.cn)("flex flex-col gap-1.5 p-4",s),...n})});h.displayName="SheetHeader",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,"data-slot":"sheet-footer",className:(0,r.cn)("mt-auto flex flex-col gap-2 p-4",s),...n})}).displayName="SheetFooter";let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.Dx,{ref:t,"data-slot":"sheet-title",className:(0,r.cn)("text-base-content font-semibold",s),...n})});x.displayName=l.Dx.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.dk,{ref:t,"data-slot":"sheet-description",className:(0,r.cn)("text-base-content/70 text-sm",s),...n})});p.displayName=l.dk.displayName},50266:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return U}});var a=s(85893),n=s(67294),l=s(19042),i=s(56561),r=s(89833),o=s(95495);let c=(0,o.O4)("design-sketches",[]),d=["openai","anthropic","google"],m={openai:["gpt-3.5-turbo","gpt-4","gpt-4o","gpt-4-turbo","gpt-4o-mini"],anthropic:["claude-3-5-haiku-latest","claude-3-5-sonnet-latest","claude-4-opus-20250514","claude-4-sonnet-20250514"],google:["models/gemini-2.5-pro","models/gemini-2.5-flash","models/gemini-2.0-flash","models/gemini-1.5-flash-001","models/gemini-1.5-pro-001"]},u={openai:"https://platform.openai.com/account/api-keys",anthropic:"https://console.anthropic.com/settings/keys",google:"https://aistudio.google.com/app/apikey"},h=(0,o.O4)("sketch-ai-provider","google"),x=(0,o.O4)("sketch-ai-model",m.google[1]),p=(0,o.O4)("sketch-ai-api-key","");var b=s(5567),f=s(52068),g=s(95352),j=s(24622),v=s(62925),w=s(73652),y=s(48583);let N=()=>{let[e,t]=(0,y.KO)(h),[s,a]=(0,y.KO)(x),[l,i]=(0,y.KO)(p),[r,o]=(0,y.KO)(c),[d,u]=(0,n.useState)(null),[b,f]=(0,n.useState)({x:0,y:0,scale:1}),N=(0,n.useMemo)(()=>{if(!l)return null;switch(e){case"openai":return(0,v.J)({apiKey:l});case"anthropic":return(0,g.D)({apiKey:l});case"google":return(0,j.L)({apiKey:l});default:return null}},[e,l]),k=(0,n.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!N)throw Error("AI provider not configured");let a={role:"user",content:[{type:"text",text:'You are an expert web designer. Create a single, self-contained HTML component for the following request: "'.concat(e,'".').concat(t?" The user has provided an image for reference.":"")}]};t&&Array.isArray(a.content)&&a.content.push({type:"image",image:t.data});let{text:n}=await (0,w._4)({model:N(s),messages:[a],system:"\n                1. Use Tailwind CSS classes for styling. Assume Tailwind is loaded from a CDN.\n                2. Do NOT include `<html>`, `<head>`, or `<body>` tags.\n                3. The root element should be a `<div>` that is designed to fill its container (e.g., using `w-full`, `h-full`).\n                4. Ensure the design is modern, visually appealing, and responsive.\n                5. ONLY output the HTML code. No explanations, no markdown formatting, just the raw HTML.\n                "});return S(n)},[N,s]),C=(0,n.useCallback)(async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!N)throw Error("AI provider not configured");let n={role:"user",content:[{type:"text",text:"\n            You are an expert web designer. A user wants to modify an existing HTML component.\n            \n            User's request: \"".concat(e,'"').concat(a?" The user has provided an image for reference.":"","\n            \n            Original HTML:\n            ```html\n            ").concat(t,"\n            ```")}]};a&&Array.isArray(n.content)&&n.content.push({type:"image",image:a.data});let{text:l}=await (0,w._4)({model:N(s),messages:[n],system:"\n                1. Provide the new, complete HTML content that incorporates the user's change.\n                2. Continue using Tailwind CSS classes for styling.\n                3. Do NOT include `<html>`, `<head>`, or `<body>` tags.\n                4. The root element should remain a container-filling `<div>`.\n                5. ONLY output the new HTML code. No explanations, no markdown formatting, just the raw HTML.\n                "});return S(l)},[N,s]),S=e=>e.trim().replace(/^```html|```$/g,"").trim(),R=(0,n.useCallback)(e=>{t(e),a(m[e][0])},[t,a]),D=(0,n.useCallback)(e=>{o(t=>[...t,e])},[o]),z=(0,n.useCallback)((e,t)=>{o(s=>s.map(s=>s.id===e?{...s,...t}:s))},[o]),L=(0,n.useCallback)(e=>{o(t=>t.filter(t=>t.id!==e)),d===e&&u(null)},[o,d]),O=(0,n.useCallback)(e=>{let t=r.find(t=>t.id===e);t&&D({...t,id:"sketch_".concat(Date.now()),x:t.x+20,y:t.y+20})},[r,D]),M=(0,n.useCallback)(e=>r.find(t=>t.id===e),[r]),E=(0,n.useCallback)((e,t)=>{if(0===r.length){f({x:0,y:0,scale:1});return}let s=1/0,a=1/0,n=-1/0,l=-1/0;r.forEach(e=>{s=Math.min(s,e.x),a=Math.min(a,e.y),n=Math.max(n,e.x+e.width),l=Math.max(l,e.y+e.height)});let i=n-s,o=l-a;if(i<=0||o<=0)return;let c=Math.min((e-200)/i,(t-200)/o,1.5);f({x:e/2-(s+i/2)*c,y:t/2-(a+o/2)*c,scale:c})},[r]),T=(0,n.useCallback)(e=>{f(t=>({...t,scale:e}))},[]);return{sketches:r,selectedSketchId:d,canvasTransform:b,addSketch:D,updateSketch:z,deleteSketch:L,duplicateSketch:O,getSketchById:M,setSelectedSketchId:u,setCanvasTransform:f,setZoom:T,fitToScreen:E,generateHtml:k,editHtml:C,provider:e,model:s,apiKey:l,handleProviderChange:R,setModel:a,setApiKey:i}};var k=()=>{let{provider:e,model:t,apiKey:s,handleProviderChange:n,setModel:l,setApiKey:i}=N();return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Provider"}),(0,a.jsxs)(b.Ph,{onValueChange:n,value:e,children:[(0,a.jsx)(b.i4,{children:(0,a.jsx)(b.ki,{placeholder:"Select a provider"})}),(0,a.jsx)(b.Bw,{children:d.map(e=>(0,a.jsx)(b.Ql,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Model"}),(0,a.jsxs)(b.Ph,{onValueChange:l,value:t,children:[(0,a.jsx)(b.i4,{children:(0,a.jsx)(b.ki,{placeholder:"Select a model"})}),(0,a.jsx)(b.Bw,{children:m[e].map(e=>(0,a.jsx)(b.Ql,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"API Key"}),(0,a.jsx)(f.Z,{Icon:r.MhP,type:"password",value:s,onChange:e=>i(e.target.value),placeholder:"Enter your API key"}),(0,a.jsxs)("a",{href:u[e],target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline mt-1 block",children:["Get your API key from ",e]})]})]})},C=e=>{var t;let{isOpen:s,onClose:o,onSubmit:c,isLoading:d,type:m,initialPrompt:u}=e,{apiKey:h}=N(),[x,p]=(0,n.useState)(""),[b,f]=(0,n.useState)(null),[g,j]=(0,n.useState)(!1),v=(0,n.useRef)(null),w=(0,n.useRef)(null);(0,n.useEffect)(()=>{"create"===m?p(""):"edit"===m&&p(""),s||(b&&(URL.revokeObjectURL(b.previewUrl),f(null)),j(!1))},[m,u,s,b]),(0,n.useEffect)(()=>{s&&setTimeout(()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.focus()},100)},[s]);let y=e=>{e&&e.type.startsWith("image/")&&(b&&URL.revokeObjectURL(b.previewUrl),f({file:e,previewUrl:URL.createObjectURL(e)}))},C=async e=>{if(e.preventDefault(),!x.trim()&&!b)return;let t=null;b&&(t=await new Promise((e,t)=>{let s=new FileReader;s.onloadend=()=>{"string"==typeof s.result?e({data:s.result.split(",")[1],mimeType:b.file.type}):t(Error("Failed to read file as base64 string."))},s.onerror=e=>t(e),s.readAsDataURL(b.file)})),c(x,t)};return s?(0,a.jsxs)("div",{className:"modal modal-open z-10",children:[(0,a.jsxs)("div",{className:"modal-box max-w-2xl relative bg-base-200 border border-base-300",onClick:e=>e.stopPropagation(),onDragOver:e=>{e.preventDefault()},onDragEnter:e=>{e.preventDefault(),j(!0)},onDragLeave:e=>{e.preventDefault(),e.currentTarget.contains(e.relatedTarget)||j(!1)},onDrop:e=>{var t;e.preventDefault(),j(!1),y(null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0])},onPaste:e=>{var t;let s=null===(t=Array.from(e.clipboardData.items).find(e=>e.type.startsWith("image/")))||void 0===t?void 0:t.getAsFile();s&&(e.preventDefault(),y(s))},children:[g&&(0,a.jsx)("div",{className:"absolute inset-0 bg-primary/20 backdrop-blur-sm border-2 border-dashed border-primary rounded-box flex items-center justify-center pointer-events-none z-10",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(l.w_C,{className:"w-12 h-12 text-primary"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Drop image to attach"})]})}),(0,a.jsxs)("form",{onSubmit:C,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"font-bold text-xl flex items-center gap-2",children:[(0,a.jsx)(l.dvR,{className:"w-6 h-6 text-primary"}),"create"===m?"Create a new sketch":"Edit sketch"]}),(0,a.jsx)("button",{type:"button",onClick:o,className:"btn btn-ghost btn-sm btn-circle",disabled:d||!h,children:(0,a.jsx)(l.apv,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"form-control",children:(0,a.jsx)("textarea",{ref:v,value:x,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&C(e)},placeholder:"create"===m?"e.g., a login form with a neon blue theme. You can also paste or drop an image.":"e.g., change the primary button to green. Paste or drop an image to provide context.",className:"textarea textarea-bordered h-32 resize-none bg-base-300 focus:textarea-primary",disabled:d})}),b&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("div",{className:"relative w-24 h-24 rounded-box overflow-hidden border-2 border-base-300",children:[(0,a.jsx)("img",{src:b.previewUrl,alt:"Preview",className:"w-full h-full object-cover"}),(0,a.jsx)("button",{type:"button",onClick:()=>{b&&(URL.revokeObjectURL(b.previewUrl),f(null))},className:"absolute top-1 right-1 btn btn-circle btn-xs btn-error","aria-label":"Remove image",children:(0,a.jsx)(l.apv,{className:"w-3 h-3"})})]})}),!h&&(0,a.jsx)("div",{className:"mt-4 alert alert-info",children:(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("p",{className:"font-semibold mb-1",children:"Configure AI"}),(0,a.jsxs)("p",{className:"opacity-80 font-mono whitespace-pre-wrap flex",children:["Setup AI provider using settings ",(0,a.jsx)(r.TXX,{className:"size-4"})]})]})}),"edit"===m&&u&&(0,a.jsx)("div",{className:"mt-4 alert alert-info",children:(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("p",{className:"font-semibold mb-1",children:"Previous Prompt:"}),(0,a.jsx)("p",{className:"opacity-80 font-mono whitespace-pre-wrap",children:null===(t=u.split("---").pop())||void 0===t?void 0:t.trim()})]})}),(0,a.jsxs)("div",{className:"modal-action flex justify-between items-center",children:[(0,a.jsx)("div",{className:"tooltip","data-tip":"AI Settings",children:(0,a.jsxs)(i.J2,{children:[(0,a.jsx)(i.xo,{className:"btn btn-ghost btn-sm btn-circle",disabled:d,children:(0,a.jsx)(r.TXX,{className:"size-5"})}),(0,a.jsx)(i.yk,{className:"z-50",children:(0,a.jsx)(k,{})})]})}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("input",{type:"file",ref:w,onChange:e=>{var t;y(null===(t=e.target.files)||void 0===t?void 0:t[0]),e.target&&(e.target.value="")},className:"hidden",accept:"image/*"}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},disabled:d,className:"btn btn-ghost btn-sm btn-circle",title:"Attach image",children:(0,a.jsx)(l.w_C,{className:"size-5"})}),(0,a.jsx)("button",{type:"button",onClick:o,disabled:d,className:"btn btn-ghost btn-sm",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:d||!x.trim()&&!b,className:"btn btn-primary btn-sm gap-2",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"loading loading-spinner loading-sm"}),"Generating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.dvR,{className:"w-4 h-4"}),"create"===m?"Generate":"Update"]})})]})]})]})]}),(0,a.jsx)("div",{className:"modal-backdrop",onClick:o})]}):null},S=s(77656),R=s(63764),D=s(2777),z=s(35282),L=s(77117),O=e=>{let{sketch:t,isSelected:s,onSelect:l,onUpdate:i,onDelete:r,onDuplicate:o,onEdit:c,onFullscreen:d,canvasScale:m}=e,{isDarkMode:u}=(0,S.F)(),[h,x]=(0,n.useState)(!1),[p,b]=(0,n.useState)(!1),[f,g]=(0,n.useState)({x:t.x,y:t.y}),[j,v]=(0,n.useState)({width:t.width,height:t.height}),w=(0,n.useRef)({x:0,y:0}),y=(0,n.useRef)({x:0,y:0}),N=(0,n.useRef)({width:0,height:0}),k=(0,n.useRef)(null);(0,n.useEffect)(()=>{h||p||(g({x:t.x,y:t.y}),v({width:t.width,height:t.height}))},[t.x,t.y,t.width,t.height,h,p]);let C=(0,n.useCallback)(e=>{k.current&&cancelAnimationFrame(k.current),k.current=requestAnimationFrame(()=>{if(h){let t=(e.clientX-w.current.x)/m,s=(e.clientY-w.current.y)/m;g({x:y.current.x+t,y:y.current.y+s})}if(p){let t=(e.clientX-w.current.x)/m,s=(e.clientY-w.current.y)/m;v({width:Math.max(200,N.current.width+t),height:Math.max(150,N.current.height+s)})}})},[h,p,m]),O=(0,n.useCallback)(()=>{k.current&&cancelAnimationFrame(k.current),h&&i(t.id,{x:f.x,y:f.y}),p&&i(t.id,{width:j.width,height:j.height}),x(!1),b(!1)},[h,p,t.id,f,j,i]);(0,n.useEffect)(()=>{if(h||p)return document.addEventListener("mousemove",C),document.addEventListener("mouseup",O),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",O)}},[h,p,C,O]);let M='\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <script src="https://cdn.tailwindcss.com"></script>\n      </head>\n      <body class="h-full w-full m-0 p-0 overflow-hidden">\n        '.concat(t.html,"\n      </body>\n    </html>\n  ");return(0,a.jsxs)("div",{style:{position:"absolute",left:f.x,top:f.y,width:j.width,height:j.height,cursor:h?"grabbing":"grab",userSelect:"none"},className:"card bg-base-200 shadow-xl flex flex-col transition-shadow duration-200 ".concat(s?"ring-2 ring-primary":""),onMouseDown:l,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"card-title bg-base-300/50 rounded-t-2xl flex items-center justify-between px-3 py-2 cursor-grab select-none",onMouseDown:e=>{e.stopPropagation(),e.preventDefault(),l(),x(!0),w.current={x:e.clientX,y:e.clientY},y.current={x:t.x,y:t.y}},children:[(0,a.jsx)("div",{className:"flex items-center gap-2 text-xs opacity-70 overflow-hidden whitespace-nowrap",children:(0,a.jsx)("span",{className:"truncate",children:t.prompt.split("\n").pop()})}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"tooltip","data-tip":"result"===t.view?"Show Code":"Show Result",children:(0,a.jsx)("button",{onClick:()=>{i(t.id,{view:"result"===t.view?"code":"result"})},className:"btn btn-ghost btn-xs btn-square",title:"result"===t.view?"Show Code":"Show Result",children:"result"===t.view?(0,a.jsx)(D.xqv,{size:14}):(0,a.jsx)(D.rDJ,{size:14})})}),(0,a.jsx)("div",{className:"tooltip","data-tip":"Edit",children:(0,a.jsx)("button",{onClick:c,className:"btn btn-ghost btn-xs btn-square",title:"Edit",children:(0,a.jsx)(D.vPQ,{size:14})})}),(0,a.jsx)("div",{className:"tooltip","data-tip":"Fullscreen",children:(0,a.jsx)("button",{onClick:d,className:"btn btn-ghost btn-xs btn-square",title:"Fullscreen",children:(0,a.jsx)(D.D7o,{size:14})})}),(0,a.jsx)("div",{className:"tooltip","data-tip":"Duplicate",children:(0,a.jsx)("button",{onClick:()=>o(t.id),className:"btn btn-ghost btn-xs btn-square",title:"Duplicate",children:(0,a.jsx)(D.C3L,{size:14})})}),(0,a.jsx)("div",{className:"tooltip","data-tip":"Delete",children:(0,a.jsx)("button",{onClick:()=>r(t.id),className:"btn btn-ghost btn-xs btn-square",title:"Delete",children:(0,a.jsx)(D.Ybf,{size:14})})})]})]}),(0,a.jsx)("div",{className:"flex-grow w-full h-full bg-base-100 relative overflow-hidden rounded-b-2xl pointer-events-auto",children:"result"===t.view?(0,a.jsx)("iframe",{srcDoc:M,title:"Sketch Result",sandbox:"allow-scripts allow-same-origin",className:"w-full h-full border-0",style:{pointerEvents:h||p?"none":"auto"}}):(0,a.jsx)(R.ML,{theme:u?"vs-dark":"light",language:"html",defaultValue:t.html,loading:(0,a.jsx)(L.Z,{}),options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1}})}),(0,a.jsx)("div",{className:"tooltip z-10 absolute bottom-0.5 right-0.5 ","data-tip":"Resize",children:(0,a.jsx)("button",{type:"button",onMouseDown:e=>{e.stopPropagation(),e.preventDefault(),l(),b(!0),w.current={x:e.clientX,y:e.clientY},N.current={width:t.width,height:t.height}},className:"cursor-se-resize btn btn-ghost btn-sm btn-circle",children:(0,a.jsx)(z.xJz,{className:"size-5"})})})]})},M=s(40281),E=e=>{let{sketch:t,onClose:s,onUpdate:l}=e,{isDarkMode:i}=(0,S.F)(),[r,o]=(0,n.useState)("result"),[c,d]=(0,n.useState)(t.html),[m,u]=(0,n.useState)("desktop"),[h,x]=(0,n.useState)(!1),[p,b]=(0,n.useState)(!1),f='\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <script src="https://cdn.tailwindcss.com"></script>\n      </head>\n      <body class="h-full w-full m-0 p-0 overflow-auto">\n        '.concat(t.html,"\n      </body>\n    </html>\n  "),g=t.prompt.split("\n---\n"),j=()=>{l(t.id,{html:c}),x(!1)},v=()=>{let e=new Blob([f],{type:"text/html"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="".concat(t.prompt.split(" ").slice(0,5).join("_")||"sketch",".html"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},w=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-4 border-b border-base-300 space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Controls"}),"code"===r&&(0,a.jsx)("button",{onClick:j,disabled:!h,className:"btn btn-primary btn-sm w-full",children:h?"Save Changes":"Saved"}),(0,a.jsxs)("button",{onClick:v,className:"btn btn-neutral btn-sm w-full gap-2",children:[(0,a.jsx)(D._hL,{size:16})," Download HTML"]})]}),(0,a.jsxs)("div",{className:"flex-grow p-4 overflow-y-auto",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"Prompt History"}),(0,a.jsx)("ul",{className:"space-y-4",children:g.map((e,t)=>(0,a.jsxs)("li",{className:"text-xs opacity-70 font-mono p-3 bg-base-300 rounded-lg whitespace-pre-wrap",children:[(0,a.jsxs)("span",{className:"text-primary font-bold block mb-1",children:["Step ",t+1,":"]}),e]},t))})]})]});return(0,a.jsxs)("div",{className:"fixed inset-0 bg-base-300 z-50 flex flex-col",children:[(0,a.jsxs)("header",{className:"flex-shrink-0 bg-base-200/80 backdrop-blur-sm border-b border-base-300 h-14 flex items-center justify-between px-2 sm:px-4",children:[(0,a.jsxs)("div",{className:"text-xs sm:text-sm opacity-80 truncate flex-1 min-w-0 mr-2",children:[(0,a.jsx)("span",{className:"font-semibold hidden sm:inline",children:"Fullscreen Mode:"}),(0,a.jsx)("span",{className:"ml-1",children:g[g.length-1]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"join",children:[(0,a.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":"Result",children:(0,a.jsx)("button",{onClick:()=>o("result"),className:"btn btn-xs sm:btn-sm join-item ".concat("result"===r?"btn-primary":"btn-ghost"),title:"Show Result",children:(0,a.jsx)(D.rDJ,{size:14,className:"sm:w-4 sm:h-4"})})}),(0,a.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":"Code",children:(0,a.jsx)("button",{onClick:()=>o("code"),className:"btn btn-xs sm:btn-sm join-item ".concat("code"===r?"btn-primary":"btn-ghost"),title:"Show Code",children:(0,a.jsx)(D.xqv,{size:14,className:"sm:w-4 sm:h-4"})})})]}),(0,a.jsx)("div",{className:"divider divider-horizontal mx-1 hidden sm:flex"}),(0,a.jsxs)("div",{className:"join hidden sm:flex",children:[(0,a.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":"Mobile",children:(0,a.jsx)("button",{onClick:()=>u("mobile"),className:"btn btn-sm btn-ghost join-item ".concat("mobile"===m?"text-primary":""),title:"Mobile View",children:(0,a.jsx)(D.L$C,{size:16})})}),(0,a.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":"Tablet",children:(0,a.jsx)("button",{onClick:()=>u("tablet"),className:"btn btn-sm btn-ghost join-item ".concat("tablet"===m?"text-primary":""),title:"Tablet View",children:(0,a.jsx)(D.eXJ,{size:16})})}),(0,a.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":"Desktop",children:(0,a.jsx)("button",{onClick:()=>u("desktop"),className:"btn btn-sm btn-ghost join-item ".concat("desktop"===m?"text-primary":""),title:"Desktop View",children:(0,a.jsx)(D.hRw,{size:16})})})]}),(0,a.jsx)("div",{className:"divider divider-horizontal mx-1 lg:hidden"}),(0,a.jsx)("button",{onClick:()=>b(!0),className:"btn btn-xs sm:btn-sm btn-ghost lg:hidden",title:"Open Menu",children:(0,a.jsx)(D.cur,{size:16})}),(0,a.jsx)("div",{className:"divider divider-horizontal mx-1 sm:mx-2"}),(0,a.jsx)("div",{className:"tooltip tooltip-left","data-tip":"Close",children:(0,a.jsx)("button",{onClick:s,className:"btn btn-xs sm:btn-sm btn-ghost btn-square text-error hover:btn-error",title:"Close Fullscreen",children:(0,a.jsx)(D.q5L,{size:16,className:"sm:w-[18px] sm:h-[18px]"})})})]})]}),(0,a.jsxs)("div",{className:"flex-grow flex h-full overflow-hidden",children:[(0,a.jsx)("main",{className:"flex-grow flex flex-col items-center justify-center p-2 sm:p-4 overflow-auto bg-base-300",children:(0,a.jsx)("div",{className:"bg-base-100 shadow-2xl transition-all duration-300 ease-in-out",style:{width:window.innerWidth<1024?"100%":({mobile:"375px",tablet:"768px",desktop:"100%"})[m],height:"100%",maxWidth:"100%"},children:"result"===r?(0,a.jsx)("iframe",{srcDoc:f,title:"Sketch Result",sandbox:"allow-scripts allow-same-origin",className:"w-full h-full border-0"}):(0,a.jsx)(R.ML,{theme:i?"vs-dark":"light",language:"html",value:c,onChange:e=>{d(null!=e?e:""),x(!0)},loading:(0,a.jsx)(L.Z,{}),options:{minimap:{enabled:!1},fontSize:window.innerWidth<640?12:14}})})}),(0,a.jsx)("aside",{className:"w-80 flex-shrink-0 bg-base-200 border-l border-base-300 hidden lg:flex lg:flex-col",children:(0,a.jsx)(w,{})})]}),(0,a.jsx)(M.yo,{open:p,onOpenChange:b,children:(0,a.jsxs)(M.ue,{side:"right",className:"w-[85vw] sm:w-96",children:[(0,a.jsxs)(M.Tu,{children:[(0,a.jsx)(M.bC,{children:"Controls & History"}),(0,a.jsx)(M.Ei,{children:"Manage your sketch and view prompt history"})]}),(0,a.jsx)("div",{className:"flex flex-col h-[calc(100%-5rem)] mt-4",children:(0,a.jsx)(w,{})})]})})]})},T=s(30080),P=e=>{let{onNewSketch:t,onZoomChange:s,onFitToScreen:n,zoomLevel:i}=e;return(0,a.jsx)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 bg-base-200/80 backdrop-blur-md border border-base-300 rounded-box shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center p-2 gap-2",children:[(0,a.jsxs)("button",{onClick:t,className:"btn btn-primary btn-sm gap-2 font-medium",children:[(0,a.jsx)(l.b9W,{className:"w-4 h-4"}),"New Sketch"]}),(0,a.jsx)("div",{className:"divider divider-horizontal mx-0"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>{s(Math.max(i-.1,.1))},className:"btn btn-ghost btn-sm btn-square","aria-label":"Zoom Out",disabled:i<=.1,children:(0,a.jsx)(l.PZm,{className:"w-5 h-5"})}),(0,a.jsxs)("button",{onClick:()=>{s(1)},className:"btn btn-ghost btn-sm min-w-[60px] font-mono","aria-label":"Reset Zoom",children:[Math.round(100*i),"%"]}),(0,a.jsx)("button",{onClick:()=>{s(Math.min(i+.1,3))},className:"btn btn-ghost btn-sm btn-square","aria-label":"Zoom In",disabled:i>=3,children:(0,a.jsx)(l.Z$5,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"divider divider-horizontal mx-0"}),(0,a.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":"Fit to Screen",children:(0,a.jsx)("button",{onClick:n,className:"btn btn-ghost btn-sm btn-square","aria-label":"Fit to Screen",children:(0,a.jsx)(T.O8l,{className:"w-5 h-5"})})})]})})},_=s(86501),A=()=>{var e;let{sketches:t,selectedSketchId:s,setSelectedSketchId:i,addSketch:r,updateSketch:o,deleteSketch:c,duplicateSketch:d,getSketchById:m,canvasTransform:u,setCanvasTransform:h,setZoom:x,fitToScreen:p,generateHtml:b,editHtml:f}=N(),[g,j]=(0,n.useState)({isOpen:!1}),[v,w]=(0,n.useState)(!1),[y,k]=(0,n.useState)(null),S=(0,n.useRef)(null),R=(0,n.useRef)(!1),D=(0,n.useRef)({x:0,y:0}),z=async(e,t)=>{w(!0);try{let s=await b(e,t),a={id:"sketch_".concat(Date.now()),prompt:e,html:s,x:-u.x/u.scale+100,y:-u.y/u.scale+100,width:400,height:300,view:"result"};r(a),j({isOpen:!1})}catch(e){console.error("Failed to generate sketch:",e),_.default.error("Error generating sketch. Please check the console.")}finally{w(!1)}},L=async(e,t,s)=>{w(!0);let a=m(t);if(!a){w(!1);return}try{let n=await f(e,a.html,s);o(t,{html:n,prompt:"".concat(a.prompt,"\n---\n").concat(e)}),j({isOpen:!1})}catch(e){console.error("Failed to edit sketch:",e),_.default.error("Error editing sketch. Please check the console.")}finally{w(!1)}},M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;j({isOpen:!0,type:e,sketchId:t})},T=()=>{R.current=!1,S.current&&(S.current.style.cursor="grab")},A=()=>{var e,t;p((null===(e=S.current)||void 0===e?void 0:e.clientWidth)||window.innerWidth,(null===(t=S.current)||void 0===t?void 0:t.clientHeight)||window.innerHeight)},F=e=>{let t=m(e);t&&k(t)},U=(0,n.useCallback)((e,t)=>{o(e,t),y&&y.id===e&&k(e=>e?{...e,...t}:null)},[o,y]);return(0,n.useEffect)(()=>{let e=()=>T();return window.addEventListener("mouseup",e),()=>window.removeEventListener("mouseup",e)},[]),(0,n.useEffect)(()=>{S.current&&A()},[S.current]),(0,a.jsx)("div",{className:"mx-auto h-[calc(90dvh)] overflow-hidden flex flex-col bg-base-300 relative",children:y?(0,a.jsx)(E,{sketch:y,onClose:()=>{k(null)},onUpdate:U}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P,{onNewSketch:()=>M("create"),onZoomChange:x,onFitToScreen:A,zoomLevel:u.scale}),(0,a.jsx)("div",{ref:S,className:"flex-grow w-full h-full relative overflow-hidden cursor-grab canvas-bg",onMouseDown:e=>{(e.target===S.current||e.target.classList.contains("canvas-bg"))&&(R.current=!0,D.current={x:e.clientX,y:e.clientY},S.current&&(S.current.style.cursor="grabbing"))},onMouseMove:e=>{if(!R.current)return;let t=e.clientX-D.current.x,s=e.clientY-D.current.y;h({...u,x:u.x+t,y:u.y+s}),D.current={x:e.clientX,y:e.clientY}},onWheel:e=>{let t=-(.001*e.deltaY),s=Math.min(Math.max(.1,u.scale+t),3),a=S.current.getBoundingClientRect(),n=e.clientX-a.left,l=e.clientY-a.top;h({x:n-(n-u.x)*(s/u.scale),y:l-(l-u.y)*(s/u.scale),scale:s})},style:{backgroundImage:"radial-gradient(circle at 1px 1px, oklch(var(--bc) / 0.2) 1px, transparent 0)",backgroundSize:"20px 20px"},children:(0,a.jsx)("div",{className:"absolute top-0 left-0",style:{transform:"translate(".concat(u.x,"px, ").concat(u.y,"px) scale(").concat(u.scale,")"),transformOrigin:"0 0"},children:t.map(e=>(0,a.jsx)(O,{sketch:e,isSelected:s===e.id,onSelect:()=>i(e.id),onUpdate:o,onDelete:c,onDuplicate:d,onEdit:()=>M("edit",e.id),onFullscreen:()=>F(e.id),canvasScale:u.scale},e.id))})}),0===t.length&&!v&&(0,a.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-base-content/60",children:"AI Sketch Board"}),(0,a.jsx)("p",{className:"text-base-content/40",children:"Create your first component to get started."}),(0,a.jsxs)("button",{onClick:()=>M("create"),className:"btn btn-primary gap-2",children:[(0,a.jsx)(l.b9W,{className:"w-5 h-5"})," New Sketch"]})]}),g.isOpen&&(0,a.jsx)(C,{isOpen:g.isOpen,onClose:()=>j({isOpen:!1}),onSubmit:(e,t)=>{"create"===g.type?z(e,t):"edit"===g.type&&g.sketchId&&L(e,g.sketchId,t)},isLoading:v,type:g.type||"create",initialPrompt:"edit"===g.type&&g.sketchId&&(null===(e=m(g.sketchId))||void 0===e?void 0:e.prompt)||""})]})})},F=s(2962),U=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.PB,{title:"De-sign",description:"de-sign is an AI design tool integrating multiple providers to generate and refine UI layouts in a real-time canvas."}),(0,a.jsx)(A,{})]})}},function(e){e.O(0,[4321,7909,6279,5495,3448,4562,3764,9339,5269,2888,9774,179],function(){return e(e.s=2297)}),_N_E=e.O()}]);