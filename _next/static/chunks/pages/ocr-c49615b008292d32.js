(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{33609:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ocr",function(){return t(5072)}])},5072:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var l=t(85893),a=t(2962),s=t(67294),i=function(e){let r=e.getContext("2d"),t=r.getImageData(0,0,e.width,e.height);return function(e){for(var r=0;r<e.length;r+=4)e[r]=255^e[r],e[r+1]=255^e[r+1],e[r+2]=255^e[r+2]}(t.data),function(e,r){void 0===r&&(r=.5);let t=Math.floor(255*r);for(let r=0;r<e.length;r+=4){let l;let a=e[r],s=e[r+1],i=e[r+2],n=.2126*a+.7152*s+.0722*i;l=n>=t?255:0,e[r]=e[r+1]=e[r+2]=l}}(t.data,.5),t},n=t(7320),o=t.n(n);let c=e=>{let r=async r=>{var t,l;let a=null!==(t=null==r?void 0:r.image)&&void 0!==t?t:null==e?void 0:e.image,s=null!==(l=null==r?void 0:r.langs)&&void 0!==l?l:null==e?void 0:e.langs;if(!a)throw Error("Tesseract image is required");let i=await o().createWorker();return await i.loadLanguage(s),await i.initialize(s),await i.recognize(a)};return{recognize:r=>{var t,l,a;let s=null!==(t=null==r?void 0:r.image)&&void 0!==t?t:null==e?void 0:e.image,i=null!==(l=null==r?void 0:r.langs)&&void 0!==l?l:null==e?void 0:e.langs;if(!s)throw Error("Tesseract image is required");return o().recognize(s,i,null!==(a=null==r?void 0:r.options)&&void 0!==a?a:{logger:e=>console.log({m:e})})},recognizeWorker:r,imagePreprocess:i}},d=e=>(0,s.useReducer)((e,r)=>({...e,...r}),e);var u=t(47516),h=t(55788),m=t(37106);let g={hasError:!1,searchUrl:"",textResult:"",isLoading:!1,isSearchFromUrl:!1,confidence:0,imgSrc:""};var x=()=>{let[e,r]=d(g),t=(0,s.useRef)(null),a=(0,s.useRef)(null),{recognizeWorker:i,imagePreprocess:n}=c(),o=e.isSearchFromUrl&&!e.searchUrl,x=!e.isSearchFromUrl&&!e.imgSrc,f=e.isLoading||o||x,p=()=>{let e=t.current,r=a.current;e.width=r.width,e.height=r.height;let l=e.getContext("2d");null==l||l.drawImage(r,0,0),null==l||l.putImageData(n(e),0,0);let s=e.toDataURL("image/jpeg");return s},v=async()=>{await navigator.clipboard.writeText(e.textResult)};return(0,l.jsxs)("section",{className:"flex flex-col items-center justify-start mx-auto prose md:prose-lg lg:prose-xl",children:[(0,l.jsx)("img",{ref:a,src:e.imgSrc,hidden:!0}),(0,l.jsx)("canvas",{ref:t,hidden:!0}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/2 max-w-80",children:[(0,l.jsxs)("div",{className:"relative",hidden:!e.isSearchFromUrl,children:[(0,l.jsx)("input",{type:"url",value:e.searchUrl,onChange:e=>r({searchUrl:e.target.value}),placeholder:"Type image url here","aria-label":"Type image url here",className:"w-full input input-bordered pl-12 transition-colors duration-200 ease-linear focus:border-primary focus:outline-none",id:"convertUrl"}),(0,l.jsx)("label",{htmlFor:"convertUrl",children:(0,l.jsx)(m.urF,{className:"absolute top-1/2 left-4 -translate-y-1/2",size:20})})]}),!e.isSearchFromUrl&&(0,l.jsx)("input",{type:"file",accept:"image/*",className:"file-input file-input-bordered w-full",onChange:e=>{let{target:{files:t}}=e;t&&t[0]&&r({imgSrc:URL.createObjectURL(t[0])})}}),(0,l.jsxs)("div",{className:"w-full flex justify-between items-center gap-5",children:[(0,l.jsx)("div",{className:"form-control",children:(0,l.jsxs)("label",{className:"label cursor-pointer justify-start gap-3",children:[(0,l.jsx)("input",{type:"checkbox",className:"toggle",checked:e.isSearchFromUrl,onChange:e=>r({...g,isSearchFromUrl:e.target.checked})}),(0,l.jsx)("span",{className:"label-text",children:"convert from url"})]})}),(0,l.jsxs)("button",{className:"btn",onClick:()=>{let t=e.isSearchFromUrl?e.searchUrl:p();r({isLoading:!0,hasError:!1,textResult:""}),i({image:t}).catch(e=>r({hasError:!0})).then(e=>{e&&r({textResult:e.data.text,confidence:e.data.confidence})}).finally(()=>r({isLoading:!1}))},disabled:f,children:[e.isLoading&&(0,l.jsx)("span",{className:"loading loading-spinner"}),"Convert"]})]})]}),e.textResult&&(0,l.jsx)("div",{className:"card w-full mt-2 bg-base-200 shadow-xl",children:(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsxs)("div",{className:"card-actions justify-between items-center",children:[(0,l.jsxs)("div",{className:"badge badge-outline",children:["confidence ",e.confidence,"%"]}),(0,l.jsx)("div",{className:"tooltip tooltip-left before:text-xs before:content-[attr(data-tip)]","data-tip":"copy",children:(0,l.jsx)("button",{className:"btn btn-ghost btn-circle btn-sm",onClick:v,children:(0,l.jsx)(h.m54,{size:20})})})]}),(0,l.jsx)("p",{dangerouslySetInnerHTML:{__html:e.textResult}})]})}),e.hasError&&(0,l.jsxs)("div",{className:"flex w-full flex-1 items-center justify-start rounded-lg border border-error p-4 sm:px-6 mt-2",children:[(0,l.jsx)(u.Cw1,{size:50,className:"text-error"}),(0,l.jsx)("div",{className:"px-4",children:(0,l.jsx)("p",{children:"An issue occurred. Please make another attempt or consider altering the image."})})]})]})},f=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.PB,{title:"OCR",description:"Pasquale Favella , image to text"}),(0,l.jsx)(x,{})]})}},function(e){e.O(0,[907,57,320,774,888,179],function(){return e(e.s=33609)}),_N_E=e.O()}]);