(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{33609:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ocr",function(){return a(24558)}])},24558:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return h}});var t=a(85893),r=a(2962),s=a(67294),i=function(e){let l=e.getContext("2d"),a=l.getImageData(0,0,e.width,e.height);return function(e){for(var l=0;l<e.length;l+=4)e[l]=255^e[l],e[l+1]=255^e[l+1],e[l+2]=255^e[l+2]}(a.data),function(e,l){void 0===l&&(l=.5);let a=Math.floor(255*l);for(let l=0;l<e.length;l+=4){let t;let r=e[l],s=e[l+1],i=e[l+2],n=.2126*r+.7152*s+.0722*i;t=n>=a?255:0,e[l]=e[l+1]=e[l+2]=t}}(a.data,.5),a},n=a(7320),c=a.n(n);let o=e=>{let l=async l=>{var a,t;let r=null!==(a=null==l?void 0:l.image)&&void 0!==a?a:null==e?void 0:e.image,s=null!==(t=null==l?void 0:l.langs)&&void 0!==t?t:null==e?void 0:e.langs;if(!r)throw Error("Tesseract image is required");let i=await c().createWorker();return await i.load(),await i.loadLanguage(s),await i.initialize(s),await i.recognize(r)};return{recognize:l=>{var a,t,r;let s=null!==(a=null==l?void 0:l.image)&&void 0!==a?a:null==e?void 0:e.image,i=null!==(t=null==l?void 0:l.langs)&&void 0!==t?t:null==e?void 0:e.langs;if(!s)throw Error("Tesseract image is required");return c().recognize(s,i,null!==(r=null==l?void 0:l.options)&&void 0!==r?r:{logger:e=>console.log({m:e})})},recognizeWorker:l,imagePreprocess:i}};var d=a(47516);let u={hasError:!1,searchUrl:"",textResult:"",isLoading:!1,isSearchFromUrl:!1,confidence:0};var g=()=>{let[e,l]=(0,s.useState)(u),a=e=>l(l=>({...l,...e})),r=(0,s.useRef)(null),i=(0,s.useRef)(null),{recognizeWorker:n,imagePreprocess:c}=o(),g=()=>{let e=r.current,l=i.current;e.width=l.width,e.height=l.height;let a=e.getContext("2d");null==a||a.drawImage(l,0,0),null==a||a.putImageData(c(e),0,0);let t=e.toDataURL("image/jpeg");return t};return(0,t.jsxs)("section",{className:"min-h-[calc(92vh-5rem)] flex flex-col items-center justify-start w-full mx-auto",children:[(0,t.jsx)("img",{ref:i,hidden:!0}),(0,t.jsx)("canvas",{ref:r,hidden:!0}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/2 max-w-80",children:[e.isSearchFromUrl?(0,t.jsx)("input",{type:"url",placeholder:"Type image url here",className:"input input-bordered w-full",value:e.searchUrl,onChange:e=>a({searchUrl:e.target.value})}):(0,t.jsx)("input",{type:"file",accept:"image/*",className:"file-input file-input-bordered w-full",onChange:e=>{let{target:{files:l}}=e;if(!l||!l[0])return;let a=i.current;a.src=URL.createObjectURL(l[0])}}),(0,t.jsxs)("div",{className:"w-full flex justify-between items-center gap-5",children:[(0,t.jsx)("div",{className:"form-control",children:(0,t.jsxs)("label",{className:"label cursor-pointer justify-start gap-3",children:[(0,t.jsx)("input",{type:"checkbox",className:"toggle",checked:e.isSearchFromUrl,onChange:e=>a({...u,isSearchFromUrl:e.target.checked})}),(0,t.jsx)("span",{className:"label-text",children:"convert from url"})]})}),(0,t.jsxs)("button",{className:"btn",onClick:()=>{let l=e.isSearchFromUrl?e.searchUrl:g();a({isLoading:!0,hasError:!1,textResult:""}),n({image:l}).catch(e=>a({hasError:!0})).then(e=>{e&&(console.log({result:e}),a({textResult:e.data.text,confidence:e.data.confidence}))}).finally(()=>a({isLoading:!1}))},disabled:e.isLoading,children:[e.isLoading&&(0,t.jsx)("span",{className:"loading loading-spinner"}),"Convert"]})]})]}),e.textResult&&(0,t.jsx)("div",{className:"card w-full mt-2 bg-base-200 shadow-xl",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("div",{className:"card-actions justify-start",children:(0,t.jsxs)("div",{className:"badge badge-outline",children:["confidence ",e.confidence,"%"]})}),(0,t.jsx)("p",{className:"prose md:prose-lg lg:prose-xl mx-auto",dangerouslySetInnerHTML:{__html:e.textResult}})]})}),e.hasError&&(0,t.jsx)("div",{className:"card w-full mt-2 bg-error shadow-xl",children:(0,t.jsxs)("div",{className:"card-body text-base-300",children:[(0,t.jsx)("div",{className:"card-actions justify-start",children:(0,t.jsx)(d.Cw1,{size:40})}),(0,t.jsx)("p",{children:"An issue occurred. Please make another attempt or consider altering the image."})]})})]})},h=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.PB,{title:"OCR",description:"Pasquale Favella , image to text"}),(0,t.jsx)(g,{})]})}},function(e){e.O(0,[320,774,888,179],function(){return e(e.s=33609)}),_N_E=e.O()}]);