(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{23710:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mail-editor",function(){return s(43281)}])},77117:function(e,t,s){"use strict";var n=s(85893),a=s(67294);t.Z=(0,a.memo)(()=>(0,n.jsx)("div",{className:"flex justify-center px-4 py-16",children:(0,n.jsx)("span",{className:"loading loading-ring loading-lg"})}))},52068:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(85893),a=s(67294),i=s(90512),l=e=>{let{Icon:t,hide:s=!1,className:l,...o}=e,r=(0,a.useId)();return(0,n.jsxs)("div",{hidden:s,className:(0,i.Z)("relative",o.containerClassName),children:[(0,n.jsx)("input",{className:(0,i.Z)("w-full input input-bordered pl-12 transition-colors duration-200 ease-linear focus:border-primary focus:outline-none",l),id:r,...o}),(0,n.jsx)("label",{htmlFor:r,children:(0,n.jsx)(t,{size:20,className:(0,i.Z)("absolute top-1/2 left-4 -translate-y-1/2",o.iconClassName)})})]})}},5567:function(e,t,s){"use strict";s.d(t,{Bw:function(){return u},Ph:function(){return r},Ql:function(){return m},i4:function(){return d},ki:function(){return c}});var n=s(85893),a=s(67294),i=s(92882),l=s(39025),o=s(61121);let r=i.fC;i.ZA;let c=i.B4,d=a.forwardRef((e,t)=>{let{className:s,children:a,...r}=e;return(0,n.jsxs)(i.xz,{ref:t,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border input-bordered bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-base-content focus:border-primary focus:outline-none disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:[a,(0,n.jsx)(i.JO,{asChild:!0,children:(0,n.jsx)(o.OrA,{className:"h-4 w-4 opacity-50"})})]})});d.displayName=i.xz.displayName;let u=a.forwardRef((e,t)=>{let{className:s,children:a,position:o="popper",...r}=e;return(0,n.jsx)(i.h_,{children:(0,n.jsx)(i.VY,{ref:t,className:(0,l.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-base-100 shadow-md",s),position:o,...r,children:(0,n.jsx)(i.l_,{className:"p-1",children:a})})})});u.displayName=i.VY.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(i.__,{ref:t,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=i.__.displayName;let m=a.forwardRef((e,t)=>{let{className:s,children:a,...r}=e;return(0,n.jsxs)(i.ck,{ref:t,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-base-300 ",s),...r,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(i.wU,{children:(0,n.jsx)(o.hXj,{className:"h-4 w-4"})})}),(0,n.jsx)(i.eT,{children:a})]})});m.displayName=i.ck.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(i.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-base-300",s),...a})}).displayName=i.Z0.displayName},43281:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eb}});var n=s(85893),a=s(67294),i=s(86501),l=s(73652),o=s(62925),r=s(20443),c=s(24622),d=s(22424),u=s(48583),m=s(15103),p=s(95495);let h=["openai","anthropic","google"],x={openai:["gpt-3.5-turbo","gpt-4","gpt-4o","gpt-4-turbo","gpt-4o-mini"],anthropic:["claude-3-5-haiku-latest","claude-3-5-sonnet-latest","claude-4-opus-20250514","claude-4-sonnet-20250514"],google:["models/gemini-2.5-pro","models/gemini-2.5-flash","models/gemini-2.0-flash","models/gemini-1.5-flash-001","models/gemini-1.5-pro-001"]},g={openai:"https://platform.openai.com/account/api-keys",anthropic:"https://console.anthropic.com/settings/keys",google:"https://aistudio.google.com/app/apikey"},f=(0,p.O4)("mail-provider","google"),b=(0,p.O4)("mail-model",x.google[1]),j=(0,p.O4)("mail-api-key",""),v="<h1>Welcome to your new email editor!</h1><p>This is a sample email to get you started. You can edit this content, or start from scratch.</p><p>Here are a few things you can do:</p><ul><li><p>Use the toolbar to format your text (bold, italics, etc.)</p></li><li><p>Add headings, lists, and other elements.</p></li><li><p>Use the AI assistant to help you write and edit your emails.</p></li></ul><p>Happy emailing!</p>",N=(0,m.cn)(v),y=(0,m.cn)([v]),k=(0,m.cn)(0),w=(0,m.cn)(e=>e(N),(e,t,s)=>{let n=e(y),a=e(k),i=n.slice(0,a+1);i.push(s),t(y,i),t(k,i.length-1),t(N,s)}),C=(0,m.cn)("You are a specialized AI assistant for editing email templates in HTML format. Your sole purpose is to return a valid HTML string based on the user's instructions.\n\nYou will be given an existing HTML string representing an email template. Your task is to modify this HTML based on the user's prompt and return the complete, updated HTML string.\n\nYou MUST return a single, valid HTML string. Do NOT include any introductory text, explanations, or markdown formatting around the HTML.\n\nBased on the user's prompt and the provided HTML, modify the content to reflect the requested changes. You can add, remove, or update HTML elements as needed. The final output must be ONLY the complete, modified HTML string."),A=()=>{let[e,t]=(0,u.KO)(f),[s,n]=(0,u.KO)(b),[i,l]=(0,u.KO)(j),[o,r]=(0,u.KO)(N),[c,d]=(0,u.KO)(C),[m,p]=(0,u.KO)(y),[h,g]=(0,u.KO)(k),[,v]=(0,u.KO)(w),A=(0,a.useCallback)(e=>{t(e),n(x[e][0])},[t,n]),L=(0,a.useCallback)(()=>{if(h>0){let e=h-1;g(e),r(m[e])}},[m,h,g,r]),T=(0,a.useCallback)(()=>{if(h<m.length-1){let e=h+1;g(e),r(m[e])}},[m,h,g,r]);return{provider:e,model:s,apiKey:i,mailContent:o,systemPrompt:c,history:m,historyIndex:h,handleProviderChange:A,setModel:n,setApiKey:l,setMailContent:r,setSystemPrompt:d,setContentWithHistory:v,handleUndo:L,handleRedo:T,setHistoryIndex:g}};var L=s(89833),T=s(55451),R=s(87536),P=s(56561),z=s(5567),H=s(52068),E=()=>{let{provider:e,model:t,apiKey:s,handleProviderChange:a,setModel:i,setApiKey:l}=A();return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Provider"}),(0,n.jsxs)(z.Ph,{onValueChange:a,value:e,children:[(0,n.jsx)(z.i4,{children:(0,n.jsx)(z.ki,{placeholder:"Select a provider"})}),(0,n.jsx)(z.Bw,{children:h.map(e=>(0,n.jsx)(z.Ql,{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Model"}),(0,n.jsxs)(z.Ph,{onValueChange:i,value:t,children:[(0,n.jsx)(z.i4,{children:(0,n.jsx)(z.ki,{placeholder:"Select a model"})}),(0,n.jsx)(z.Bw,{children:x[e].map(e=>(0,n.jsx)(z.Ql,{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"API Key"}),(0,n.jsx)(H.Z,{Icon:L.MhP,type:"password",value:s,onChange:e=>l(e.target.value),placeholder:"Enter your API key"}),(0,n.jsxs)("a",{href:g[e],target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline mt-1 block",children:["Get your API key from ",e]})]})]})},I=e=>{let{onSubmit:t,onEnhance:s,isLoading:i,isEnhancing:l,apiKey:o}=e,r=(0,a.useRef)(null),{register:c,handleSubmit:d,watch:u,setValue:m,formState:{errors:p}}=(0,R.Gc)(),h=u("prompt"),x=u("image"),[g,f]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!(x instanceof File)){f(null);return}let e=URL.createObjectURL(x);return f(e),()=>URL.revokeObjectURL(e)},[x]),(0,n.jsxs)("form",{onSubmit:d(t),className:"space-y-4 mt-4",children:[g&&(0,n.jsxs)("div",{className:"relative w-32 h-32",children:[(0,n.jsx)("img",{src:g,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),(0,n.jsx)("button",{type:"button",onClick:()=>{m("image",void 0)},className:"absolute top-1 right-1 bg-gray-800 text-white rounded-full p-1",children:(0,n.jsx)(L.ven,{})})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("textarea",{...c("prompt"),className:"w-full p-4 border rounded pr-12 pb-10",rows:3,placeholder:"Enter your prompt here..."}),(0,n.jsx)("div",{className:"absolute top-2 right-2",children:(0,n.jsx)("button",{type:"submit",className:"btn btn-square btn-sm btn-primary",disabled:i||!o||!h,children:i?(0,n.jsx)("span",{className:"loading loading-spinner"}):(0,n.jsx)(L.bTI,{size:24})})}),(0,n.jsxs)("div",{className:"absolute bottom-2 left-2 flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"tooltip","data-tip":"Attach Image",children:[(0,n.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.click()},className:"btn btn-square btn-sm",children:(0,n.jsx)(L.lVZ,{size:24})}),(0,n.jsx)("input",{type:"file",ref:r,onChange:e=>{var t;(null===(t=e.target.files)||void 0===t?void 0:t[0])&&m("image",e.target.files[0])},className:"hidden",accept:"image/*"})]}),(0,n.jsx)("div",{className:"tooltip","data-tip":"Enhance Prompt",children:(0,n.jsx)("button",{type:"button",onClick:()=>s(h),className:"btn btn-square btn-sm",disabled:l||!o||!h,children:l?(0,n.jsx)("span",{className:"loading loading-spinner"}):(0,n.jsx)(L.NM5,{size:24})})}),(0,n.jsx)("div",{className:"tooltip","data-tip":"AI Settings",children:(0,n.jsxs)(P.J2,{children:[(0,n.jsx)(P.xo,{className:"btn btn-square btn-sm",children:(0,n.jsx)(L.TXX,{size:24})}),(0,n.jsx)(P.yk,{children:(0,n.jsx)(E,{})})]})})]})]}),p.prompt&&(0,n.jsx)("p",{className:"text-red-500",children:p.prompt.message})]})},M=s(56312),S=s(1604);let B=S.z.object({prompt:S.z.string().min(1,"Prompt cannot be empty"),image:S.z.instanceof(File).optional()});var O=s(27662),_=s(54929),Z=s(96279),Y=s(60363),U=s(658),D=s(43626),V=s(33991),F=s(85915),K=s(26761),q=s(52091),X=s(19151);let G=e=>{let{editor:t,setLink:s,addImage:a}=e;if(!t)return null;let i=[{icon:q.PKR,onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),disabled:!t.can().chain().focus().toggleBold().run(),title:"Bold"},{icon:q.Mef,onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),disabled:!t.can().chain().focus().toggleItalic().run(),title:"Italic"},{icon:q.zal,onClick:()=>t.chain().focus().toggleStrike().run(),isActive:t.isActive("strike"),disabled:!t.can().chain().focus().toggleStrike().run(),title:"Strike"},{icon:q.tvD,onClick:()=>t.chain().focus().toggleCode().run(),isActive:t.isActive("code"),disabled:!t.can().chain().focus().toggleCode().run(),title:"Code"},{icon:q.AAJ,onClick:()=>t.chain().focus().setParagraph().run(),isActive:t.isActive("paragraph"),title:"Paragraph"},{icon:q.YHB,onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),isActive:t.isActive("heading",{level:1}),title:"H1"},{icon:q.YHB,onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),isActive:t.isActive("heading",{level:2}),title:"H2"},{icon:q.YHB,onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),isActive:t.isActive("heading",{level:3}),title:"H3"},{icon:q.hON,onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet List"},{icon:q.Fe1,onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Ordered List"},{icon:q.fkU,onClick:()=>t.chain().focus().toggleBlockquote().run(),isActive:t.isActive("blockquote"),title:"Blockquote"},{icon:q.sVy,onClick:()=>t.chain().focus().setHorizontalRule().run(),title:"Horizontal Rule"},{icon:q.L5z,onClick:()=>t.chain().focus().setHardBreak().run(),title:"Hard Break"},{icon:q.E2G,onClick:()=>t.chain().focus().setTextAlign("left").run(),isActive:t.isActive({textAlign:"left"}),title:"Align Left"},{icon:q.X5x,onClick:()=>t.chain().focus().setTextAlign("center").run(),isActive:t.isActive({textAlign:"center"}),title:"Align Center"},{icon:q.lPs,onClick:()=>t.chain().focus().setTextAlign("right").run(),isActive:t.isActive({textAlign:"right"}),title:"Align Right"},{icon:q.gjK,onClick:s,isActive:t.isActive("link"),title:"Set Link"},{icon:q.H3h,onClick:a,title:"Add Image"},{icon:q.WHV,onClick:()=>t.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),title:"Insert Table"},{icon:q.Xm5,onClick:()=>t.chain().focus().deleteTable().run(),title:"Delete Table"},{icon:X.JRr,onClick:()=>t.chain().focus().addColumnAfter().run(),title:"Add Column After"},{icon:X.nTh,onClick:()=>t.chain().focus().deleteColumn().run(),title:"Delete Column"},{icon:X.gIP,onClick:()=>t.chain().focus().addRowAfter().run(),title:"Add Row After"},{icon:X.LEM,onClick:()=>t.chain().focus().deleteRow().run(),title:"Delete Row"},{icon:q.wXW,onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().chain().focus().undo().run(),title:"Undo"},{icon:q.WLu,onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().chain().focus().redo().run(),title:"Redo"}];return(0,n.jsx)("div",{className:"flex items-center flex-wrap gap-2 mb-4 p-2 border rounded",children:i.map((e,t)=>(0,n.jsx)("div",{className:"tooltip","data-tip":e.title,children:(0,n.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"btn btn-ghost btn-sm ".concat(e.isActive?"btn-active":""),children:(0,n.jsx)(e.icon,{})})},t))})};var J=e=>{let{content:t,onUpdate:s,placeholder:i="Insert text here...",className:l="min-h-[150px]"}=e,o=(0,O.jE)({extensions:[_.Z,Z.Z.configure({types:["heading","paragraph"]}),Y.ZP.configure({resizable:!0}),V.Z,D.Z,U.Z,F.ZP.configure({openOnClick:!1,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:"cursor-pointer"}}),K.ZP],content:t,onUpdate:e=>{let{editor:t}=e;s(t.getHTML())},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl min-w-full focus:outline-none border rounded-lg p-4 shadow-sm ".concat(l)}},immediatelyRender:!1}),r=(0,a.useCallback)(()=>{let e=window.prompt("URL");e&&o&&o.chain().focus().setImage({src:e}).run()},[o]),c=(0,a.useCallback)(()=>{if(!o)return;let e=o.getAttributes("link").href,{from:t,to:s}=o.state.selection,n=o.isActive("link"),a=window.prompt("URL",e);if(null!==a){if(""===a){o.chain().focus().extendMarkRange("link").unsetLink().run();return}t!==s?o.chain().focus().setTextSelection({from:t,to:s}).setLink({href:a}).run():n?o.chain().focus().extendMarkRange("link").setLink({href:a}).run():o.chain().focus().insertContent('<a href="'.concat(a,'" target="_blank">').concat(a,"</a>")).run()}},[o]);return(0,n.jsxs)("div",{children:[(0,n.jsx)(G,{editor:o,setLink:c,addImage:r}),o&&(0,n.jsx)(O.NM,{className:"bg-base-200 shadow-xl p-2 rounded-lg flex gap-2",editor:o,tippyOptions:{duration:100},shouldShow:e=>{let{editor:t,view:s,state:n,from:a,to:i}=e;return a!==i},children:o.isActive("link")?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:c,className:"btn btn-ghost btn-sm",children:(0,n.jsx)(q.gjK,{})}),(0,n.jsx)("button",{onClick:()=>o.chain().focus().unsetLink().run(),className:"btn btn-ghost btn-sm",children:(0,n.jsx)(q.J8O,{})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>o.chain().focus().toggleBold().run(),className:"btn btn-ghost btn-sm ".concat(o.isActive("bold")?"btn-active":""),children:(0,n.jsx)(q.PKR,{})}),(0,n.jsx)("button",{onClick:()=>o.chain().focus().toggleItalic().run(),className:"btn btn-ghost btn-sm ".concat(o.isActive("italic")?"btn-active":""),children:(0,n.jsx)(q.Mef,{})}),(0,n.jsx)("button",{onClick:()=>o.chain().focus().toggleStrike().run(),className:"btn btn-ghost btn-sm ".concat(o.isActive("strike")?"btn-active":""),children:(0,n.jsx)(q.zal,{})})]})}),(0,n.jsx)(O.kg,{editor:o,placeholder:i})]})},W=e=>{let{content:t,onUpdate:s}=e,i=(0,a.useCallback)(e=>{s(e)},[s]);return(0,n.jsx)(J,{content:t,onUpdate:i})},Q=s(63764),$=s(77117),ee=e=>{let{content:t,onUpdate:s}=e,i=(0,a.useCallback)(e=>{s(null!=e?e:"")},[s]);return(0,n.jsx)("div",{className:"h-[500px] overflow-auto border rounded-lg",children:(0,n.jsx)(Q.ZP,{theme:"vs-dark",language:"html",value:t,onChange:i,loading:(0,n.jsx)($.Z,{}),options:{minimap:{enabled:!1}}})})},et=s(89056),es=s(39025);let en=et.fC,ea=et.xz;et.x8;let ei=et.h_,el=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(et.aV,{ref:t,"data-slot":"sheet-overlay",className:(0,es.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-base-content/50",s),...a})});el.displayName=et.aV.displayName;let eo=a.forwardRef((e,t)=>{let{side:s="right",className:a,children:i,...l}=e;return(0,n.jsxs)(ei,{children:[(0,n.jsx)(el,{}),(0,n.jsxs)(et.VY,{ref:t,"data-slot":"sheet-content",className:(0,es.cn)("bg-base-100 data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===s&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===s&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===s&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===s&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",a),...l,children:[i,(0,n.jsxs)(et.x8,{className:"btn btn-ghost btn-sm absolute top-4 right-4 opacity-70 transition-opacity hover:opacity-100",children:[(0,n.jsx)(L.ven,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eo.displayName=et.VY.displayName;let er=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,"data-slot":"sheet-header",className:(0,es.cn)("flex flex-col gap-1.5 p-4",s),...a})});er.displayName="SheetHeader",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,"data-slot":"sheet-footer",className:(0,es.cn)("mt-auto flex flex-col gap-2 p-4",s),...a})}).displayName="SheetFooter";let ec=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(et.Dx,{ref:t,"data-slot":"sheet-title",className:(0,es.cn)("text-base-content font-semibold",s),...a})});ec.displayName=et.Dx.displayName;let ed=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(et.dk,{ref:t,"data-slot":"sheet-description",className:(0,es.cn)("text-base-content/70 text-sm",s),...a})});ed.displayName=et.dk.displayName;let eu=e=>{if("transparent"===e||"rgba(0, 0, 0, 0)"===e)return"#ffffff";let t=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(!t)return"#ffffff";let s=e=>"0".concat(e.toString(16)).slice(-2),n=parseInt(t[1]),a=parseInt(t[2]),i=parseInt(t[3]);return"#".concat(s(n)).concat(s(a)).concat(s(i))};var em=e=>{let{isSelectionModeActive:t,onClose:s,iframeRef:i}=e,{setMailContent:l}=A(),[o,r]=(0,a.useState)(null),[c,d]=(0,a.useState)({color:"#000000",backgroundColor:"#ffffff",padding:{top:"",right:"",bottom:"",left:""},margin:{top:"",right:"",bottom:"",left:""},textAlign:"left"}),[u,m]=(0,a.useState)(null),p=(0,a.useCallback)(e=>{let t=e.split(/\s+/).filter(Boolean),s="",n="",a="",i="";return 1===t.length?s=n=a=i=t[0]:2===t.length?(s=a=t[0],n=i=t[1]):3===t.length?(s=t[0],n=i=t[1],a=t[2]):4===t.length&&(s=t[0],n=t[1],a=t[2],i=t[3]),{top:s,right:n,bottom:a,left:i}},[]),h=(0,a.useCallback)(()=>{o&&(o.style.outline=""),u&&(u.style.outline=""),r(null),d({color:"#000000",backgroundColor:"#ffffff",padding:{top:"",right:"",bottom:"",left:""},margin:{top:"",right:"",bottom:"",left:""},textAlign:"left"}),m(null)},[o,u]),x=(0,a.useCallback)((e,t)=>{if(o){if("string"==typeof t)o.style[e]=t;else{let{top:s,right:n,bottom:a,left:i}=t;o.style[e]="".concat(s," ").concat(n," ").concat(a," ").concat(i)}}},[o]),g=(0,a.useCallback)(e=>{let{name:t,value:s}=e.target;d(e=>({...e,[t]:s})),x(t,s)},[x]),f=(0,a.useCallback)((e,t,s)=>{let{value:n}=e.target;d(e=>{let a={...e[s],[t]:n};return x(s,a),{...e,[s]:a}})},[x]),b=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation();let t=e.target;o&&o!==t&&(o.style.outline=""),u&&u!==t&&(u.style.outline=""),r(t);let s=window.getComputedStyle(t);d({color:eu(s.color),backgroundColor:eu(s.backgroundColor),padding:p(s.padding),margin:p(s.margin),textAlign:s.textAlign}),t.style.outline=""},[o,u,p]);(0,a.useEffect)(()=>{t||h()},[t,h]);let j=(0,a.useCallback)(e=>{let t=e.target;t&&t!==u&&t!==o&&(u&&(u.style.outline=""),t.style.outline="2px solid blue",m(t))},[u,o]),v=(0,a.useCallback)(e=>{let t=e.target;t===u&&t!==o&&(t.style.outline="",m(null))},[u,o]);(0,a.useEffect)(()=>{var e;let s=i.current;if(!s)return;let n=s.contentDocument||(null===(e=s.contentWindow)||void 0===e?void 0:e.document);if(n)return t?(n.addEventListener("click",b,!0),n.addEventListener("mousemove",j,!0),n.addEventListener("mouseout",v,!0),n.body.style.cursor="pointer"):(n.removeEventListener("click",b,!0),n.removeEventListener("mousemove",j,!0),n.removeEventListener("mouseout",v,!0),n.body.style.cursor="default"),()=>{n&&(n.removeEventListener("click",b,!0),n.removeEventListener("mousemove",j,!0),n.removeEventListener("mouseout",v,!0),n.body.style.cursor="default")}},[t,i,b,j,v]);let N=(0,a.useCallback)(()=>{var e;h(),(null===(e=i.current)||void 0===e?void 0:e.contentDocument)&&l(i.current.contentDocument.documentElement.outerHTML),s()},[h,s,l,i]);return(0,n.jsxs)(en,{open:null!==o,onOpenChange:N,children:[" ",(0,n.jsxs)(eo,{side:"right",children:[(0,n.jsxs)(er,{children:[(0,n.jsx)(ec,{children:"Edit Element Styles"}),(0,n.jsx)(ed,{children:o?"Editing: <".concat(o.tagName.toLowerCase(),">"):"Select an element in the preview to modify its styles."})]}),(0,n.jsx)("div",{className:"p-4",children:o?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(L.LPY,{size:20,className:"text-base-content/70"}),(0,n.jsx)("label",{className:"block text-sm font-medium text-base-content flex-grow",children:"Color"}),(0,n.jsx)("input",{type:"color",name:"color",value:c.color,onChange:g,className:"input input-bordered w-12 h-8 p-0",title:c.color})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(L.LPY,{size:20,className:"text-base-content/70"}),(0,n.jsx)("label",{className:"block text-sm font-medium text-base-content flex-grow",children:"Background Color"}),(0,n.jsx)("input",{type:"color",name:"backgroundColor",value:c.backgroundColor,onChange:g,className:"input input-bordered w-12 h-8 p-0",title:c.backgroundColor})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-base-content",children:"Text Align"}),(0,n.jsxs)("select",{name:"textAlign",value:c.textAlign,onChange:g,className:"select select-bordered select-sm w-full",children:[(0,n.jsx)("option",{value:"left",children:"Left"}),(0,n.jsx)("option",{value:"center",children:"Center"}),(0,n.jsx)("option",{value:"right",children:"Right"}),(0,n.jsx)("option",{value:"justify",children:"Justify"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-base-content",children:"Padding"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)("div",{className:"tooltip tooltip-top","data-tip":"Padding Top",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(L.yDP,{size:16,className:"text-base-content/70"}),(0,n.jsx)("input",{type:"text",name:"paddingTop",value:c.padding.top,onChange:e=>f(e,"top","padding"),placeholder:"Top",className:"input input-bordered input-sm w-full"})]})}),(0,n.jsx)("div",{className:"tooltip tooltip-top","data-tip":"Padding Right",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(L.bTI,{size:16,className:"text-base-content/70"}),(0,n.jsx)("input",{type:"text",name:"paddingRight",value:c.padding.right,onChange:e=>f(e,"right","padding"),placeholder:"Right",className:"input input-bordered input-sm w-full"})]})}),(0,n.jsx)("div",{className:"tooltip tooltip-top","data-tip":"Padding Bottom",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(L.Bqo,{size:16,className:"text-base-content/70"}),(0,n.jsx)("input",{type:"text",name:"paddingBottom",value:c.padding.bottom,onChange:e=>f(e,"bottom","padding"),placeholder:"Bottom",className:"input input-bordered input-sm w-full"})]})}),(0,n.jsx)("div",{className:"tooltip tooltip-top","data-tip":"Padding Left",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(L.gGS,{size:16,className:"text-base-content/70"}),(0,n.jsx)("input",{type:"text",name:"paddingLeft",value:c.padding.left,onChange:e=>f(e,"left","padding"),placeholder:"Left",className:"input input-bordered input-sm w-full"})]})})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-base-content",children:"Margin"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)("div",{className:"tooltip tooltip-top","data-tip":"Margin Top",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(L.yDP,{size:16,className:"text-base-content/70"}),(0,n.jsx)("input",{type:"text",name:"marginTop",value:c.margin.top,onChange:e=>f(e,"top","margin"),placeholder:"Top",className:"input input-bordered input-sm w-full"})]})}),(0,n.jsx)("div",{className:"tooltip tooltip-top","data-tip":"Margin Right",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(L.bTI,{size:16,className:"text-base-content/70"}),(0,n.jsx)("input",{type:"text",name:"marginRight",value:c.margin.right,onChange:e=>f(e,"right","margin"),placeholder:"Right",className:"input input-bordered input-sm w-full"})]})}),(0,n.jsx)("div",{className:"tooltip tooltip-top","data-tip":"Margin Bottom",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(L.Bqo,{size:16,className:"text-base-content/70"}),(0,n.jsx)("input",{type:"text",name:"marginBottom",value:c.margin.bottom,onChange:e=>f(e,"bottom","margin"),placeholder:"Bottom",className:"input input-bordered input-sm w-full"})]})}),(0,n.jsx)("div",{className:"tooltip tooltip-top","data-tip":"Margin Left",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(L.gGS,{size:16,className:"text-base-content/70"}),(0,n.jsx)("input",{type:"text",name:"marginLeft",value:c.margin.left,onChange:e=>f(e,"left","margin"),placeholder:"Left",className:"input input-bordered input-sm w-full"})]})})]})]})]}):(0,n.jsx)("p",{children:"No element selected. Click on an element in the preview."})})]})]})},ep=s(35282),eh=e=>{let{content:t,screenSize:s}=e,i=(0,a.useRef)(null),[l,o]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"flex justify-center ".concat("desktop"===s?"w-full":"tablet"===s?"w-3/4":"w-1/2"," mx-auto"),children:[(0,n.jsxs)("div",{className:"relative border rounded-lg min-h-48 w-full",children:[(0,n.jsx)("iframe",{title:"Mail Preview",srcDoc:t,className:"w-full h-full border-none",style:{minHeight:"400px"},ref:i}),(0,n.jsxs)("div",{className:"absolute top-2 right-4 flex gap-1",children:[(0,n.jsx)("div",{className:"tooltip","data-tip":"Fullscreen Preview",children:(0,n.jsx)("button",{onClick:()=>{let e=window.open("","_blank");e&&(e.document.write(t),e.document.close())},className:"btn btn-square btn-sm",children:(0,n.jsx)(L.O$8,{size:24})})}),(0,n.jsx)("div",{className:"tooltip","data-tip":"Copy HTML",children:(0,n.jsx)("button",{onClick:()=>navigator.clipboard.writeText(t),className:"btn btn-square btn-sm",children:(0,n.jsx)(L.tl1,{size:24})})}),(0,n.jsx)("div",{className:"tooltip","data-tip":"Select Element",children:(0,n.jsx)("button",{className:"btn btn-square btn-sm ".concat(l?"btn-active":""),onClick:()=>o(!l),children:(0,n.jsx)(ep.azr,{size:24})})})]})]}),(0,n.jsx)(em,{isSelectionModeActive:l,iframeRef:i,onClose:()=>o(!1)})]})},ex=()=>{let{history:e,historyIndex:t,setHistoryIndex:s,setMailContent:i}=A(),l=(0,a.useCallback)(t=>{s(t),i(e[t])},[e,s,i]);return(0,n.jsxs)(en,{children:[(0,n.jsx)(ea,{asChild:!0,children:(0,n.jsx)("div",{className:"tooltip","data-tip":"AI Generation History",children:(0,n.jsxs)("button",{className:"btn btn-sm btn-outline btn-primary",children:[(0,n.jsx)(L.M1Q,{size:20}),(0,n.jsx)("span",{className:"font-semibold",children:"History"})]})})}),(0,n.jsxs)(eo,{side:"right",className:"w-96","aria-description":"AI Generation History",children:[(0,n.jsx)(er,{children:(0,n.jsx)(ec,{children:"AI Generation History"})}),(0,n.jsx)("ul",{className:"menu p-4 min-h-full",children:e.map((e,s)=>(0,n.jsx)("li",{className:"mb-3 px-2",children:(0,n.jsx)("button",{className:"card w-full bg-base-100 shadow-md cursor-pointer transition-all duration-200 ease-in-out ".concat(s===t?"border-2 border-primary ring-2 ring-primary":"hover:shadow-lg hover:scale-[1.01]"),onClick:()=>l(s),children:(0,n.jsxs)("div",{className:"card-body p-3",children:[(0,n.jsxs)("h3",{className:"card-title text-sm",children:["Version ",s+1]}),(0,n.jsx)("div",{className:"text-xs text-base-content opacity-60 line-clamp-2 text-ellipsis break-words",children:(0,n.jsx)("iframe",{title:"History Version ".concat(s+1),srcDoc:e,className:"w-full h-24 border-none"})})]})})},s))})]})]})},eg=()=>{let{mailContent:e,setMailContent:t,systemPrompt:s,provider:u,model:m,apiKey:p,setContentWithHistory:h}=A(),[x,g]=(0,a.useState)("rich"),[f,b]=(0,a.useState)("desktop"),[j,v]=(0,a.useState)(!1),[N,y]=(0,a.useState)(!1),k=(0,R.cI)({resolver:(0,M.F)(B)}),{setValue:w,reset:C}=k,P=(0,a.useMemo)(()=>{if(!p)return null;switch(u){case"openai":return(0,o.J)({apiKey:p});case"anthropic":return(0,r.D)({apiKey:p});case"google":return(0,c.L)({apiKey:p});default:return null}},[u,p]),z=(0,a.useCallback)(async e=>{if(!P||!e)return;y(!0);let t="";try{for await(let s of(0,l.kP)({model:P(m),prompt:e,onError:e=>{i.toast.error(e.error.message)},onFinish:e=>{console.log({step:e}),i.toast.success("Prompt enhanced successfully!")},system:"You are an expert in crafting email generation prompts. Enhance the following user prompt to be more detailed and effective for generating a professional email template. Respond only with the enhanced prompt, without any additional text or explanations."}).textStream)t+=s;w("prompt",t)}catch(e){i.toast.error(e.message)}finally{y(!1)}},[P,m,w]),H=(0,a.useCallback)(async t=>{if(!P)return;v(!0);let n="";try{let a={role:"user",content:[{type:"text",text:"Based on the following HTML, please apply the following changes: ".concat(t.prompt,". Here is the HTML: ").concat(e)}]};if(t.image&&Array.isArray(a.content)){let e=await new Promise((e,s)=>{let n=new FileReader;n.onload=()=>e(n.result),n.onerror=s,t.image?n.readAsDataURL(t.image):s(Error("Image not found"))});a.content.push({type:"image",image:e})}let o=(0,l.eI)({model:P(m),middleware:{wrapGenerate:async e=>{let{doGenerate:t}=e,{text:s,...n}=await t();return{text:s?d.Z.sanitize(s):s,...n}}}});for await(let e of(0,l.kP)({model:o,messages:[a],system:s,onError:e=>{i.toast.error(e.error.message)},onFinish:e=>{"stop"===e.finishReason&&i.toast.success("Template generated successfully!")}}).textStream)n+=e;h(n),C(),"preview"!==x&&g("preview")}catch(e){console.log({err:e}),i.toast.error(e.message)}finally{v(!1)}},[P,m,s,e,h,x,C]);return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 border rounded-md p-1",children:[(0,n.jsx)("div",{className:"tooltip","data-tip":"Rich Editor",children:(0,n.jsx)("button",{className:"btn btn-sm btn-ghost ".concat("rich"===x?"btn-active":""),onClick:()=>g("rich"),children:(0,n.jsx)(L.$jT,{size:20})})}),(0,n.jsx)("div",{className:"tooltip","data-tip":"Code Editor",children:(0,n.jsx)("button",{className:"btn btn-sm btn-ghost ".concat("code"===x?"btn-active":""),onClick:()=>g("code"),children:(0,n.jsx)(L.s2,{size:20})})}),(0,n.jsx)("div",{className:"tooltip","data-tip":"Preview",children:(0,n.jsx)("button",{className:"btn btn-sm btn-ghost ".concat("preview"===x?"btn-active":""),onClick:()=>g("preview"),children:(0,n.jsx)(L.wT3,{size:20})})})]}),"preview"===x&&(0,n.jsxs)("div",{className:"flex items-center gap-2 border rounded-md p-1",children:[(0,n.jsx)("div",{className:"tooltip","data-tip":"Desktop",children:(0,n.jsx)("button",{className:"btn btn-sm btn-ghost ".concat("desktop"===f?"btn-active":""),onClick:()=>b("desktop"),children:(0,n.jsx)(T.Fs5,{size:20})})}),(0,n.jsx)("div",{className:"tooltip","data-tip":"Tablet",children:(0,n.jsx)("button",{className:"btn btn-sm btn-ghost ".concat("tablet"===f?"btn-active":""),onClick:()=>b("tablet"),children:(0,n.jsx)(T.SOO,{size:20})})}),(0,n.jsx)("div",{className:"tooltip","data-tip":"Mobile",children:(0,n.jsx)("button",{className:"btn btn-sm btn-ghost ".concat("mobile"===f?"btn-active":""),onClick:()=>b("mobile"),children:(0,n.jsx)(T.ilT,{size:20})})})]}),(0,n.jsx)(ex,{})]}),"rich"===x?(0,n.jsx)(W,{content:e,onUpdate:t}):"code"===x?(0,n.jsx)(ee,{content:e,onUpdate:t}):(0,n.jsx)(eh,{content:e,screenSize:f}),(0,n.jsx)("div",{className:"space-y-4 mt-4",children:(0,n.jsx)(R.RV,{...k,children:(0,n.jsx)(I,{onSubmit:H,onEnhance:z,isLoading:j,isEnhancing:N,apiKey:p})})})]})},ef=s(2962),eb=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ef.PB,{title:"AI-Powered Mail Editor",description:"Create and edit beautiful, responsive emails with the help of AI. Choose your provider, model, and generate templates."}),(0,n.jsxs)("div",{className:"text-center p-4",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold",children:"Craft Your Perfect Email with AI"}),(0,n.jsxs)("p",{className:"text-lg text-muted-foreground mt-2 max-w-2xl mx-auto",children:["Let our AI assistant help you design beautiful, responsive emails in minutes. Use the ",(0,n.jsx)(L.TXX,{className:"inline-block"})," icon to select your AI provider and enter your API key."]}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-4 text-sm text-muted-foreground",children:[(0,n.jsx)(L.ULV,{}),(0,n.jsx)("span",{children:"Your API key is stored securely in your browser and is never sent to our servers."})]})]}),(0,n.jsx)(eg,{})]})}},function(e){e.O(0,[7909,6911,6279,1509,5495,3764,3760,4562,494,2888,9774,179],function(){return e(e.s=23710)}),_N_E=e.O()}]);