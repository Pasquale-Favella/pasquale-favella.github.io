(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2045],{72917:function(e,t,n){(()=>{"use strict";var t={491:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let r=n(223),o=n(172),a=n(930),i="context",s=new r.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,o.registerGlobal)(i,e,a.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,n,...r){return this._getContextManager().with(e,t,n,...r)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,o.getGlobal)(i)||s}disable(){this._getContextManager().disable(),(0,o.unregisterGlobal)(i,a.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let r=n(56),o=n(912),a=n(957),i=n(172);class s{constructor(){function e(e){return function(...t){let n=(0,i.getGlobal)("diag");if(n)return n[e](...t)}}let t=this;t.setLogger=(e,n={logLevel:a.DiagLogLevel.INFO})=>{var r,s,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=e.stack)&&void 0!==r?r:e.message),!1}"number"==typeof n&&(n={logLevel:n});let u=(0,i.getGlobal)("diag"),c=(0,o.createLogLevelDiagLogger)(null!==(s=n.logLevel)&&void 0!==s?s:a.DiagLogLevel.INFO,e);if(u&&!n.suppressOverrideMessage){let e=null!==(l=Error().stack)&&void 0!==l?l:"<failed to generate stacktrace>";u.warn(`Current logger will be overwritten from ${e}`),c.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,i.registerGlobal)("diag",c,t,!0)},t.disable=()=>{(0,i.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new r.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new s),this._instance}}t.DiagAPI=s},653:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let r=n(660),o=n(172),a=n(930),i="metrics";class s{constructor(){}static getInstance(){return this._instance||(this._instance=new s),this._instance}setGlobalMeterProvider(e){return(0,o.registerGlobal)(i,e,a.DiagAPI.instance())}getMeterProvider(){return(0,o.getGlobal)(i)||r.NOOP_METER_PROVIDER}getMeter(e,t,n){return this.getMeterProvider().getMeter(e,t,n)}disable(){(0,o.unregisterGlobal)(i,a.DiagAPI.instance())}}t.MetricsAPI=s},181:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let r=n(172),o=n(874),a=n(194),i=n(277),s=n(369),l=n(930),u="propagation",c=new o.NoopTextMapPropagator;class p{constructor(){this.createBaggage=s.createBaggage,this.getBaggage=i.getBaggage,this.getActiveBaggage=i.getActiveBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}static getInstance(){return this._instance||(this._instance=new p),this._instance}setGlobalPropagator(e){return(0,r.registerGlobal)(u,e,l.DiagAPI.instance())}inject(e,t,n=a.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,n)}extract(e,t,n=a.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,n)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,r.unregisterGlobal)(u,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,r.getGlobal)(u)||c}}t.PropagationAPI=p},997:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let r=n(172),o=n(846),a=n(139),i=n(607),s=n(930),l="trace";class u{constructor(){this._proxyTracerProvider=new o.ProxyTracerProvider,this.wrapSpanContext=a.wrapSpanContext,this.isSpanContextValid=a.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getActiveSpan=i.getActiveSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}static getInstance(){return this._instance||(this._instance=new u),this._instance}setGlobalTracerProvider(e){let t=(0,r.registerGlobal)(l,this._proxyTracerProvider,s.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,r.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,r.unregisterGlobal)(l,s.DiagAPI.instance()),this._proxyTracerProvider=new o.ProxyTracerProvider}}t.TraceAPI=u},277:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let r=n(491),o=(0,n(780).createContextKey)("OpenTelemetry Baggage Key");function a(e){return e.getValue(o)||void 0}t.getBaggage=a,t.getActiveBaggage=function(){return a(r.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(o,t)},t.deleteBaggage=function(e){return e.deleteValue(o)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class n{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let r=new n(this._entries);return r._entries.set(e,t),r}removeEntry(e){let t=new n(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new n(this._entries);for(let n of e)t._entries.delete(n);return t}clear(){return new n}}t.BaggageImpl=n},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let r=n(930),o=n(993),a=n(830),i=r.DiagAPI.instance();t.createBaggage=function(e={}){return new o.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(i.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:a.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0;let r=n(491);t.context=r.ContextAPI.getInstance()},223:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let r=n(780);class o{active(){return r.ROOT_CONTEXT}with(e,t,n,...r){return t.call(n,...r)}bind(e,t){return t}enable(){return this}disable(){return this}}t.NoopContextManager=o},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class n{constructor(e){let t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,r)=>{let o=new n(t._currentContext);return o._currentContext.set(e,r),o},t.deleteValue=e=>{let r=new n(t._currentContext);return r._currentContext.delete(e),r}}}t.ROOT_CONTEXT=new n},506:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0;let r=n(930);t.diag=r.DiagAPI.instance()},56:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let r=n(172);class o{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return a("debug",this._namespace,e)}error(...e){return a("error",this._namespace,e)}info(...e){return a("info",this._namespace,e)}warn(...e){return a("warn",this._namespace,e)}verbose(...e){return a("verbose",this._namespace,e)}}function a(e,t,n){let o=(0,r.getGlobal)("diag");if(o)return n.unshift(t),o[e](...n)}t.DiagComponentLogger=o},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let n=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class r{constructor(){for(let e=0;e<n.length;e++)this[n[e].n]=function(e){return function(...t){if(console){let n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}(n[e].c)}}t.DiagConsoleLogger=r},912:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let r=n(957);t.createLogLevelDiagLogger=function(e,t){function n(n,r){let o=t[n];return"function"==typeof o&&e>=r?o.bind(t):function(){}}return e<r.DiagLogLevel.NONE?e=r.DiagLogLevel.NONE:e>r.DiagLogLevel.ALL&&(e=r.DiagLogLevel.ALL),t=t||{},{error:n("error",r.DiagLogLevel.ERROR),warn:n("warn",r.DiagLogLevel.WARN),info:n("info",r.DiagLogLevel.INFO),debug:n("debug",r.DiagLogLevel.DEBUG),verbose:n("verbose",r.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,(n=t.DiagLogLevel||(t.DiagLogLevel={}))[n.NONE=0]="NONE",n[n.ERROR=30]="ERROR",n[n.WARN=50]="WARN",n[n.INFO=60]="INFO",n[n.DEBUG=70]="DEBUG",n[n.VERBOSE=80]="VERBOSE",n[n.ALL=9999]="ALL"},172:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let r=n(200),o=n(521),a=n(130),i=o.VERSION.split(".")[0],s=Symbol.for(`opentelemetry.js.api.${i}`),l=r._globalThis;t.registerGlobal=function(e,t,n,r=!1){var a;let i=l[s]=null!==(a=l[s])&&void 0!==a?a:{version:o.VERSION};if(!r&&i[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return n.error(t.stack||t.message),!1}if(i.version!==o.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${i.version} for ${e} does not match previously registered API v${o.VERSION}`);return n.error(t.stack||t.message),!1}return i[e]=t,n.debug(`@opentelemetry/api: Registered a global for ${e} v${o.VERSION}.`),!0},t.getGlobal=function(e){var t,n;let r=null===(t=l[s])||void 0===t?void 0:t.version;if(r&&(0,a.isCompatible)(r))return null===(n=l[s])||void 0===n?void 0:n[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${o.VERSION}.`);let n=l[s];n&&delete n[e]}},130:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let r=n(521),o=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function a(e){let t=new Set([e]),n=new Set,r=e.match(o);if(!r)return()=>!1;let a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=a.prerelease)return function(t){return t===e};function i(e){return n.add(e),!1}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;let r=e.match(o);if(!r)return i(e);let s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};return null!=s.prerelease||a.major!==s.major?i(e):0===a.major?a.minor===s.minor&&a.patch<=s.patch?(t.add(e),!0):i(e):a.minor<=s.minor?(t.add(e),!0):i(e)}}t._makeCompatibilityCheck=a,t.isCompatible=a(r.VERSION)},886:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0;let r=n(653);t.metrics=r.MetricsAPI.getInstance()},901:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,(n=t.ValueType||(t.ValueType={}))[n.INT=0]="INT",n[n.DOUBLE=1]="DOUBLE"},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class n{constructor(){}createHistogram(e,n){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,n){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,n){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,n){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,n){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,n){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=n;class r{}t.NoopMetric=r;class o extends r{add(e,t){}}t.NoopCounterMetric=o;class a extends r{add(e,t){}}t.NoopUpDownCounterMetric=a;class i extends r{record(e,t){}}t.NoopHistogramMetric=i;class s{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=s;class l extends s{}t.NoopObservableCounterMetric=l;class u extends s{}t.NoopObservableGaugeMetric=u;class c extends s{}t.NoopObservableUpDownCounterMetric=c,t.NOOP_METER=new n,t.NOOP_COUNTER_METRIC=new o,t.NOOP_HISTOGRAM_METRIC=new i,t.NOOP_UP_DOWN_COUNTER_METRIC=new a,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new u,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new c,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let r=n(102);class o{getMeter(e,t,n){return r.NOOP_METER}}t.NoopMeterProvider=o,t.NOOP_METER_PROVIDER=new o},200:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(46),t)},651:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:n.g},46:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(651),t)},939:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0;let r=n(181);t.propagation=r.PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;class n{inject(e,t){}extract(e,t){return e}fields(){return[]}}t.NoopTextMapPropagator=n},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,n){null!=e&&(e[t]=n)}}},845:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0;let r=n(997);t.trace=r.TraceAPI.getInstance()},403:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let r=n(476);class o{constructor(e=r.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}t.NonRecordingSpan=o},614:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let r=n(491),o=n(607),a=n(403),i=n(139),s=r.ContextAPI.getInstance();class l{startSpan(e,t,n=s.active()){if(null==t?void 0:t.root)return new a.NonRecordingSpan;let r=n&&(0,o.getSpanContext)(n);return"object"==typeof r&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&(0,i.isSpanContextValid)(r)?new a.NonRecordingSpan(r):new a.NonRecordingSpan}startActiveSpan(e,t,n,r){let a,i,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(a=t,l=n):(a=t,i=n,l=r);let u=null!=i?i:s.active(),c=this.startSpan(e,a,u),p=(0,o.setSpan)(u,c);return s.with(p,l,void 0,c)}}t.NoopTracer=l},124:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let r=n(614);class o{getTracer(e,t,n){return new r.NoopTracer}}t.NoopTracerProvider=o},125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let r=new(n(614)).NoopTracer;class o{constructor(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}startSpan(e,t,n){return this._getTracer().startSpan(e,t,n)}startActiveSpan(e,t,n,r){let o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):r}}t.ProxyTracer=o},846:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let r=n(125),o=new(n(124)).NoopTracerProvider;class a{getTracer(e,t,n){var o;return null!==(o=this.getDelegateTracer(e,t,n))&&void 0!==o?o:new r.ProxyTracer(this,e,t,n)}getDelegate(){var e;return null!==(e=this._delegate)&&void 0!==e?e:o}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)}}t.ProxyTracerProvider=a},996:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,(n=t.SamplingDecision||(t.SamplingDecision={}))[n.NOT_RECORD=0]="NOT_RECORD",n[n.RECORD=1]="RECORD",n[n.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},607:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let r=n(780),o=n(403),a=n(491),i=(0,r.createContextKey)("OpenTelemetry Context Key SPAN");function s(e){return e.getValue(i)||void 0}function l(e,t){return e.setValue(i,t)}t.getSpan=s,t.getActiveSpan=function(){return s(a.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(i)},t.setSpanContext=function(e,t){return l(e,new o.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.spanContext()}},325:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let r=n(564);class o{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let n=t.trim(),o=n.indexOf("=");if(-1!==o){let a=n.slice(0,o),i=n.slice(o+1,t.length);(0,r.validateKey)(a)&&(0,r.validateValue)(i)&&e.set(a,i)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new o;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=o},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let n="[_0-9a-z-*/]",r=`[a-z]${n}{0,255}`,o=`[a-z0-9]${n}{0,240}@[a-z]${n}{0,13}`,a=RegExp(`^(?:${r}|${o})$`),i=/^[ -~]{0,255}[!-~]$/,s=/,|=/;t.validateKey=function(e){return a.test(e)},t.validateValue=function(e){return i.test(e)&&!s.test(e)}},98:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let r=n(325);t.createTraceState=function(e){return new r.TraceStateImpl(e)}},476:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let r=n(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:r.TraceFlags.NONE}},357:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,(n=t.SpanKind||(t.SpanKind={}))[n.INTERNAL=0]="INTERNAL",n[n.SERVER=1]="SERVER",n[n.CLIENT=2]="CLIENT",n[n.PRODUCER=3]="PRODUCER",n[n.CONSUMER=4]="CONSUMER"},139:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let r=n(476),o=n(403),a=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function s(e){return a.test(e)&&e!==r.INVALID_TRACEID}function l(e){return i.test(e)&&e!==r.INVALID_SPANID}t.isValidTraceId=s,t.isValidSpanId=l,t.isSpanContextValid=function(e){return s(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new o.NonRecordingSpan(e)}},847:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,(n=t.SpanStatusCode||(t.SpanStatusCode={}))[n.UNSET=0]="UNSET",n[n.OK=1]="OK",n[n.ERROR=2]="ERROR"},475:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,(n=t.TraceFlags||(t.TraceFlags={}))[n.NONE=0]="NONE",n[n.SAMPLED=1]="SAMPLED"},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},i=!0;try{t[e].call(a.exports,a,a.exports,o),i=!1}finally{i&&delete r[e]}return a.exports}o.ab="//";var a={};(()=>{Object.defineProperty(a,"__esModule",{value:!0}),a.trace=a.propagation=a.metrics=a.diag=a.context=a.INVALID_SPAN_CONTEXT=a.INVALID_TRACEID=a.INVALID_SPANID=a.isValidSpanId=a.isValidTraceId=a.isSpanContextValid=a.createTraceState=a.TraceFlags=a.SpanStatusCode=a.SpanKind=a.SamplingDecision=a.ProxyTracerProvider=a.ProxyTracer=a.defaultTextMapSetter=a.defaultTextMapGetter=a.ValueType=a.createNoopMeter=a.DiagLogLevel=a.DiagConsoleLogger=a.ROOT_CONTEXT=a.createContextKey=a.baggageEntryMetadataFromString=void 0;var e=o(369);Object.defineProperty(a,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return e.baggageEntryMetadataFromString}});var t=o(780);Object.defineProperty(a,"createContextKey",{enumerable:!0,get:function(){return t.createContextKey}}),Object.defineProperty(a,"ROOT_CONTEXT",{enumerable:!0,get:function(){return t.ROOT_CONTEXT}});var n=o(972);Object.defineProperty(a,"DiagConsoleLogger",{enumerable:!0,get:function(){return n.DiagConsoleLogger}});var r=o(957);Object.defineProperty(a,"DiagLogLevel",{enumerable:!0,get:function(){return r.DiagLogLevel}});var i=o(102);Object.defineProperty(a,"createNoopMeter",{enumerable:!0,get:function(){return i.createNoopMeter}});var s=o(901);Object.defineProperty(a,"ValueType",{enumerable:!0,get:function(){return s.ValueType}});var l=o(194);Object.defineProperty(a,"defaultTextMapGetter",{enumerable:!0,get:function(){return l.defaultTextMapGetter}}),Object.defineProperty(a,"defaultTextMapSetter",{enumerable:!0,get:function(){return l.defaultTextMapSetter}});var u=o(125);Object.defineProperty(a,"ProxyTracer",{enumerable:!0,get:function(){return u.ProxyTracer}});var c=o(846);Object.defineProperty(a,"ProxyTracerProvider",{enumerable:!0,get:function(){return c.ProxyTracerProvider}});var p=o(996);Object.defineProperty(a,"SamplingDecision",{enumerable:!0,get:function(){return p.SamplingDecision}});var d=o(357);Object.defineProperty(a,"SpanKind",{enumerable:!0,get:function(){return d.SpanKind}});var m=o(847);Object.defineProperty(a,"SpanStatusCode",{enumerable:!0,get:function(){return m.SpanStatusCode}});var g=o(475);Object.defineProperty(a,"TraceFlags",{enumerable:!0,get:function(){return g.TraceFlags}});var f=o(98);Object.defineProperty(a,"createTraceState",{enumerable:!0,get:function(){return f.createTraceState}});var h=o(139);Object.defineProperty(a,"isSpanContextValid",{enumerable:!0,get:function(){return h.isSpanContextValid}}),Object.defineProperty(a,"isValidTraceId",{enumerable:!0,get:function(){return h.isValidTraceId}}),Object.defineProperty(a,"isValidSpanId",{enumerable:!0,get:function(){return h.isValidSpanId}});var y=o(476);Object.defineProperty(a,"INVALID_SPANID",{enumerable:!0,get:function(){return y.INVALID_SPANID}}),Object.defineProperty(a,"INVALID_TRACEID",{enumerable:!0,get:function(){return y.INVALID_TRACEID}}),Object.defineProperty(a,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return y.INVALID_SPAN_CONTEXT}});let v=o(67);Object.defineProperty(a,"context",{enumerable:!0,get:function(){return v.context}});let b=o(506);Object.defineProperty(a,"diag",{enumerable:!0,get:function(){return b.diag}});let _=o(886);Object.defineProperty(a,"metrics",{enumerable:!0,get:function(){return _.metrics}});let w=o(939);Object.defineProperty(a,"propagation",{enumerable:!0,get:function(){return w.propagation}});let T=o(845);Object.defineProperty(a,"trace",{enumerable:!0,get:function(){return T.trace}}),a.default={context:v.context,diag:b.diag,metrics:_.metrics,propagation:w.propagation,trace:T.trace}})(),e.exports=a})()},58833:function(e,t,n){"use strict";var r=n(48764).lW;let o=void 0!==r,a=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,i=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function s(e,t,n){null==n&&null!==t&&"object"==typeof t&&(n=t,t=void 0),o&&r.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let s=JSON.parse(e,t);if(null===s||"object"!=typeof s)return s;let u=n&&n.protoAction||"error",c=n&&n.constructorAction||"error";if("ignore"===u&&"ignore"===c)return s;if("ignore"!==u&&"ignore"!==c){if(!1===a.test(e)&&!1===i.test(e))return s}else if("ignore"!==u&&"ignore"===c){if(!1===a.test(e))return s}else if(!1===i.test(e))return s;return l(s,{protoAction:u,constructorAction:c,safe:n&&n.safe})}function l(e,{protoAction:t="error",constructorAction:n="error",safe:r}={}){let o=[e];for(;o.length;){let e=o;for(let a of(o=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(a,"__proto__")){if(!0===r)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete a.__proto__}if("ignore"!==n&&Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype")){if(!0===r)return null;if("error"===n)throw SyntaxError("Object contains forbidden prototype property");delete a.constructor}for(let e in a){let t=a[e];t&&"object"==typeof t&&o.push(t)}}}return e}function u(e,t,n){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return s(e,t,n)}finally{Error.stackTraceLimit=r}}e.exports=u,e.exports.default=u,e.exports.parse=u,e.exports.safeParse=function(e,t){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return s(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=n}},e.exports.scan=l},20443:function(e,t,n){"use strict";n.d(t,{D:function(){return _}});var r=n(5045),o=n(989),a=n(1604),i=a.z.object({type:a.z.literal("error"),error:a.z.object({type:a.z.string(),message:a.z.string()})}),s=(0,o.Sq)({errorSchema:i,errorToMessage:e=>e.error.message});function l(e){switch(e){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}var u=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}supportsUrl(e){return"https:"===e.protocol}get provider(){return this.config.provider}get supportsImageUrls(){return this.config.supportsImageUrls}async getArgs({mode:e,prompt:t,maxTokens:n=4096,temperature:a,topP:i,topK:s,frequencyPenalty:l,presencePenalty:u,stopSequences:c,responseFormat:p,seed:m,providerMetadata:g}){var f,h,y;let v=e.type,b=[];null!=l&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=u&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=m&&b.push({type:"unsupported-setting",setting:"seed"}),null!=p&&"text"!==p.type&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:_,betas:w}=function({prompt:e,sendReasoning:t,warnings:n}){var a,i,s,l;let u;let c=new Set,p=function(e){let t;let n=[];for(let r of e){let{role:e}=r;switch(e){case"system":(null==t?void 0:t.type)!=="system"&&(t={type:"system",messages:[]},n.push(t)),t.messages.push(r);break;case"assistant":(null==t?void 0:t.type)!=="assistant"&&(t={type:"assistant",messages:[]},n.push(t)),t.messages.push(r);break;case"user":case"tool":(null==t?void 0:t.type)!=="user"&&(t={type:"user",messages:[]},n.push(t)),t.messages.push(r);break;default:throw Error(`Unsupported role: ${e}`)}}return n}(e),d=[];function m(e){var t;let n=null==e?void 0:e.anthropic;return null!=(t=null==n?void 0:n.cacheControl)?t:null==n?void 0:n.cache_control}for(let e=0;e<p.length;e++){let g=p[e],f=e===p.length-1,h=g.type;switch(h){case"system":if(null!=u)throw new r.A_({functionality:"Multiple system messages that are separated by user/assistant messages"});u=g.messages.map(({content:e,providerMetadata:t})=>({type:"text",text:e,cache_control:m(t)}));break;case"user":{let e=[];for(let t of g.messages){let{role:n,content:l}=t;switch(n){case"user":for(let n=0;n<l.length;n++){let s=l[n],u=n===l.length-1,p=null!=(a=m(s.providerMetadata))?a:u?m(t.providerMetadata):void 0;switch(s.type){case"text":e.push({type:"text",text:s.text,cache_control:p});break;case"image":e.push({type:"image",source:s.image instanceof URL?{type:"url",url:s.image.toString()}:{type:"base64",media_type:null!=(i=s.mimeType)?i:"image/jpeg",data:(0,o.k0)(s.image)},cache_control:p});break;case"file":if("application/pdf"!==s.mimeType)throw new r.A_({functionality:"Non-PDF files in user messages"});c.add("pdfs-2024-09-25"),e.push({type:"document",source:s.data instanceof URL?{type:"url",url:s.data.toString()}:{type:"base64",media_type:"application/pdf",data:s.data},cache_control:p})}}break;case"tool":for(let n=0;n<l.length;n++){let r=l[n],o=n===l.length-1,a=null!=(s=m(r.providerMetadata))?s:o?m(t.providerMetadata):void 0,i=null!=r.content?r.content.map(e=>{var t;switch(e.type){case"text":return{type:"text",text:e.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:null!=(t=e.mimeType)?t:"image/jpeg",data:e.data},cache_control:void 0}}}):JSON.stringify(r.result);e.push({type:"tool_result",tool_use_id:r.toolCallId,content:i,is_error:r.isError,cache_control:a})}break;default:throw Error(`Unsupported role: ${n}`)}}d.push({role:"user",content:e});break}case"assistant":{let e=[];for(let r=0;r<g.messages.length;r++){let o=g.messages[r],a=r===g.messages.length-1,{content:i}=o;for(let r=0;r<i.length;r++){let s=i[r],u=r===i.length-1,c=null!=(l=m(s.providerMetadata))?l:u?m(o.providerMetadata):void 0;switch(s.type){case"text":e.push({type:"text",text:f&&a&&u?s.text.trim():s.text,cache_control:c});break;case"reasoning":t?e.push({type:"thinking",thinking:s.text,signature:s.signature,cache_control:c}):n.push({type:"other",message:"sending reasoning content is disabled for this model"});break;case"redacted-reasoning":e.push({type:"redacted_thinking",data:s.data,cache_control:c});break;case"tool-call":e.push({type:"tool_use",id:s.toolCallId,name:s.toolName,input:s.args,cache_control:c})}}}d.push({role:"assistant",content:e});break}default:throw Error(`Unsupported type: ${h}`)}}return{prompt:{system:u,messages:d},betas:c}}({prompt:t,sendReasoning:null==(f=this.settings.sendReasoning)||f,warnings:b}),T=(0,o.c1)({provider:"anthropic",providerOptions:g,schema:d}),E=(null==(h=null==T?void 0:T.thinking)?void 0:h.type)==="enabled",N=null==(y=null==T?void 0:T.thinking)?void 0:y.budgetTokens,x={model:this.modelId,max_tokens:n,temperature:a,top_k:s,top_p:i,stop_sequences:c,...E&&{thinking:{type:"enabled",budget_tokens:N}},system:_.system,messages:_.messages};if(E){if(null==N)throw new r.A_({functionality:"thinking requires a budget"});null!=x.temperature&&(x.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),null!=s&&(x.top_k=void 0,b.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),null!=i&&(x.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),x.max_tokens=n+N}switch(v){case"regular":{let{tools:t,tool_choice:n,toolWarnings:o,betas:a}=function(e){var t;let n=(null==(t=e.tools)?void 0:t.length)?e.tools:void 0,o=[],a=new Set;if(null==n)return{tools:void 0,tool_choice:void 0,toolWarnings:o,betas:a};let i=[];for(let e of n)switch(e.type){case"function":i.push({name:e.name,description:e.description,input_schema:e.parameters});break;case"provider-defined":switch(e.id){case"anthropic.computer_20250124":a.add("computer-use-2025-01-24"),i.push({name:e.name,type:"computer_20250124",display_width_px:e.args.displayWidthPx,display_height_px:e.args.displayHeightPx,display_number:e.args.displayNumber});break;case"anthropic.computer_20241022":a.add("computer-use-2024-10-22"),i.push({name:e.name,type:"computer_20241022",display_width_px:e.args.displayWidthPx,display_height_px:e.args.displayHeightPx,display_number:e.args.displayNumber});break;case"anthropic.text_editor_20250124":a.add("computer-use-2025-01-24"),i.push({name:e.name,type:"text_editor_20250124"});break;case"anthropic.text_editor_20241022":a.add("computer-use-2024-10-22"),i.push({name:e.name,type:"text_editor_20241022"});break;case"anthropic.bash_20250124":a.add("computer-use-2025-01-24"),i.push({name:e.name,type:"bash_20250124"});break;case"anthropic.bash_20241022":a.add("computer-use-2024-10-22"),i.push({name:e.name,type:"bash_20241022"});break;default:o.push({type:"unsupported-tool",tool:e})}break;default:o.push({type:"unsupported-tool",tool:e})}let s=e.toolChoice;if(null==s)return{tools:i,tool_choice:void 0,toolWarnings:o,betas:a};let l=s.type;switch(l){case"auto":return{tools:i,tool_choice:{type:"auto"},toolWarnings:o,betas:a};case"required":return{tools:i,tool_choice:{type:"any"},toolWarnings:o,betas:a};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:o,betas:a};case"tool":return{tools:i,tool_choice:{type:"tool",name:s.toolName},toolWarnings:o,betas:a};default:throw new r.A_({functionality:`Unsupported tool choice type: ${l}`})}}(e);return{args:{...x,tools:t,tool_choice:n},warnings:[...b,...o],betas:new Set([...w,...a])}}case"object-json":throw new r.A_({functionality:"json-mode object generation"});case"object-tool":{let{name:t,description:n,parameters:r}=e.tool;return{args:{...x,tools:[{name:t,description:n,input_schema:r}],tool_choice:{type:"tool",name:t}},warnings:b,betas:w}}default:throw Error(`Unsupported type: ${v}`)}}async getHeaders({betas:e,headers:t}){return(0,o.NF)(await (0,o.DB)(this.config.headers),e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{},t)}buildRequestUrl(e){var t,n,r;return null!=(r=null==(n=(t=this.config).buildRequestUrl)?void 0:n.call(t,this.config.baseURL,e))?r:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,n,r;return null!=(r=null==(n=(t=this.config).transformRequestBody)?void 0:n.call(t,e))?r:e}async doGenerate(e){var t,n,r,a;let i;let{args:u,warnings:p,betas:d}=await this.getArgs(e),{responseHeaders:m,value:g,rawValue:f}=await (0,o.A8)({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:d,headers:e.headers}),body:this.transformRequestBody(u),failedResponseHandler:s,successfulResponseHandler:(0,o.tc)(c),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:h,...y}=u,v="";for(let e of g.content)"text"===e.type&&(v+=e.text);if(g.content.some(e=>"tool_use"===e.type))for(let e of(i=[],g.content))"tool_use"===e.type&&i.push({toolCallType:"function",toolCallId:e.id,toolName:e.name,args:JSON.stringify(e.input)});let b=g.content.filter(e=>"redacted_thinking"===e.type||"thinking"===e.type).map(e=>"thinking"===e.type?{type:"text",text:e.thinking,signature:e.signature}:{type:"redacted",data:e.data});return{text:v,reasoning:b.length>0?b:void 0,toolCalls:i,finishReason:l(g.stop_reason),usage:{promptTokens:g.usage.input_tokens,completionTokens:g.usage.output_tokens},rawCall:{rawPrompt:h,rawSettings:y},rawResponse:{headers:m,body:f},response:{id:null!=(t=g.id)?t:void 0,modelId:null!=(n=g.model)?n:void 0},warnings:p,providerMetadata:{anthropic:{cacheCreationInputTokens:null!=(r=g.usage.cache_creation_input_tokens)?r:null,cacheReadInputTokens:null!=(a=g.usage.cache_read_input_tokens)?a:null}},request:{body:JSON.stringify(u)}}}async doStream(e){let t,n;let{args:r,warnings:a,betas:i}=await this.getArgs(e),u={...r,stream:!0},{responseHeaders:c,value:d}=await (0,o.A8)({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:i,headers:e.headers}),body:this.transformRequestBody(u),failedResponseHandler:s,successfulResponseHandler:(0,o.cP)(p),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:m,...g}=r,f="unknown",h={promptTokens:Number.NaN,completionTokens:Number.NaN},y={};return{stream:d.pipeThrough(new TransformStream({transform(e,r){var o,a,i,s;if(!e.success){r.enqueue({type:"error",error:e.error});return}let u=e.value;switch(u.type){case"ping":return;case"content_block_start":{let e=u.content_block.type;switch(n=e,e){case"text":case"thinking":return;case"redacted_thinking":r.enqueue({type:"redacted-reasoning",data:u.content_block.data});return;case"tool_use":y[u.index]={toolCallId:u.content_block.id,toolName:u.content_block.name,jsonText:""};return;default:throw Error(`Unsupported content block type: ${e}`)}}case"content_block_stop":if(null!=y[u.index]){let e=y[u.index];r.enqueue({type:"tool-call",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,args:e.jsonText}),delete y[u.index]}n=void 0;return;case"content_block_delta":{let e=u.delta.type;switch(e){case"text_delta":r.enqueue({type:"text-delta",textDelta:u.delta.text});return;case"thinking_delta":r.enqueue({type:"reasoning",textDelta:u.delta.thinking});return;case"signature_delta":"thinking"===n&&r.enqueue({type:"reasoning-signature",signature:u.delta.signature});return;case"input_json_delta":{let e=y[u.index];r.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,argsTextDelta:u.delta.partial_json}),e.jsonText+=u.delta.partial_json;return}default:throw Error(`Unsupported delta type: ${e}`)}}case"message_start":h.promptTokens=u.message.usage.input_tokens,h.completionTokens=u.message.usage.output_tokens,t={anthropic:{cacheCreationInputTokens:null!=(o=u.message.usage.cache_creation_input_tokens)?o:null,cacheReadInputTokens:null!=(a=u.message.usage.cache_read_input_tokens)?a:null}},r.enqueue({type:"response-metadata",id:null!=(i=u.message.id)?i:void 0,modelId:null!=(s=u.message.model)?s:void 0});return;case"message_delta":h.completionTokens=u.usage.output_tokens,f=l(u.delta.stop_reason);return;case"message_stop":r.enqueue({type:"finish",finishReason:f,usage:h,providerMetadata:t});return;case"error":r.enqueue({type:"error",error:u.error});return;default:throw Error(`Unsupported chunk type: ${u}`)}}})),rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:c},warnings:a,request:{body:JSON.stringify(u)}}}},c=a.z.object({type:a.z.literal("message"),id:a.z.string().nullish(),model:a.z.string().nullish(),content:a.z.array(a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("text"),text:a.z.string()}),a.z.object({type:a.z.literal("thinking"),thinking:a.z.string(),signature:a.z.string()}),a.z.object({type:a.z.literal("redacted_thinking"),data:a.z.string()}),a.z.object({type:a.z.literal("tool_use"),id:a.z.string(),name:a.z.string(),input:a.z.unknown()})])),stop_reason:a.z.string().nullish(),usage:a.z.object({input_tokens:a.z.number(),output_tokens:a.z.number(),cache_creation_input_tokens:a.z.number().nullish(),cache_read_input_tokens:a.z.number().nullish()})}),p=a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("message_start"),message:a.z.object({id:a.z.string().nullish(),model:a.z.string().nullish(),usage:a.z.object({input_tokens:a.z.number(),output_tokens:a.z.number(),cache_creation_input_tokens:a.z.number().nullish(),cache_read_input_tokens:a.z.number().nullish()})})}),a.z.object({type:a.z.literal("content_block_start"),index:a.z.number(),content_block:a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("text"),text:a.z.string()}),a.z.object({type:a.z.literal("thinking"),thinking:a.z.string()}),a.z.object({type:a.z.literal("tool_use"),id:a.z.string(),name:a.z.string()}),a.z.object({type:a.z.literal("redacted_thinking"),data:a.z.string()})])}),a.z.object({type:a.z.literal("content_block_delta"),index:a.z.number(),delta:a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("input_json_delta"),partial_json:a.z.string()}),a.z.object({type:a.z.literal("text_delta"),text:a.z.string()}),a.z.object({type:a.z.literal("thinking_delta"),thinking:a.z.string()}),a.z.object({type:a.z.literal("signature_delta"),signature:a.z.string()})])}),a.z.object({type:a.z.literal("content_block_stop"),index:a.z.number()}),a.z.object({type:a.z.literal("error"),error:a.z.object({type:a.z.string(),message:a.z.string()})}),a.z.object({type:a.z.literal("message_delta"),delta:a.z.object({stop_reason:a.z.string().nullish()}),usage:a.z.object({output_tokens:a.z.number()})}),a.z.object({type:a.z.literal("message_stop")}),a.z.object({type:a.z.literal("ping")})]),d=a.z.object({thinking:a.z.object({type:a.z.union([a.z.literal("enabled"),a.z.literal("disabled")]),budgetTokens:a.z.number().optional()}).optional()}),m=a.z.object({command:a.z.string(),restart:a.z.boolean().optional()}),g=a.z.object({command:a.z.string(),restart:a.z.boolean().optional()}),f=a.z.object({command:a.z.enum(["view","create","str_replace","insert","undo_edit"]),path:a.z.string(),file_text:a.z.string().optional(),insert_line:a.z.number().int().optional(),new_str:a.z.string().optional(),old_str:a.z.string().optional(),view_range:a.z.array(a.z.number().int()).optional()}),h=a.z.object({command:a.z.enum(["view","create","str_replace","insert","undo_edit"]),path:a.z.string(),file_text:a.z.string().optional(),insert_line:a.z.number().int().optional(),new_str:a.z.string().optional(),old_str:a.z.string().optional(),view_range:a.z.array(a.z.number().int()).optional()}),y=a.z.object({action:a.z.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:a.z.array(a.z.number().int()).optional(),text:a.z.string().optional()}),v=a.z.object({action:a.z.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:a.z.tuple([a.z.number().int(),a.z.number().int()]).optional(),duration:a.z.number().optional(),scroll_amount:a.z.number().optional(),scroll_direction:a.z.enum(["up","down","left","right"]).optional(),start_coordinate:a.z.tuple([a.z.number().int(),a.z.number().int()]).optional(),text:a.z.string().optional()}),b={bash_20241022:function(e={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:m,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},bash_20250124:function(e={}){return{type:"provider-defined",id:"anthropic.bash_20250124",args:{},parameters:g,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},textEditor_20241022:function(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:f,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},textEditor_20250124:function(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20250124",args:{},parameters:h,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},computer_20241022:function(e){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:y,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},computer_20250124:function(e){return{type:"provider-defined",id:"anthropic.computer_20250124",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:v,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}};function _(e={}){var t;let n=null!=(t=(0,o.QT)(e.baseURL))?t:"https://api.anthropic.com/v1",a=()=>({"anthropic-version":"2023-06-01","x-api-key":(0,o.pd)({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers}),i=(t,r={})=>new u(t,r,{provider:"anthropic.messages",baseURL:n,headers:a,fetch:e.fetch,supportsImageUrls:!0}),s=function(e,t){if(new.target)throw Error("The Anthropic model function cannot be called with the new keyword.");return i(e,t)};return s.languageModel=i,s.chat=i,s.messages=i,s.textEmbeddingModel=e=>{throw new r.JJ({modelId:e,modelType:"textEmbeddingModel"})},s.tools=b,s}_()},24622:function(e,t,n){"use strict";n.d(t,{L:function(){return S}});var r=n(989),o=n(1604),a=n(5045);function i(e){if(null!=e&&"object"==typeof e&&"object"===e.type&&(null==e.properties||0===Object.keys(e.properties).length))return;if("boolean"==typeof e)return{type:"boolean",properties:{}};let{type:t,description:n,required:r,properties:o,items:a,allOf:s,anyOf:l,oneOf:u,format:c,const:p,minLength:d,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),void 0!==p&&(g.enum=[p]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(e=>"null"!==e)[0],g.nullable=!0):g.type=t:"null"===t?g.type="null":g.type=t),void 0!==m&&(g.enum=m),null!=o&&(g.properties=Object.entries(o).reduce((e,[t,n])=>(e[t]=i(n),e),{})),a&&(g.items=Array.isArray(a)?a.map(i):i(a)),s&&(g.allOf=s.map(i)),l){if(l.some(e=>"object"==typeof e&&(null==e?void 0:e.type)==="null")){let e=l.filter(e=>!("object"==typeof e&&(null==e?void 0:e.type)==="null"));if(1===e.length){let t=i(e[0]);"object"==typeof t&&(g.nullable=!0,Object.assign(g,t))}else g.anyOf=e.map(i),g.nullable=!0}else g.anyOf=l.map(i)}return u&&(g.oneOf=u.map(i)),void 0!==d&&(g.minLength=d),g}function s(e){return e.includes("/")?e:`models/${e}`}var l=o.z.object({error:o.z.object({code:o.z.number().nullable(),message:o.z.string(),status:o.z.string()})}),u=(0,r.Sq)({errorSchema:l,errorToMessage:e=>e.error.message});function c({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var p=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return null==(e=this.settings.structuredOutputs)||e}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:o,topP:s,topK:l,frequencyPenalty:u,presencePenalty:c,stopSequences:p,responseFormat:d,seed:m,providerMetadata:g}){var f,h,y;let v=e.type,b=[],_=(0,r.c1)({provider:"google",providerOptions:g,schema:E});(null==(f=null==_?void 0:_.thinkingConfig)?void 0:f.includeThoughts)!==!0||this.config.provider.startsWith("google.vertex.")||b.push({type:"other",message:`The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let w={maxOutputTokens:n,temperature:o,topK:l,topP:s,frequencyPenalty:u,presencePenalty:c,stopSequences:p,seed:m,responseMimeType:(null==d?void 0:d.type)==="json"?"application/json":void 0,responseSchema:(null==d?void 0:d.type)==="json"&&null!=d.schema&&this.supportsStructuredOutputs?i(d.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:null==_?void 0:_.responseModalities,thinkingConfig:null==_?void 0:_.thinkingConfig},{contents:T,systemInstruction:N}=function(e){var t,n;let o=[],i=[],s=!0;for(let{role:l,content:u}of e)switch(l){case"system":if(!s)throw new a.A_({functionality:"system messages are only supported at the beginning of the conversation"});o.push({text:u});break;case"user":{s=!1;let e=[];for(let o of u)switch(o.type){case"text":e.push({text:o.text});break;case"image":e.push(o.image instanceof URL?{fileData:{mimeType:null!=(t=o.mimeType)?t:"image/jpeg",fileUri:o.image.toString()}}:{inlineData:{mimeType:null!=(n=o.mimeType)?n:"image/jpeg",data:(0,r.k0)(o.image)}});break;case"file":e.push(o.data instanceof URL?{fileData:{mimeType:o.mimeType,fileUri:o.data.toString()}}:{inlineData:{mimeType:o.mimeType,data:o.data}})}i.push({role:"user",parts:e});break}case"assistant":s=!1,i.push({role:"model",parts:u.map(e=>{switch(e.type){case"text":return 0===e.text.length?void 0:{text:e.text};case"file":if("image/png"!==e.mimeType)throw new a.A_({functionality:"Only PNG images are supported in assistant messages"});if(e.data instanceof URL)throw new a.A_({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:e.mimeType,data:e.data}};case"tool-call":return{functionCall:{name:e.toolName,args:e.args}}}}).filter(e=>void 0!==e)});break;case"tool":s=!1,i.push({role:"user",parts:u.map(e=>({functionResponse:{name:e.toolName,response:{name:e.toolName,content:e.result}}}))})}return{systemInstruction:o.length>0?{parts:o}:void 0,contents:i}}(t);switch(v){case"regular":{let{tools:t,toolConfig:n,toolWarnings:r}=function(e,t,n,r){var o,s;let l=(null==(o=e.tools)?void 0:o.length)?e.tools:void 0,u=[],c=r.includes("gemini-2"),p=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:c?{googleSearch:{}}:{googleSearchRetrieval:p&&n?{dynamicRetrievalConfig:n}:{}},toolConfig:void 0,toolWarnings:u};if(null==l)return{tools:void 0,toolConfig:void 0,toolWarnings:u};let d=[];for(let e of l)"provider-defined"===e.type?u.push({type:"unsupported-tool",tool:e}):d.push({name:e.name,description:null!=(s=e.description)?s:"",parameters:i(e.parameters)});let m=e.toolChoice;if(null==m)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:u};let g=m.type;switch(g){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:u};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:u};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:u};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[m.toolName]}},toolWarnings:u};default:throw new a.A_({functionality:`Unsupported tool choice type: ${g}`})}}(e,null!=(h=this.settings.useSearchGrounding)&&h,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:w,contents:T,systemInstruction:N,safetySettings:this.settings.safetySettings,tools:t,toolConfig:n,cachedContent:this.settings.cachedContent},warnings:[...b,...r]}}case"object-json":return{args:{generationConfig:{...w,responseMimeType:"application/json",responseSchema:null!=e.schema&&this.supportsStructuredOutputs?i(e.schema):void 0},contents:T,systemInstruction:N,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:w,contents:T,tools:{functionDeclarations:[{name:e.tool.name,description:null!=(y=e.tool.description)?y:"",parameters:i(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:throw Error(`Unsupported type: ${v}`)}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,o,a,i;let{args:l,warnings:p}=await this.getArgs(e),y=JSON.stringify(l),v=(0,r.NF)(await (0,r.DB)(this.config.headers),e.headers),{responseHeaders:b,value:_,rawValue:T}=await (0,r.A8)({url:`${this.config.baseURL}/${s(this.modelId)}:generateContent`,headers:v,body:l,failedResponseHandler:u,successfulResponseHandler:(0,r.tc)(w),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:E,...N}=l,x=_.candidates[0],I=null!=x.content&&"object"==typeof x.content&&"parts"in x.content?x.content.parts:[],S=d({parts:I,generateId:this.config.generateId}),A=_.usageMetadata;return{text:m(I),reasoning:g(I),files:null==(t=f(I))?void 0:t.map(e=>({data:e.inlineData.data,mimeType:e.inlineData.mimeType})),toolCalls:S,finishReason:c({finishReason:x.finishReason,hasToolCalls:null!=S&&S.length>0}),usage:{promptTokens:null!=(n=null==A?void 0:A.promptTokenCount)?n:NaN,completionTokens:null!=(o=null==A?void 0:A.candidatesTokenCount)?o:NaN},rawCall:{rawPrompt:E,rawSettings:N},rawResponse:{headers:b,body:T},warnings:p,providerMetadata:{google:{groundingMetadata:null!=(a=x.groundingMetadata)?a:null,safetyRatings:null!=(i=x.safetyRatings)?i:null}},sources:h({groundingMetadata:x.groundingMetadata,generateId:this.config.generateId}),request:{body:y}}}async doStream(e){let t;let{args:n,warnings:o}=await this.getArgs(e),a=JSON.stringify(n),i=(0,r.NF)(await (0,r.DB)(this.config.headers),e.headers),{responseHeaders:l,value:p}=await (0,r.A8)({url:`${this.config.baseURL}/${s(this.modelId)}:streamGenerateContent?alt=sse`,headers:i,body:n,failedResponseHandler:u,successfulResponseHandler:(0,r.cP)(T),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:y,...v}=n,b="unknown",_={promptTokens:Number.NaN,completionTokens:Number.NaN},w=this.config.generateId,E=!1;return{stream:p.pipeThrough(new TransformStream({transform(e,n){var r,o,a,i,s,l;if(!e.success){n.enqueue({type:"error",error:e.error});return}let u=e.value,p=u.usageMetadata;null!=p&&(_={promptTokens:null!=(r=p.promptTokenCount)?r:NaN,completionTokens:null!=(o=p.candidatesTokenCount)?o:NaN});let y=null==(a=u.candidates)?void 0:a[0];if(null==y)return;let v=y.content;if(null!=v){let e=m(v.parts);null!=e&&n.enqueue({type:"text-delta",textDelta:e});let t=g(v.parts);if(null!=t)for(let e of t)n.enqueue({type:"reasoning",textDelta:e.text});let r=f(v.parts);if(null!=r)for(let e of r)n.enqueue({type:"file",mimeType:e.inlineData.mimeType,data:e.inlineData.data});let o=d({parts:v.parts,generateId:w});if(null!=o)for(let e of o)n.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,argsTextDelta:e.args}),n.enqueue({type:"tool-call",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,args:e.args}),E=!0}if(null!=y.finishReason){for(let e of(b=c({finishReason:y.finishReason,hasToolCalls:E}),null!=(i=h({groundingMetadata:y.groundingMetadata,generateId:w}))?i:[]))n.enqueue({type:"source",source:e});t={google:{groundingMetadata:null!=(s=y.groundingMetadata)?s:null,safetyRatings:null!=(l=y.safetyRatings)?l:null}}}},flush(e){e.enqueue({type:"finish",finishReason:b,usage:_,providerMetadata:t})}})),rawCall:{rawPrompt:y,rawSettings:v},rawResponse:{headers:l},warnings:o,request:{body:a}}}};function d({parts:e,generateId:t}){let n=null==e?void 0:e.filter(e=>"functionCall"in e);return null==n||0===n.length?void 0:n.map(e=>({toolCallType:"function",toolCallId:t(),toolName:e.functionCall.name,args:JSON.stringify(e.functionCall.args)}))}function m(e){let t=null==e?void 0:e.filter(e=>"text"in e&&!0!==e.thought);return null==t||0===t.length?void 0:t.map(e=>e.text).join("")}function g(e){let t=null==e?void 0:e.filter(e=>"text"in e&&!0===e.thought&&null!=e.text);return null==t||0===t.length?void 0:t.map(e=>({type:"text",text:e.text}))}function f(e){return null==e?void 0:e.filter(e=>"inlineData"in e)}function h({groundingMetadata:e,generateId:t}){var n;return null==(n=null==e?void 0:e.groundingChunks)?void 0:n.filter(e=>null!=e.web).map(e=>({sourceType:"url",id:t(),url:e.web.uri,title:e.web.title}))}var y=o.z.object({parts:o.z.array(o.z.union([o.z.object({functionCall:o.z.object({name:o.z.string(),args:o.z.unknown()})}),o.z.object({inlineData:o.z.object({mimeType:o.z.string(),data:o.z.string()})}),o.z.object({text:o.z.string().nullish(),thought:o.z.boolean().nullish()})])).nullish()}),v=o.z.object({web:o.z.object({uri:o.z.string(),title:o.z.string()}).nullish(),retrievedContext:o.z.object({uri:o.z.string(),title:o.z.string()}).nullish()}),b=o.z.object({webSearchQueries:o.z.array(o.z.string()).nullish(),retrievalQueries:o.z.array(o.z.string()).nullish(),searchEntryPoint:o.z.object({renderedContent:o.z.string()}).nullish(),groundingChunks:o.z.array(v).nullish(),groundingSupports:o.z.array(o.z.object({segment:o.z.object({startIndex:o.z.number().nullish(),endIndex:o.z.number().nullish(),text:o.z.string().nullish()}),segment_text:o.z.string().nullish(),groundingChunkIndices:o.z.array(o.z.number()).nullish(),supportChunkIndices:o.z.array(o.z.number()).nullish(),confidenceScores:o.z.array(o.z.number()).nullish(),confidenceScore:o.z.array(o.z.number()).nullish()})).nullish(),retrievalMetadata:o.z.union([o.z.object({webDynamicRetrievalScore:o.z.number()}),o.z.object({})]).nullish()}),_=o.z.object({category:o.z.string().nullish(),probability:o.z.string().nullish(),probabilityScore:o.z.number().nullish(),severity:o.z.string().nullish(),severityScore:o.z.number().nullish(),blocked:o.z.boolean().nullish()}),w=o.z.object({candidates:o.z.array(o.z.object({content:y.nullish().or(o.z.object({}).strict()),finishReason:o.z.string().nullish(),safetyRatings:o.z.array(_).nullish(),groundingMetadata:b.nullish()})),usageMetadata:o.z.object({promptTokenCount:o.z.number().nullish(),candidatesTokenCount:o.z.number().nullish(),totalTokenCount:o.z.number().nullish()}).nullish()}),T=o.z.object({candidates:o.z.array(o.z.object({content:y.nullish(),finishReason:o.z.string().nullish(),safetyRatings:o.z.array(_).nullish(),groundingMetadata:b.nullish()})).nullish(),usageMetadata:o.z.object({promptTokenCount:o.z.number().nullish(),candidatesTokenCount:o.z.number().nullish(),totalTokenCount:o.z.number().nullish()}).nullish()}),E=o.z.object({responseModalities:o.z.array(o.z.enum(["TEXT","IMAGE"])).nullish(),thinkingConfig:o.z.object({thinkingBudget:o.z.number().nullish(),includeThoughts:o.z.boolean().nullish()}).nullish()}),N=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new a.ON({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let o=(0,r.NF)(await (0,r.DB)(this.config.headers),t),{responseHeaders:i,value:s}=await (0,r.A8)({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:o,body:{requests:e.map(e=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:e}]},outputDimensionality:this.settings.outputDimensionality,taskType:this.settings.taskType}))},failedResponseHandler:u,successfulResponseHandler:(0,r.tc)(x),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.embeddings.map(e=>e.values),usage:void 0,rawResponse:{headers:i}}}},x=o.z.object({embeddings:o.z.array(o.z.object({values:o.z.array(o.z.number())}))});function I(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function S(e={}){var t;let n=null!=(t=(0,r.QT)(e.baseURL))?t:"https://generativelanguage.googleapis.com/v1beta",o=()=>({"x-goog-api-key":(0,r.pd)({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(t,a={})=>{var i;return new p(t,a,{provider:"google.generative-ai",baseURL:n,headers:o,generateId:null!=(i=e.generateId)?i:r.Ox,isSupportedUrl:I,fetch:e.fetch})},i=(t,r={})=>new N(t,r,{provider:"google.generative-ai",baseURL:n,headers:o,fetch:e.fetch}),s=function(e,t){if(new.target)throw Error("The Google Generative AI model function cannot be called with the new keyword.");return a(e,t)};return s.languageModel=a,s.chat=a,s.generativeAI=a,s.embedding=i,s.textEmbedding=i,s.textEmbeddingModel=i,s}S()},62925:function(e,t,n){"use strict";n.d(t,{J:function(){return Z}});var r=n(989),o=n(5045),a=n(1604);function i(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.content)?void 0:t.map(({token:e,logprob:t,top_logprobs:n})=>({token:e,logprob:t,topLogprobs:n?n.map(({token:e,logprob:t})=>({token:e,logprob:t})):[]})))?n:void 0}function s(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var l=a.z.object({error:a.z.object({message:a.z.string(),type:a.z.string().nullish(),param:a.z.any().nullish(),code:a.z.union([a.z.string(),a.z.number()]).nullish()})}),u=(0,r.Sq)({errorSchema:l,errorToMessage:e=>e.error.message});function c({id:e,model:t,created:n}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=n?new Date(1e3*n):void 0}}var p=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return null!=(e=this.settings.structuredOutputs)?e:f(this.modelId)}get defaultObjectGenerationMode(){return this.modelId.startsWith("gpt-4o-audio-preview")?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:a,topP:i,topK:s,frequencyPenalty:l,presencePenalty:u,stopSequences:c,responseFormat:p,seed:d,providerMetadata:m}){var g,y,v,b,_,w,T,E,N,x,I;let S=e.type,A=[];null!=s&&A.push({type:"unsupported-setting",setting:"topK"}),(null==p?void 0:p.type)!=="json"||null==p.schema||this.supportsStructuredOutputs||A.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let k=this.settings.useLegacyFunctionCalling;if(k&&!0===this.settings.parallelToolCalls)throw new o.A_({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(k&&this.supportsStructuredOutputs)throw new o.A_({functionality:"structuredOutputs with useLegacyFunctionCalling"});let{messages:O,warnings:z}=function({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){let a=[],i=[];for(let{role:s,content:l}of e)switch(s){case"system":switch(n){case"system":a.push({role:"system",content:l});break;case"developer":a.push({role:"developer",content:l});break;case"remove":i.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${n}`)}break;case"user":if(1===l.length&&"text"===l[0].type){a.push({role:"user",content:l[0].text});break}a.push({role:"user",content:l.map((e,t)=>{var n,a,i,s;switch(e.type){case"text":return{type:"text",text:e.text};case"image":return{type:"image_url",image_url:{url:e.image instanceof URL?e.image.toString():`data:${null!=(n=e.mimeType)?n:"image/jpeg"};base64,${(0,r.k0)(e.image)}`,detail:null==(i=null==(a=e.providerMetadata)?void 0:a.openai)?void 0:i.imageDetail}};case"file":if(e.data instanceof URL)throw new o.A_({functionality:"'File content parts with URL data' functionality not supported."});switch(e.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:e.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:e.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:null!=(s=e.filename)?s:`part-${t}.pdf`,file_data:`data:application/pdf;base64,${e.data}`}};default:throw new o.A_({functionality:`File content part type ${e.mimeType} in user messages`})}}})});break;case"assistant":{let e="",n=[];for(let t of l)switch(t.type){case"text":e+=t.text;break;case"tool-call":n.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:JSON.stringify(t.args)}})}if(t){if(n.length>1)throw new o.A_({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});a.push({role:"assistant",content:e,function_call:n.length>0?n[0].function:void 0})}else a.push({role:"assistant",content:e,tool_calls:n.length>0?n:void 0});break}case"tool":for(let e of l)t?a.push({role:"function",name:e.toolName,content:JSON.stringify(e.result)}):a.push({role:"tool",tool_call_id:e.toolCallId,content:JSON.stringify(e.result)});break;default:throw Error(`Unsupported role: ${s}`)}return{messages:a,warnings:i}}({prompt:t,useLegacyFunctionCalling:k,systemMessageMode:f(N=this.modelId)?null!=(I=null==(x=h[N])?void 0:x.systemMessageMode)?I:"developer":"system"});A.push(...z);let C={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:!0===this.settings.logprobs||"number"==typeof this.settings.logprobs||void 0,top_logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:a,top_p:i,frequency_penalty:l,presence_penalty:u,response_format:(null==p?void 0:p.type)==="json"?this.supportsStructuredOutputs&&null!=p.schema?{type:"json_schema",json_schema:{schema:p.schema,strict:!0,name:null!=(g=p.name)?g:"response",description:p.description}}:{type:"json_object"}:void 0,stop:c,seed:d,max_completion_tokens:null==(y=null==m?void 0:m.openai)?void 0:y.maxCompletionTokens,store:null==(v=null==m?void 0:m.openai)?void 0:v.store,metadata:null==(b=null==m?void 0:m.openai)?void 0:b.metadata,prediction:null==(_=null==m?void 0:m.openai)?void 0:_.prediction,reasoning_effort:null!=(T=null==(w=null==m?void 0:m.openai)?void 0:w.reasoningEffort)?T:this.settings.reasoningEffort,messages:O};switch(f(this.modelId)?(null!=C.temperature&&(C.temperature=void 0,A.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=C.top_p&&(C.top_p=void 0,A.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),null!=C.frequency_penalty&&(C.frequency_penalty=void 0,A.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),null!=C.presence_penalty&&(C.presence_penalty=void 0,A.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),null!=C.logit_bias&&(C.logit_bias=void 0,A.push({type:"other",message:"logitBias is not supported for reasoning models"})),null!=C.logprobs&&(C.logprobs=void 0,A.push({type:"other",message:"logprobs is not supported for reasoning models"})),null!=C.top_logprobs&&(C.top_logprobs=void 0,A.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),null!=C.max_tokens&&(null==C.max_completion_tokens&&(C.max_completion_tokens=C.max_tokens),C.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&null!=C.temperature&&(C.temperature=void 0,A.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),S){case"regular":{let{tools:t,tool_choice:n,functions:r,function_call:a,toolWarnings:i}=function({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;let a=(null==(r=e.tools)?void 0:r.length)?e.tools:void 0,i=[];if(null==a)return{tools:void 0,tool_choice:void 0,toolWarnings:i};let s=e.toolChoice;if(t){let e=[];for(let t of a)"provider-defined"===t.type?i.push({type:"unsupported-tool",tool:t}):e.push({name:t.name,description:t.description,parameters:t.parameters});if(null==s)return{functions:e,function_call:void 0,toolWarnings:i};switch(s.type){case"auto":case"none":case void 0:return{functions:e,function_call:void 0,toolWarnings:i};case"required":throw new o.A_({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:e,function_call:{name:s.toolName},toolWarnings:i}}}let l=[];for(let e of a)"provider-defined"===e.type?i.push({type:"unsupported-tool",tool:e}):l.push({type:"function",function:{name:e.name,description:e.description,parameters:e.parameters,strict:!!n||void 0}});if(null==s)return{tools:l,tool_choice:void 0,toolWarnings:i};let u=s.type;switch(u){case"auto":case"none":case"required":return{tools:l,tool_choice:u,toolWarnings:i};case"tool":return{tools:l,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:throw new o.A_({functionality:`Unsupported tool choice type: ${u}`})}}({mode:e,useLegacyFunctionCalling:k,structuredOutputs:this.supportsStructuredOutputs});return{args:{...C,tools:t,tool_choice:n,functions:r,function_call:a},warnings:[...A,...i]}}case"object-json":return{args:{...C,response_format:this.supportsStructuredOutputs&&null!=e.schema?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:null!=(E=e.name)?E:"response",description:e.description}}:{type:"json_object"}},warnings:A};case"object-tool":return{args:k?{...C,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...C,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:!!this.supportsStructuredOutputs||void 0}}]},warnings:A};default:throw Error(`Unsupported type: ${S}`)}}async doGenerate(e){var t,n,o,a,l,p,d,g;let{args:f,warnings:h}=this.getArgs(e),{responseHeaders:y,value:v,rawValue:b}=await (0,r.A8)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),e.headers),body:f,failedResponseHandler:u,successfulResponseHandler:(0,r.tc)(m),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...w}=f,T=v.choices[0],E=null==(t=v.usage)?void 0:t.completion_tokens_details,N=null==(n=v.usage)?void 0:n.prompt_tokens_details,x={openai:{}};return(null==E?void 0:E.reasoning_tokens)!=null&&(x.openai.reasoningTokens=null==E?void 0:E.reasoning_tokens),(null==E?void 0:E.accepted_prediction_tokens)!=null&&(x.openai.acceptedPredictionTokens=null==E?void 0:E.accepted_prediction_tokens),(null==E?void 0:E.rejected_prediction_tokens)!=null&&(x.openai.rejectedPredictionTokens=null==E?void 0:E.rejected_prediction_tokens),(null==N?void 0:N.cached_tokens)!=null&&(x.openai.cachedPromptTokens=null==N?void 0:N.cached_tokens),{text:null!=(o=T.message.content)?o:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&T.message.function_call?[{toolCallType:"function",toolCallId:(0,r.Ox)(),toolName:T.message.function_call.name,args:T.message.function_call.arguments}]:null==(a=T.message.tool_calls)?void 0:a.map(e=>{var t;return{toolCallType:"function",toolCallId:null!=(t=e.id)?t:(0,r.Ox)(),toolName:e.function.name,args:e.function.arguments}}),finishReason:s(T.finish_reason),usage:{promptTokens:null!=(p=null==(l=v.usage)?void 0:l.prompt_tokens)?p:NaN,completionTokens:null!=(g=null==(d=v.usage)?void 0:d.completion_tokens)?g:NaN},rawCall:{rawPrompt:_,rawSettings:w},rawResponse:{headers:y,body:b},request:{body:JSON.stringify(f)},response:c(v),warnings:h,logprobs:i(T.logprobs),providerMetadata:x}}async doStream(e){let t;if(this.settings.simulateStreaming){let t=await this.doGenerate(e);return{stream:new ReadableStream({start(e){if(e.enqueue({type:"response-metadata",...t.response}),t.text&&e.enqueue({type:"text-delta",textDelta:t.text}),t.toolCalls)for(let n of t.toolCalls)e.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:n.toolCallId,toolName:n.toolName,argsTextDelta:n.args}),e.enqueue({type:"tool-call",...n});e.enqueue({type:"finish",finishReason:t.finishReason,usage:t.usage,logprobs:t.logprobs,providerMetadata:t.providerMetadata}),e.close()}}),rawCall:t.rawCall,rawResponse:t.rawResponse,warnings:t.warnings}}let{args:n,warnings:a}=this.getArgs(e),l={...n,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},{responseHeaders:p,value:d}=await (0,r.A8)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),e.headers),body:l,failedResponseHandler:u,successfulResponseHandler:(0,r.cP)(g),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:m,...f}=n,h=[],y="unknown",v={promptTokens:void 0,completionTokens:void 0},b=!0,{useLegacyFunctionCalling:_}=this.settings,w={openai:{}};return{stream:d.pipeThrough(new TransformStream({transform(e,n){var a,l,u,p,d,m,g,f,T,E,N,x;if(!e.success){y="error",n.enqueue({type:"error",error:e.error});return}let I=e.value;if("error"in I){y="error",n.enqueue({type:"error",error:I.error});return}if(b&&(b=!1,n.enqueue({type:"response-metadata",...c(I)})),null!=I.usage){let{prompt_tokens:e,completion_tokens:t,prompt_tokens_details:n,completion_tokens_details:r}=I.usage;v={promptTokens:null!=e?e:void 0,completionTokens:null!=t?t:void 0},(null==r?void 0:r.reasoning_tokens)!=null&&(w.openai.reasoningTokens=null==r?void 0:r.reasoning_tokens),(null==r?void 0:r.accepted_prediction_tokens)!=null&&(w.openai.acceptedPredictionTokens=null==r?void 0:r.accepted_prediction_tokens),(null==r?void 0:r.rejected_prediction_tokens)!=null&&(w.openai.rejectedPredictionTokens=null==r?void 0:r.rejected_prediction_tokens),(null==n?void 0:n.cached_tokens)!=null&&(w.openai.cachedPromptTokens=null==n?void 0:n.cached_tokens)}let S=I.choices[0];if((null==S?void 0:S.finish_reason)!=null&&(y=s(S.finish_reason)),(null==S?void 0:S.delta)==null)return;let A=S.delta;null!=A.content&&n.enqueue({type:"text-delta",textDelta:A.content});let k=i(null==S?void 0:S.logprobs);(null==k?void 0:k.length)&&(void 0===t&&(t=[]),t.push(...k));let O=_&&null!=A.function_call?[{type:"function",id:(0,r.Ox)(),function:A.function_call,index:0}]:A.tool_calls;if(null!=O)for(let e of O){let t=e.index;if(null==h[t]){if("function"!==e.type)throw new o.Rt({data:e,message:"Expected 'function' type."});if(null==e.id)throw new o.Rt({data:e,message:"Expected 'id' to be a string."});if((null==(a=e.function)?void 0:a.name)==null)throw new o.Rt({data:e,message:"Expected 'function.name' to be a string."});h[t]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(l=e.function.arguments)?l:""},hasFinished:!1};let i=h[t];(null==(u=i.function)?void 0:u.name)!=null&&(null==(p=i.function)?void 0:p.arguments)!=null&&(i.function.arguments.length>0&&n.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:i.id,toolName:i.function.name,argsTextDelta:i.function.arguments}),(0,r.Gr)(i.function.arguments)&&(n.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(d=i.id)?d:(0,r.Ox)(),toolName:i.function.name,args:i.function.arguments}),i.hasFinished=!0));continue}let i=h[t];!i.hasFinished&&((null==(m=e.function)?void 0:m.arguments)!=null&&(i.function.arguments+=null!=(f=null==(g=e.function)?void 0:g.arguments)?f:""),n.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:i.id,toolName:i.function.name,argsTextDelta:null!=(T=e.function.arguments)?T:""}),(null==(E=i.function)?void 0:E.name)!=null&&(null==(N=i.function)?void 0:N.arguments)!=null&&(0,r.Gr)(i.function.arguments)&&(n.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(x=i.id)?x:(0,r.Ox)(),toolName:i.function.name,args:i.function.arguments}),i.hasFinished=!0))}},flush(e){var n,r;e.enqueue({type:"finish",finishReason:y,logprobs:t,usage:{promptTokens:null!=(n=v.promptTokens)?n:NaN,completionTokens:null!=(r=v.completionTokens)?r:NaN},...null!=w?{providerMetadata:w}:{}})}})),rawCall:{rawPrompt:m,rawSettings:f},rawResponse:{headers:p},request:{body:JSON.stringify(l)},warnings:a}}},d=a.z.object({prompt_tokens:a.z.number().nullish(),completion_tokens:a.z.number().nullish(),prompt_tokens_details:a.z.object({cached_tokens:a.z.number().nullish()}).nullish(),completion_tokens_details:a.z.object({reasoning_tokens:a.z.number().nullish(),accepted_prediction_tokens:a.z.number().nullish(),rejected_prediction_tokens:a.z.number().nullish()}).nullish()}).nullish(),m=a.z.object({id:a.z.string().nullish(),created:a.z.number().nullish(),model:a.z.string().nullish(),choices:a.z.array(a.z.object({message:a.z.object({role:a.z.literal("assistant").nullish(),content:a.z.string().nullish(),function_call:a.z.object({arguments:a.z.string(),name:a.z.string()}).nullish(),tool_calls:a.z.array(a.z.object({id:a.z.string().nullish(),type:a.z.literal("function"),function:a.z.object({name:a.z.string(),arguments:a.z.string()})})).nullish()}),index:a.z.number(),logprobs:a.z.object({content:a.z.array(a.z.object({token:a.z.string(),logprob:a.z.number(),top_logprobs:a.z.array(a.z.object({token:a.z.string(),logprob:a.z.number()}))})).nullable()}).nullish(),finish_reason:a.z.string().nullish()})),usage:d}),g=a.z.union([a.z.object({id:a.z.string().nullish(),created:a.z.number().nullish(),model:a.z.string().nullish(),choices:a.z.array(a.z.object({delta:a.z.object({role:a.z.enum(["assistant"]).nullish(),content:a.z.string().nullish(),function_call:a.z.object({name:a.z.string().optional(),arguments:a.z.string().optional()}).nullish(),tool_calls:a.z.array(a.z.object({index:a.z.number(),id:a.z.string().nullish(),type:a.z.literal("function").nullish(),function:a.z.object({name:a.z.string().nullish(),arguments:a.z.string().nullish()})})).nullish()}).nullish(),logprobs:a.z.object({content:a.z.array(a.z.object({token:a.z.string(),logprob:a.z.number(),top_logprobs:a.z.array(a.z.object({token:a.z.string(),logprob:a.z.number()}))})).nullable()}).nullish(),finish_reason:a.z.string().nullish(),index:a.z.number()})),usage:d}),l]);function f(e){return e.startsWith("o")}var h={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function y(e){return null==e?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([e,t])=>({token:e,logprob:t})):[]}))}var v=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:l,presencePenalty:u,stopSequences:c,responseFormat:p,seed:d}){var m;let g=e.type,f=[];null!=s&&f.push({type:"unsupported-setting",setting:"topK"}),null!=p&&"text"!==p.type&&f.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:h,stopSequences:y}=function({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if("prompt"===t&&1===e.length&&"user"===e[0].role&&1===e[0].content.length&&"text"===e[0].content[0].type)return{prompt:e[0].content[0].text};let a="";for(let{role:t,content:i}of("system"===e[0].role&&(a+=`${e[0].content}

`,e=e.slice(1)),e))switch(t){case"system":throw new o.Mt({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let e=i.map(e=>{switch(e.type){case"text":return e.text;case"image":throw new o.A_({functionality:"images"})}}).join("");a+=`${n}:
${e}

`;break}case"assistant":{let e=i.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new o.A_({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${e}

`;break}case"tool":throw new o.A_({functionality:"tool messages"});default:throw Error(`Unsupported role: ${t}`)}return{prompt:a+=`${r}:
`,stopSequences:[`
${n}:`]}}({prompt:n,inputFormat:t}),v=[...null!=y?y:[],...null!=c?c:[]],b={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:l,presence_penalty:u,seed:d,prompt:h,stop:v.length>0?v:void 0};switch(g){case"regular":if(null==(m=e.tools)?void 0:m.length)throw new o.A_({functionality:"tools"});if(e.toolChoice)throw new o.A_({functionality:"toolChoice"});return{args:b,warnings:f};case"object-json":throw new o.A_({functionality:"object-json mode"});case"object-tool":throw new o.A_({functionality:"object-tool mode"});default:throw Error(`Unsupported type: ${g}`)}}async doGenerate(e){let{args:t,warnings:n}=this.getArgs(e),{responseHeaders:o,value:a,rawValue:i}=await (0,r.A8)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),e.headers),body:t,failedResponseHandler:u,successfulResponseHandler:(0,r.tc)(b),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:l,...p}=t,d=a.choices[0];return{text:d.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:s(d.finish_reason),logprobs:y(d.logprobs),rawCall:{rawPrompt:l,rawSettings:p},rawResponse:{headers:o,body:i},response:c(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){let t;let{args:n,warnings:o}=this.getArgs(e),a={...n,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},{responseHeaders:i,value:l}=await (0,r.A8)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),e.headers),body:a,failedResponseHandler:u,successfulResponseHandler:(0,r.cP)(_),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:p,...d}=n,m="unknown",g={promptTokens:Number.NaN,completionTokens:Number.NaN},f=!0;return{stream:l.pipeThrough(new TransformStream({transform(e,n){if(!e.success){m="error",n.enqueue({type:"error",error:e.error});return}let r=e.value;if("error"in r){m="error",n.enqueue({type:"error",error:r.error});return}f&&(f=!1,n.enqueue({type:"response-metadata",...c(r)})),null!=r.usage&&(g={promptTokens:r.usage.prompt_tokens,completionTokens:r.usage.completion_tokens});let o=r.choices[0];(null==o?void 0:o.finish_reason)!=null&&(m=s(o.finish_reason)),(null==o?void 0:o.text)!=null&&n.enqueue({type:"text-delta",textDelta:o.text});let a=y(null==o?void 0:o.logprobs);(null==a?void 0:a.length)&&(void 0===t&&(t=[]),t.push(...a))},flush(e){e.enqueue({type:"finish",finishReason:m,logprobs:t,usage:g})}})),rawCall:{rawPrompt:p,rawSettings:d},rawResponse:{headers:i},warnings:o,request:{body:JSON.stringify(a)}}}},b=a.z.object({id:a.z.string().nullish(),created:a.z.number().nullish(),model:a.z.string().nullish(),choices:a.z.array(a.z.object({text:a.z.string(),finish_reason:a.z.string(),logprobs:a.z.object({tokens:a.z.array(a.z.string()),token_logprobs:a.z.array(a.z.number()),top_logprobs:a.z.array(a.z.record(a.z.string(),a.z.number())).nullable()}).nullish()})),usage:a.z.object({prompt_tokens:a.z.number(),completion_tokens:a.z.number()})}),_=a.z.union([a.z.object({id:a.z.string().nullish(),created:a.z.number().nullish(),model:a.z.string().nullish(),choices:a.z.array(a.z.object({text:a.z.string(),finish_reason:a.z.string().nullish(),index:a.z.number(),logprobs:a.z.object({tokens:a.z.array(a.z.string()),token_logprobs:a.z.array(a.z.number()),top_logprobs:a.z.array(a.z.record(a.z.string(),a.z.number())).nullable()}).nullish()})),usage:a.z.object({prompt_tokens:a.z.number(),completion_tokens:a.z.number()}).nullish()}),l]),w=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return null!=(e=this.settings.maxEmbeddingsPerCall)?e:2048}get supportsParallelCalls(){var e;return null==(e=this.settings.supportsParallelCalls)||e}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new o.ON({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:a,value:i}=await (0,r.A8)({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:u,successfulResponseHandler:(0,r.tc)(T),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(e=>e.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},T=a.z.object({data:a.z.array(a.z.object({embedding:a.z.array(a.z.number())})),usage:a.z.object({prompt_tokens:a.z.number()}).nullish()}),E={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},N=new Set(["gpt-image-1"]),x=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return null!=(t=null!=(e=this.settings.maxImagesPerCall)?e:E[this.modelId])?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:o,seed:a,providerOptions:i,headers:s,abortSignal:l}){var c,p,d,m;let g=[];null!=o&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=a&&g.push({type:"unsupported-setting",setting:"seed"});let f=null!=(d=null==(p=null==(c=this.config._internal)?void 0:c.currentDate)?void 0:p.call(c))?d:new Date,{value:h,responseHeaders:y}=await (0,r.A8)({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...null!=(m=i.openai)?m:{},...N.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:u,successfulResponseHandler:(0,r.tc)(I),abortSignal:l,fetch:this.config.fetch});return{images:h.data.map(e=>e.b64_json),warnings:g,response:{timestamp:f,modelId:this.modelId,headers:y}}}},I=a.z.object({data:a.z.array(a.z.object({b64_json:a.z.string()}))}),S=a.z.object({include:a.z.array(a.z.string()).nullish(),language:a.z.string().nullish(),prompt:a.z.string().nullish(),temperature:a.z.number().min(0).max(1).nullish().default(0),timestampGranularities:a.z.array(a.z.enum(["word","segment"])).nullish().default(["segment"])}),A={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},k=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({audio:e,mediaType:t,providerOptions:n}){var o,a,i,s,l;let u=(0,r.c1)({provider:"openai",providerOptions:n,schema:S}),c=new FormData,p=new Blob(e instanceof Uint8Array?[e]:[(0,r.MS)(e)]);if(c.append("model",this.modelId),c.append("file",new File([p],"audio",{type:t})),u){let e={include:null!=(o=u.include)?o:void 0,language:null!=(a=u.language)?a:void 0,prompt:null!=(i=u.prompt)?i:void 0,temperature:null!=(s=u.temperature)?s:void 0,timestamp_granularities:null!=(l=u.timestampGranularities)?l:void 0};for(let t in e){let n=e[t];void 0!==n&&c.append(t,String(n))}}return{formData:c,warnings:[]}}async doGenerate(e){var t,n,o,a,i,s;let l=null!=(o=null==(n=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:n.call(t))?o:new Date,{formData:c,warnings:p}=this.getArgs(e),{value:d,responseHeaders:m,rawValue:g}=await (0,r.do)({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),e.headers),formData:c,failedResponseHandler:u,successfulResponseHandler:(0,r.tc)(O),abortSignal:e.abortSignal,fetch:this.config.fetch}),f=null!=d.language&&d.language in A?A[d.language]:void 0;return{text:d.text,segments:null!=(i=null==(a=d.words)?void 0:a.map(e=>({text:e.word,startSecond:e.start,endSecond:e.end})))?i:[],language:f,durationInSeconds:null!=(s=d.duration)?s:void 0,warnings:p,response:{timestamp:l,modelId:this.modelId,headers:m,body:g}}}},O=a.z.object({text:a.z.string(),language:a.z.string().nullish(),duration:a.z.number().nullish(),words:a.z.array(a.z.object({word:a.z.string(),start:a.z.number(),end:a.z.number()})).nullish()});function z({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}var C=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsStructuredOutputs=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:a,topP:i,topK:s,presencePenalty:l,frequencyPenalty:u,seed:c,prompt:p,providerMetadata:d,responseFormat:m}){var g,f,h,y;let v=[],b=(y=this.modelId).startsWith("o")?y.startsWith("o1-mini")||y.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1},_=e.type;null!=s&&v.push({type:"unsupported-setting",setting:"topK"}),null!=c&&v.push({type:"unsupported-setting",setting:"seed"}),null!=l&&v.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=u&&v.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=a&&v.push({type:"unsupported-setting",setting:"stopSequences"});let{messages:w,warnings:T}=function({prompt:e,systemMessageMode:t}){let n=[],a=[];for(let{role:i,content:s}of e)switch(i){case"system":switch(t){case"system":n.push({role:"system",content:s});break;case"developer":n.push({role:"developer",content:s});break;case"remove":a.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${t}`)}break;case"user":n.push({role:"user",content:s.map((e,t)=>{var n,a,i,s;switch(e.type){case"text":return{type:"input_text",text:e.text};case"image":return{type:"input_image",image_url:e.image instanceof URL?e.image.toString():`data:${null!=(n=e.mimeType)?n:"image/jpeg"};base64,${(0,r.k0)(e.image)}`,detail:null==(i=null==(a=e.providerMetadata)?void 0:a.openai)?void 0:i.imageDetail};case"file":if(e.data instanceof URL)throw new o.A_({functionality:"File URLs in user messages"});if("application/pdf"===e.mimeType)return{type:"input_file",filename:null!=(s=e.filename)?s:`part-${t}.pdf`,file_data:`data:application/pdf;base64,${e.data}`};throw new o.A_({functionality:"Only PDF files are supported in user messages"})}})});break;case"assistant":for(let e of s)switch(e.type){case"text":n.push({role:"assistant",content:[{type:"output_text",text:e.text}]});break;case"tool-call":n.push({type:"function_call",call_id:e.toolCallId,name:e.toolName,arguments:JSON.stringify(e.args)})}break;case"tool":for(let e of s)n.push({type:"function_call_output",call_id:e.toolCallId,output:JSON.stringify(e.result)});break;default:throw Error(`Unsupported role: ${i}`)}return{messages:n,warnings:a}}({prompt:p,systemMessageMode:b.systemMessageMode});v.push(...T);let E=(0,r.c1)({provider:"openai",providerOptions:d,schema:V}),N=null==(g=null==E?void 0:E.strictSchemas)||g,x={model:this.modelId,input:w,temperature:n,top_p:i,max_output_tokens:t,...(null==m?void 0:m.type)==="json"&&{text:{format:null!=m.schema?{type:"json_schema",strict:N,name:null!=(f=m.name)?f:"response",description:m.description,schema:m.schema}:{type:"json_object"}}},metadata:null==E?void 0:E.metadata,parallel_tool_calls:null==E?void 0:E.parallelToolCalls,previous_response_id:null==E?void 0:E.previousResponseId,store:null==E?void 0:E.store,user:null==E?void 0:E.user,instructions:null==E?void 0:E.instructions,...b.isReasoningModel&&((null==E?void 0:E.reasoningEffort)!=null||(null==E?void 0:E.reasoningSummary)!=null)&&{reasoning:{...(null==E?void 0:E.reasoningEffort)!=null&&{effort:E.reasoningEffort},...(null==E?void 0:E.reasoningSummary)!=null&&{summary:E.reasoningSummary}}},...b.requiredAutoTruncation&&{truncation:"auto"}};switch(b.isReasoningModel&&(null!=x.temperature&&(x.temperature=void 0,v.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=x.top_p&&(x.top_p=void 0,v.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),_){case"regular":{let{tools:t,tool_choice:n,toolWarnings:r}=function({mode:e,strict:t}){var n;let r=(null==(n=e.tools)?void 0:n.length)?e.tools:void 0,a=[];if(null==r)return{tools:void 0,tool_choice:void 0,toolWarnings:a};let i=e.toolChoice,s=[];for(let e of r)switch(e.type){case"function":s.push({type:"function",name:e.name,description:e.description,parameters:e.parameters,strict:!!t||void 0});break;case"provider-defined":"openai.web_search_preview"===e.id?s.push({type:"web_search_preview",search_context_size:e.args.searchContextSize,user_location:e.args.userLocation}):a.push({type:"unsupported-tool",tool:e});break;default:a.push({type:"unsupported-tool",tool:e})}if(null==i)return{tools:s,tool_choice:void 0,toolWarnings:a};let l=i.type;switch(l){case"auto":case"none":case"required":return{tools:s,tool_choice:l,toolWarnings:a};case"tool":if("web_search_preview"===i.toolName)return{tools:s,tool_choice:{type:"web_search_preview"},toolWarnings:a};return{tools:s,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:throw new o.A_({functionality:`Unsupported tool choice type: ${l}`})}}({mode:e,strict:N});return{args:{...x,tools:t,tool_choice:n},warnings:[...v,...r]}}case"object-json":return{args:{...x,text:{format:null!=e.schema?{type:"json_schema",strict:N,name:null!=(h=e.name)?h:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:v};case"object-tool":return{args:{...x,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:N}]},warnings:v};default:throw Error(`Unsupported type: ${_}`)}}async doGenerate(e){var t,n,o,i,s,l,c;let{args:p,warnings:d}=this.getArgs(e),{responseHeaders:m,value:g,rawValue:f}=await (0,r.A8)({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),e.headers),body:p,failedResponseHandler:u,successfulResponseHandler:(0,r.tc)(a.z.object({id:a.z.string(),created_at:a.z.number(),model:a.z.string(),output:a.z.array(a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("message"),role:a.z.literal("assistant"),content:a.z.array(a.z.object({type:a.z.literal("output_text"),text:a.z.string(),annotations:a.z.array(a.z.object({type:a.z.literal("url_citation"),start_index:a.z.number(),end_index:a.z.number(),url:a.z.string(),title:a.z.string()}))}))}),a.z.object({type:a.z.literal("function_call"),call_id:a.z.string(),name:a.z.string(),arguments:a.z.string()}),a.z.object({type:a.z.literal("web_search_call")}),a.z.object({type:a.z.literal("computer_call")}),a.z.object({type:a.z.literal("reasoning"),summary:a.z.array(a.z.object({type:a.z.literal("summary_text"),text:a.z.string()}))})])),incomplete_details:a.z.object({reason:a.z.string()}).nullable(),usage:R})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=g.output.filter(e=>"message"===e.type).flatMap(e=>e.content).filter(e=>"output_text"===e.type),y=g.output.filter(e=>"function_call"===e.type).map(e=>({toolCallType:"function",toolCallId:e.call_id,toolName:e.name,args:e.arguments})),v=null!=(n=null==(t=g.output.find(e=>"reasoning"===e.type))?void 0:t.summary)?n:null;return{text:h.map(e=>e.text).join("\n"),sources:h.flatMap(e=>e.annotations.map(e=>{var t,n,o;return{sourceType:"url",id:null!=(o=null==(n=(t=this.config).generateId)?void 0:n.call(t))?o:(0,r.Ox)(),url:e.url,title:e.title}})),finishReason:z({finishReason:null==(o=g.incomplete_details)?void 0:o.reason,hasToolCalls:y.length>0}),toolCalls:y.length>0?y:void 0,reasoning:v?v.map(e=>({type:"text",text:e.text})):void 0,usage:{promptTokens:g.usage.input_tokens,completionTokens:g.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:m,body:f},request:{body:JSON.stringify(p)},response:{id:g.id,timestamp:new Date(1e3*g.created_at),modelId:g.model},providerMetadata:{openai:{responseId:g.id,cachedPromptTokens:null!=(s=null==(i=g.usage.input_tokens_details)?void 0:i.cached_tokens)?s:null,reasoningTokens:null!=(c=null==(l=g.usage.output_tokens_details)?void 0:l.reasoning_tokens)?c:null}},warnings:d}}async doStream(e){let{args:t,warnings:n}=this.getArgs(e),{responseHeaders:o,value:a}=await (0,r.A8)({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:u,successfulResponseHandler:(0,r.cP)(B),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this,s="unknown",l=NaN,c=NaN,p=null,d=null,m=null,g={},f=!1;return{stream:a.pipeThrough(new TransformStream({transform(e,t){var n,o,a,u,h,y,v,b;if(!e.success){s="error",t.enqueue({type:"error",error:e.error});return}let _=e.value;if("response.output_item.added"===_.type)"function_call"===_.item.type&&(g[_.output_index]={toolName:_.item.name,toolCallId:_.item.call_id},t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:_.item.call_id,toolName:_.item.name,argsTextDelta:_.item.arguments}));else if("response.function_call_arguments.delta"===_.type){let e=g[_.output_index];null!=e&&t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,argsTextDelta:_.delta})}else"response.created"===_.type?(m=_.response.id,t.enqueue({type:"response-metadata",id:_.response.id,timestamp:new Date(1e3*_.response.created_at),modelId:_.response.model})):"response.output_text.delta"===_.type?t.enqueue({type:"text-delta",textDelta:_.delta}):"response.reasoning_summary_text.delta"===_.type?t.enqueue({type:"reasoning",textDelta:_.delta}):"response.output_item.done"===_.type&&"function_call"===_.item.type?(g[_.output_index]=void 0,f=!0,t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:_.item.call_id,toolName:_.item.name,args:_.item.arguments})):"response.completed"===_.type||"response.incomplete"===_.type?(s=z({finishReason:null==(n=_.response.incomplete_details)?void 0:n.reason,hasToolCalls:f}),l=_.response.usage.input_tokens,c=_.response.usage.output_tokens,p=null!=(a=null==(o=_.response.usage.input_tokens_details)?void 0:o.cached_tokens)?a:p,d=null!=(h=null==(u=_.response.usage.output_tokens_details)?void 0:u.reasoning_tokens)?h:d):"response.output_text.annotation.added"===_.type&&t.enqueue({type:"source",source:{sourceType:"url",id:null!=(b=null==(v=(y=i.config).generateId)?void 0:v.call(y))?b:(0,r.Ox)(),url:_.annotation.url,title:_.annotation.title}})},flush(e){e.enqueue({type:"finish",finishReason:s,usage:{promptTokens:l,completionTokens:c},...(null!=p||null!=d)&&{providerMetadata:{openai:{responseId:m,cachedPromptTokens:p,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:o},request:{body:JSON.stringify(t)},warnings:n}}},R=a.z.object({input_tokens:a.z.number(),input_tokens_details:a.z.object({cached_tokens:a.z.number().nullish()}).nullish(),output_tokens:a.z.number(),output_tokens_details:a.z.object({reasoning_tokens:a.z.number().nullish()}).nullish()}),P=a.z.object({type:a.z.literal("response.output_text.delta"),delta:a.z.string()}),j=a.z.object({type:a.z.enum(["response.completed","response.incomplete"]),response:a.z.object({incomplete_details:a.z.object({reason:a.z.string()}).nullish(),usage:R})}),M=a.z.object({type:a.z.literal("response.created"),response:a.z.object({id:a.z.string(),created_at:a.z.number(),model:a.z.string()})}),D=a.z.object({type:a.z.literal("response.output_item.done"),output_index:a.z.number(),item:a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("message")}),a.z.object({type:a.z.literal("function_call"),id:a.z.string(),call_id:a.z.string(),name:a.z.string(),arguments:a.z.string(),status:a.z.literal("completed")})])}),L=a.z.object({type:a.z.literal("response.function_call_arguments.delta"),item_id:a.z.string(),output_index:a.z.number(),delta:a.z.string()}),U=a.z.object({type:a.z.literal("response.output_item.added"),output_index:a.z.number(),item:a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("message")}),a.z.object({type:a.z.literal("function_call"),id:a.z.string(),call_id:a.z.string(),name:a.z.string(),arguments:a.z.string()})])}),$=a.z.object({type:a.z.literal("response.output_text.annotation.added"),annotation:a.z.object({type:a.z.literal("url_citation"),url:a.z.string(),title:a.z.string()})}),F=a.z.object({type:a.z.literal("response.reasoning_summary_text.delta"),item_id:a.z.string(),output_index:a.z.number(),summary_index:a.z.number(),delta:a.z.string()}),B=a.z.union([P,j,M,D,L,U,$,F,a.z.object({type:a.z.string()}).passthrough()]),V=a.z.object({metadata:a.z.any().nullish(),parallelToolCalls:a.z.boolean().nullish(),previousResponseId:a.z.string().nullish(),store:a.z.boolean().nullish(),user:a.z.string().nullish(),reasoningEffort:a.z.string().nullish(),strictSchemas:a.z.boolean().nullish(),instructions:a.z.string().nullish(),reasoningSummary:a.z.string().nullish()}),G=a.z.object({}),q={webSearchPreview:function({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:G}}},H=a.z.object({instructions:a.z.string().nullish(),speed:a.z.number().min(.25).max(4).default(1).nullish()}),W=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({text:e,voice:t="alloy",outputFormat:n="mp3",speed:o,instructions:a,providerOptions:i}){let s=[],l=(0,r.c1)({provider:"openai",providerOptions:i,schema:H}),u={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:o,instructions:a};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?u.response_format=n:s.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),l){let e={};for(let t in e){let n=e[t];void 0!==n&&(u[t]=n)}}return{requestBody:u,warnings:s}}async doGenerate(e){var t,n,o;let a=null!=(o=null==(n=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:n.call(t))?o:new Date,{requestBody:i,warnings:s}=this.getArgs(e),{value:l,responseHeaders:c,rawValue:p}=await (0,r.A8)({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:(0,r.NF)(this.config.headers(),e.headers),body:i,failedResponseHandler:u,successfulResponseHandler:(0,r.XH)(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:l,warnings:s,request:{body:JSON.stringify(i)},response:{timestamp:a,modelId:this.modelId,headers:c,body:p}}}};function Z(e={}){var t,n,o;let a=null!=(t=(0,r.QT)(e.baseURL))?t:"https://api.openai.com/v1",i=null!=(n=e.compatibility)?n:"compatible",s=null!=(o=e.name)?o:"openai",l=()=>({Authorization:`Bearer ${(0,r.pd)({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(t,n={})=>new p(t,n,{provider:`${s}.chat`,url:({path:e})=>`${a}${e}`,headers:l,compatibility:i,fetch:e.fetch}),c=(t,n={})=>new v(t,n,{provider:`${s}.completion`,url:({path:e})=>`${a}${e}`,headers:l,compatibility:i,fetch:e.fetch}),d=(t,n={})=>new w(t,n,{provider:`${s}.embedding`,url:({path:e})=>`${a}${e}`,headers:l,fetch:e.fetch}),m=(t,n={})=>new x(t,n,{provider:`${s}.image`,url:({path:e})=>`${a}${e}`,headers:l,fetch:e.fetch}),g=t=>new k(t,{provider:`${s}.transcription`,url:({path:e})=>`${a}${e}`,headers:l,fetch:e.fetch}),f=t=>new W(t,{provider:`${s}.speech`,url:({path:e})=>`${a}${e}`,headers:l,fetch:e.fetch}),h=(e,t)=>{if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return"gpt-3.5-turbo-instruct"===e?c(e,t):u(e,t)},y=function(e,t){return h(e,t)};return y.languageModel=h,y.chat=u,y.completion=c,y.responses=t=>new C(t,{provider:`${s}.responses`,url:({path:e})=>`${a}${e}`,headers:l,fetch:e.fetch}),y.embedding=d,y.textEmbedding=d,y.textEmbeddingModel=d,y.image=m,y.imageModel=m,y.transcription=g,y.transcriptionModel=g,y.speech=f,y.speechModel=f,y.tools=q,y}Z({compatibility:"strict"})},989:function(e,t,n){"use strict";n.d(t,{NF:function(){return s},RV:function(){return l},MS:function(){return C},k0:function(){return R},XH:function(){return k},cP:function(){return S},bF:function(){return p},Sq:function(){return I},tc:function(){return A},gw:function(){return u},Ox:function(){return d},e$:function(){return m},D_:function(){return g},Gr:function(){return b},pd:function(){return f},c1:function(){return _},do:function(){return E},A8:function(){return T},DB:function(){return x},NX:function(){return v},pW:function(){return y},pY:function(){return h},QT:function(){return P}});var r=n(5045);let o=(e,t=21)=>(n=t)=>{let r="",o=0|n;for(;o--;)r+=e[Math.random()*e.length|0];return r};var a=n(58833),i=n(83454);function s(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function l(e){return new ReadableStream({async pull(t){try{let{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(e){t.error(e)}},cancel(){}})}async function u(e){return null==e?Promise.resolve():new Promise(t=>setTimeout(t,e))}function c(e){let t={};return e.headers.forEach((e,n)=>{t[n]=e}),t}var p=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{let i=o(n,t);if(null==e)return i;if(n.includes(a))throw new r.RU({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${n}".`});return t=>`${e}${a}${i(t)}`},d=p();function m(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}function g(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}function f({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:o}){if("string"==typeof e)return e;if(null!=e)throw new r.tZ({message:`${o} API key must be a string.`});if(void 0===i)throw new r.tZ({message:`${o} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(null==(e=i.env[t]))throw new r.tZ({message:`${o} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new r.tZ({message:`${o} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var h=Symbol.for("vercel.ai.validator");function y({value:e,schema:t}){let n="object"==typeof t&&null!==t&&h in t&&!0===t[h]&&"validate"in t?t:{[h]:!0,validate:e=>{let n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}};try{if(null==n.validate)return{success:!0,value:e};let t=n.validate(e);if(t.success)return t;return{success:!1,error:r.Gz.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:r.Gz.wrap({value:e,cause:t})}}}function v({text:e,schema:t}){try{let n=a.parse(e);if(null==t)return{success:!0,value:n,rawValue:n};let r=y({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(t){return{success:!1,error:r.xU.isInstance(t)?t:new r.xU({text:e,cause:t})}}}function b(e){try{return a.parse(e),!0}catch(e){return!1}}function _({provider:e,providerOptions:t,schema:n}){if((null==t?void 0:t[e])==null)return;let o=y({value:t[e],schema:n});if(!o.success)throw new r.RU({argument:"providerOptions",message:`invalid ${e} provider options`,cause:o.error});return o.value}var w=()=>globalThis.fetch,T=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:o,abortSignal:a,fetch:i})=>N({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:o,abortSignal:a,fetch:i}),E=async({url:e,headers:t,formData:n,failedResponseHandler:r,successfulResponseHandler:o,abortSignal:a,fetch:i})=>N({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:r,successfulResponseHandler:o,abortSignal:a,fetch:i}),N=async({url:e,headers:t={},body:n,successfulResponseHandler:o,failedResponseHandler:a,abortSignal:i,fetch:s=w()})=>{try{let l=await s(e,{method:"POST",headers:Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t)),body:n.content,signal:i}),u=c(l);if(!l.ok){let t;try{t=await a({response:l,url:e,requestBodyValues:n.values})}catch(t){if(g(t)||r.w.isInstance(t))throw t;throw new r.w({message:"Failed to process error response",cause:t,statusCode:l.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw t.value}try{return await o({response:l,url:e,requestBodyValues:n.values})}catch(t){if(t instanceof Error&&(g(t)||r.w.isInstance(t)))throw t;throw new r.w({message:"Failed to process successful response",cause:t,statusCode:l.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(t){if(g(t))throw t;if(t instanceof TypeError&&"fetch failed"===t.message){let o=t.cause;if(null!=o)throw new r.w({message:`Cannot connect to API: ${o.message}`,cause:o,url:e,requestBodyValues:n.values,isRetryable:!0})}throw t}};async function x(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var I=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:o,url:i,requestBodyValues:s})=>{let l=await o.text(),u=c(o);if(""===l.trim())return{responseHeaders:u,value:new r.w({message:o.statusText,url:i,requestBodyValues:s,statusCode:o.status,responseHeaders:u,responseBody:l,isRetryable:null==n?void 0:n(o)})};try{let c=function({text:e,schema:t}){try{let n=a.parse(e);if(null==t)return n;return function({value:e,schema:t}){let n=y({value:e,schema:t});if(!n.success)throw r.Gz.wrap({value:e,cause:n.error});return n.value}({value:n,schema:t})}catch(t){if(r.xU.isInstance(t)||r.Gz.isInstance(t))throw t;throw new r.xU({text:e,cause:t})}}({text:l,schema:e});return{responseHeaders:u,value:new r.w({message:t(c),url:i,requestBodyValues:s,statusCode:o.status,responseHeaders:u,responseBody:l,data:c,isRetryable:null==n?void 0:n(o,c)})}}catch(e){return{responseHeaders:u,value:new r.w({message:o.statusText,url:i,requestBodyValues:s,statusCode:o.status,responseHeaders:u,responseBody:l,isRetryable:null==n?void 0:n(o)})}}},S=e=>async({response:t})=>{let n=c(t);if(null==t.body)throw new r.g8({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(function(){let e,t,n,r="",o=[];function a(e,t){if(""===e){i(t);return}if(e.startsWith(":"))return;let n=e.indexOf(":");if(-1===n){s(e,"");return}let r=e.slice(0,n),o=n+1;s(r,o<e.length&&" "===e[o]?e.slice(o+1):e.slice(o))}function i(r){o.length>0&&(r.enqueue({event:e,data:o.join("\n"),id:t,retry:n}),o=[],e=void 0,n=void 0)}function s(r,a){switch(r){case"event":e=a;break;case"data":o.push(a);break;case"id":t=a;break;case"retry":let i=parseInt(a,10);isNaN(i)||(n=i)}}return new TransformStream({transform(e,t){let{lines:n,incompleteLine:o}=function(e,t){let n=[],r=e;for(let e=0;e<t.length;){let o=t[e++];"\n"===o?(n.push(r),r=""):"\r"===o?(n.push(r),r="","\n"===t[e]&&e++):r+=o}return{lines:n,incompleteLine:r}}(r,e);r=o;for(let e=0;e<n.length;e++)a(n[e],t)},flush(e){a(r,e),i(e)}})}()).pipeThrough(new TransformStream({transform({data:t},n){"[DONE]"!==t&&n.enqueue(v({text:t,schema:e}))}}))}},A=e=>async({response:t,url:n,requestBodyValues:o})=>{let a=await t.text(),i=v({text:a,schema:e}),s=c(t);if(!i.success)throw new r.w({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:o});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},k=()=>async({response:e,url:t,requestBodyValues:n})=>{let o=c(e);if(!e.body)throw new r.w({message:"Response body is empty",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:o,responseBody:void 0});try{let t=await e.arrayBuffer();return{responseHeaders:o,value:new Uint8Array(t)}}catch(a){throw new r.w({message:"Failed to read response as array buffer",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:o,responseBody:void 0,cause:a})}},{btoa:O,atob:z}=globalThis;function C(e){let t=z(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}function R(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return O(t)}function P(e){return null==e?void 0:e.replace(/\/$/,"")}},5045:function(e,t,n){"use strict";n.d(t,{AX:function(){return v},A_:function(){return ec},Gz:function(){return ei},JJ:function(){return Y},Mt:function(){return j},ON:function(){return et},RU:function(){return z},Rt:function(){return U},e$:function(){return S},g8:function(){return I},tZ:function(){return W},w:function(){return T},xU:function(){return V}});var r,o,a,i,s,l,u,c,p,d,m,g,f="vercel.ai.error",h=Symbol.for(f),y=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[r]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,f)}static hasMarker(e,t){let n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};r=h;var v=y,b="AI_APICallError",_=`vercel.ai.error.${b}`,w=Symbol.for(_),T=class extends v{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:s,isRetryable:l=null!=r&&(408===r||409===r||429===r||r>=500),data:u}){super({name:b,message:e,cause:s}),this[o]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=l,this.data=u}static isInstance(e){return v.hasMarker(e,_)}};o=w;var E="AI_EmptyResponseBodyError",N=`vercel.ai.error.${E}`,x=Symbol.for(N),I=class extends v{constructor({message:e="Empty response body"}={}){super({name:E,message:e}),this[a]=!0}static isInstance(e){return v.hasMarker(e,N)}};function S(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}a=x;var A="AI_InvalidArgumentError",k=`vercel.ai.error.${A}`,O=Symbol.for(k),z=class extends v{constructor({message:e,cause:t,argument:n}){super({name:A,message:e,cause:t}),this[i]=!0,this.argument=n}static isInstance(e){return v.hasMarker(e,k)}};i=O;var C="AI_InvalidPromptError",R=`vercel.ai.error.${C}`,P=Symbol.for(R),j=class extends v{constructor({prompt:e,message:t,cause:n}){super({name:C,message:`Invalid prompt: ${t}`,cause:n}),this[s]=!0,this.prompt=e}static isInstance(e){return v.hasMarker(e,R)}};s=P;var M="AI_InvalidResponseDataError",D=`vercel.ai.error.${M}`,L=Symbol.for(D),U=class extends v{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:M,message:t}),this[l]=!0,this.data=e}static isInstance(e){return v.hasMarker(e,D)}};l=L;var $="AI_JSONParseError",F=`vercel.ai.error.${$}`,B=Symbol.for(F),V=class extends v{constructor({text:e,cause:t}){super({name:$,message:`JSON parsing failed: Text: ${e}.
Error message: ${S(t)}`,cause:t}),this[u]=!0,this.text=e}static isInstance(e){return v.hasMarker(e,F)}};u=B;var G="AI_LoadAPIKeyError",q=`vercel.ai.error.${G}`,H=Symbol.for(q),W=class extends v{constructor({message:e}){super({name:G,message:e}),this[c]=!0}static isInstance(e){return v.hasMarker(e,q)}};c=H,Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError");var Z="AI_NoSuchModelError",K=`vercel.ai.error.${Z}`,J=Symbol.for(K),Y=class extends v{constructor({errorName:e=Z,modelId:t,modelType:n,message:r=`No such ${n}: ${t}`}){super({name:e,message:r}),this[p]=!0,this.modelId=t,this.modelType=n}static isInstance(e){return v.hasMarker(e,K)}};p=J;var X="AI_TooManyEmbeddingValuesForCallError",Q=`vercel.ai.error.${X}`,ee=Symbol.for(Q),et=class extends v{constructor(e){super({name:X,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[d]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return v.hasMarker(e,Q)}};d=ee;var en="AI_TypeValidationError",er=`vercel.ai.error.${en}`,eo=Symbol.for(er),ea=class e extends v{constructor({value:e,cause:t}){super({name:en,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${S(t)}`,cause:t}),this[m]=!0,this.value=e}static isInstance(e){return v.hasMarker(e,er)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}};m=eo;var ei=ea,es="AI_UnsupportedFunctionalityError",el=`vercel.ai.error.${es}`,eu=Symbol.for(el),ec=class extends v{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:es,message:t}),this[g]=!0,this.functionality=e}static isInstance(e){return v.hasMarker(e,el)}};g=eu},65339:function(e,t,n){"use strict";let r;n.d(t,{C3:function(){return q},Xy:function(){return V},gP:function(){return F}});var o=n(989);let a=Symbol("Let zodToJsonSchema decide on which parser to use"),i={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},s=e=>"string"==typeof e?{...i,name:e}:{...i,...e},l=e=>{let t=s(e),n=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};var u=n(1604);let c=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function p(e){if("openAi"!==e.target)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?c(t,e.currentPath):t.join("/")}}function d(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function m(e,t,n,r,o){e[t]=n,d(e,t,r,o)}function g(e,t){return C(e.type._def,t)}let f=(e,t)=>C(e.innerType._def,t),h=(e,t)=>{let n={type:"integer",format:"unix-time"};if("openApi3"===t.target)return n;for(let r of e.checks)switch(r.kind){case"min":m(n,"minimum",r.value,r.message,t);break;case"max":m(n,"maximum",r.value,r.message,t)}return n},y=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,v={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===r&&(r=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),r),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function b(e,t){let n={type:"string"};if(e.checks)for(let r of e.checks)switch(r.kind){case"min":m(n,"minLength","number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":m(n,"maxLength","number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":T(n,"email",r.message,t);break;case"format:idn-email":T(n,"idn-email",r.message,t);break;case"pattern:zod":E(n,v.email,r.message,t)}break;case"url":T(n,"uri",r.message,t);break;case"uuid":T(n,"uuid",r.message,t);break;case"regex":E(n,r.regex,r.message,t);break;case"cuid":E(n,v.cuid,r.message,t);break;case"cuid2":E(n,v.cuid2,r.message,t);break;case"startsWith":E(n,RegExp(`^${_(r.value,t)}`),r.message,t);break;case"endsWith":E(n,RegExp(`${_(r.value,t)}$`),r.message,t);break;case"datetime":T(n,"date-time",r.message,t);break;case"date":T(n,"date",r.message,t);break;case"time":T(n,"time",r.message,t);break;case"duration":T(n,"duration",r.message,t);break;case"length":m(n,"minLength","number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value,r.message,t),m(n,"maxLength","number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":E(n,RegExp(_(r.value,t)),r.message,t);break;case"ip":"v6"!==r.version&&T(n,"ipv4",r.message,t),"v4"!==r.version&&T(n,"ipv6",r.message,t);break;case"base64url":E(n,v.base64url,r.message,t);break;case"jwt":E(n,v.jwt,r.message,t);break;case"cidr":"v6"!==r.version&&E(n,v.ipv4Cidr,r.message,t),"v4"!==r.version&&E(n,v.ipv6Cidr,r.message,t);break;case"emoji":E(n,v.emoji(),r.message,t);break;case"ulid":E(n,v.ulid,r.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":T(n,"binary",r.message,t);break;case"contentEncoding:base64":m(n,"contentEncoding","base64",r.message,t);break;case"pattern:zod":E(n,v.base64,r.message,t)}break;case"nanoid":E(n,v.nanoid,r.message,t)}return n}function _(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let n=0;n<e.length;n++)w.has(e[n])||(t+="\\"),t+=e[n];return t}(e):e}let w=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function T(e,t,n,r){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):m(e,"format",t,n,r)}function E(e,t,n,r){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:N(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):m(e,"pattern",N(t,r),n,r)}function N(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source,o="",a=!1,i=!1,s=!1;for(let e=0;e<r.length;e++){if(a){o+=r[e],a=!1;continue}if(n.i){if(i){if(r[e].match(/[a-z]/)){s?(o+=r[e]+`${r[e-2]}-${r[e]}`.toUpperCase(),s=!1):"-"===r[e+1]&&r[e+2]?.match(/[a-z]/)?(o+=r[e],s=!0):o+=`${r[e]}${r[e].toUpperCase()}`;continue}}else if(r[e].match(/[a-z]/)){o+=`[${r[e]}${r[e].toUpperCase()}]`;continue}}if(n.m){if("^"===r[e]){o+=`(^|(?<=[\r
]))`;continue}if("$"===r[e]){o+=`($|(?=[\r
]))`;continue}}if(n.s&&"."===r[e]){o+=i?`${r[e]}\r
`:`[${r[e]}\r
]`;continue}o+=r[e],"\\"===r[e]?a=!0:i&&"]"===r[e]?i=!1:i||"["!==r[e]||(i=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function x(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===u.pA.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((n,r)=>({...n,[r]:C(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",r]})??p(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let n={type:"object",additionalProperties:C(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return n;if(e.keyType?._def.typeName===u.pA.ZodString&&e.keyType._def.checks?.length){let{type:r,...o}=b(e.keyType._def,t);return{...n,propertyNames:o}}if(e.keyType?._def.typeName===u.pA.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===u.pA.ZodBranded&&e.keyType._def.type._def.typeName===u.pA.ZodString&&e.keyType._def.type._def.checks?.length){let{type:r,...o}=g(e.keyType._def,t);return{...n,propertyNames:o}}return n}let I={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},S=(e,t)=>{let n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,n)=>C(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return n.length?{anyOf:n}:void 0},A=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return C(e.innerType._def,t);let n=C(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:p(t)},n]}:p(t)},k=(e,t)=>{if("input"===t.pipeStrategy)return C(e.in._def,t);if("output"===t.pipeStrategy)return C(e.out._def,t);let n=C(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=C(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(e=>void 0!==e)}},O=(e,t)=>C(e.innerType._def,t),z=(e,t,n)=>{switch(t){case u.pA.ZodString:return b(e,n);case u.pA.ZodNumber:return function(e,t){let n={type:"number"};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case"int":n.type="integer",d(n,"type",r.message,t);break;case"min":"jsonSchema7"===t.target?r.inclusive?m(n,"minimum",r.value,r.message,t):m(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),m(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?m(n,"maximum",r.value,r.message,t):m(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),m(n,"maximum",r.value,r.message,t));break;case"multipleOf":m(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case u.pA.ZodObject:return function(e,t){let n="openAi"===t.target,r={type:"object",properties:{}},o=[],a=e.shape();for(let e in a){let i=a[e];if(void 0===i||void 0===i._def)continue;let s=function(e){try{return e.isOptional()}catch{return!0}}(i);s&&n&&("ZodOptional"===i._def.typeName&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),s=!1);let l=C(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(r.properties[e]=l,s||o.push(e))}o.length&&(r.required=o);let i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return C(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(r.additionalProperties=i),r}(e,n);case u.pA.ZodBigInt:return function(e,t){let n={type:"integer",format:"int64"};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case"min":"jsonSchema7"===t.target?r.inclusive?m(n,"minimum",r.value,r.message,t):m(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),m(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?m(n,"maximum",r.value,r.message,t):m(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),m(n,"maximum",r.value,r.message,t));break;case"multipleOf":m(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case u.pA.ZodBoolean:return{type:"boolean"};case u.pA.ZodDate:return function e(t,n,r){let o=r??n.dateStrategy;if(Array.isArray(o))return{anyOf:o.map((r,o)=>e(t,n,r))};switch(o){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return h(t,n)}}(e,n);case u.pA.ZodUndefined:return{not:p(n)};case u.pA.ZodNull:return"openApi3"===n.target?{enum:["null"],nullable:!0}:{type:"null"};case u.pA.ZodArray:return function(e,t){let n={type:"array"};return e.type?._def&&e.type?._def?.typeName!==u.pA.ZodAny&&(n.items=C(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&m(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&m(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(m(n,"minItems",e.exactLength.value,e.exactLength.message,t),m(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}(e,n);case u.pA.ZodUnion:case u.pA.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return S(e,t);let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in I&&(!e._def.checks||!e._def.checks.length))){let e=n.reduce((e,t)=>{let n=I[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}if(n.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=n.reduce((e,t)=>{let n=typeof t._def.value;switch(n){case"string":case"number":case"boolean":return[...e,n];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===n.length){let t=e.filter((e,t,n)=>n.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return S(e,t)}(e,n);case u.pA.ZodIntersection:return function(e,t){let n=[C(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),C(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),r="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,o=[];return n.forEach(e=>{if(y(e))o.push(...e.allOf),void 0===e.unevaluatedProperties&&(r=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:n,...r}=e;t=r}else r=void 0;o.push(t)}}),o.length?{allOf:o,...r}:void 0}(e,n);case u.pA.ZodTuple:return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,t)=>C(e._def,{...n,currentPath:[...n.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:C(e.rest._def,{...n,currentPath:[...n.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,t)=>C(e._def,{...n,currentPath:[...n.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])};case u.pA.ZodRecord:return x(e,n);case u.pA.ZodLiteral:return function(e,t){let n=typeof e.value;return"bigint"!==n&&"number"!==n&&"boolean"!==n&&"string"!==n?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===n?"integer":n,enum:[e.value]}:{type:"bigint"===n?"integer":n,const:e.value}}(e,n);case u.pA.ZodEnum:return{type:"string",enum:Array.from(e.values)};case u.pA.ZodNativeEnum:return function(e){let t=e.values,n=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),r=Array.from(new Set(n.map(e=>typeof e)));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:n}}(e);case u.pA.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:I[e.innerType._def.typeName],nullable:!0}:{type:[I[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let n=C(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let n=C(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}(e,n);case u.pA.ZodOptional:return A(e,n);case u.pA.ZodMap:return"record"===n.mapStrategy?x(e,n):{type:"array",maxItems:125,items:{type:"array",items:[C(e.keyType._def,{...n,currentPath:[...n.currentPath,"items","items","0"]})||p(n),C(e.valueType._def,{...n,currentPath:[...n.currentPath,"items","items","1"]})||p(n)],minItems:2,maxItems:2}};case u.pA.ZodSet:return function(e,t){let n={type:"array",uniqueItems:!0,items:C(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&m(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&m(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}(e,n);case u.pA.ZodLazy:return()=>e.getter()._def;case u.pA.ZodPromise:return C(e.type._def,n);case u.pA.ZodNaN:case u.pA.ZodNever:return"openAi"===n.target?void 0:{not:p({...n,currentPath:[...n.currentPath,"not"]})};case u.pA.ZodEffects:return"input"===n.effectStrategy?C(e.schema._def,n):p(n);case u.pA.ZodAny:case u.pA.ZodUnknown:return p(n);case u.pA.ZodDefault:return{...C(e.innerType._def,n),default:e.defaultValue()};case u.pA.ZodBranded:return g(e,n);case u.pA.ZodReadonly:return O(e,n);case u.pA.ZodCatch:return f(e,n);case u.pA.ZodPipeline:return k(e,n);case u.pA.ZodFunction:case u.pA.ZodVoid:case u.pA.ZodSymbol:default:return}};function C(e,t,n=!1){let r=t.seen.get(e);if(t.override){let o=t.override?.(e,t,r,n);if(o!==a)return o}if(r&&!n){let e=R(r,t);if(void 0!==e)return e}let o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);let i=z(e,e.typeName,t),s="function"==typeof i?C(i(),t):i;if(s&&P(e,t,s),t.postProcess){let n=t.postProcess(s,e,t);return o.jsonSchema=s,n}return o.jsonSchema=s,s}let R=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:c(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,n)=>t.currentPath[n]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),p(t);return"seen"===t.$refStrategy?p(t):void 0}},P=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n);var j=(e,t)=>{let n=l(t),r="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>({...e,[t]:C(r._def,{...n,currentPath:[...n.basePath,n.definitionPath,t]},!0)??p(n)}),{}):void 0,o="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,a=C(e._def,void 0===o?n:{...n,currentPath:[...n.basePath,n.definitionPath,o]},!1)??p(n),i="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==i&&(a.title=i),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===n.$refStrategy?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));let s=void 0===o?r?{...a,[n.definitionPath]:r}:a:{$ref:[..."relative"===n.$refStrategy?[]:n.basePath,n.definitionPath,o].join("/"),[n.definitionPath]:{...r,[o]:a}};return"jsonSchema7"===n.target?s.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===n.target||"openAi"===n.target)&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===n.target&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s},M={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},D={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},L={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},U={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},$={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}};function F(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=(0,o.NX)({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=(0,o.NX)({text:function(e){let t=["ROOT"],n=-1,r=null;function o(e,o,a){switch(e){case'"':n=o,t.pop(),t.push(a),t.push("INSIDE_STRING");break;case"f":case"t":case"n":n=o,r=o,t.pop(),t.push(a),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=o,t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"{":n=o,t.pop(),t.push(a),t.push("INSIDE_OBJECT_START");break;case"[":n=o,t.pop(),t.push(a),t.push("INSIDE_ARRAY_START")}}function a(e,r){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":n=r,t.pop()}}function i(e,r){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=r,t.pop()}}for(let s=0;s<e.length;s++){let l=e[s];switch(t[t.length-1]){case"ROOT":o(l,s,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":n=s,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":o(l,s,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":a(l,s);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),n=s;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:n=s}break;case"INSIDE_ARRAY_START":"]"===l?(n=s,t.pop()):(n=s,o(l,s,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=s,t.pop();break;default:n=s}break;case"INSIDE_ARRAY_AFTER_COMMA":o(l,s,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),n=s;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=s;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,s),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&a(l,s);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&a(l,s);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,s);break;default:t.pop()}break;case"INSIDE_LITERAL":{let o=e.substring(r,s+1);"false".startsWith(o)||"true".startsWith(o)||"null".startsWith(o)?n=s:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?a(l,s):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,s))}}}let s=e.slice(0,n+1);for(let n=t.length-1;n>=0;n--)switch(t[n]){case"INSIDE_STRING":s+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":s+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":s+="]";break;case"INSIDE_LITERAL":{let t=e.substring(r,e.length);"true".startsWith(t)?s+="true".slice(t.length):"false".startsWith(t)?s+="false".slice(t.length):"null".startsWith(t)&&(s+="null".slice(t.length))}}return s}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}M.code,D.code,L.code,U.code,$.code,M.name,M.code,D.name,D.code,L.name,L.code,U.name,U.code,$.name,$.code,[M,D,L,U,$].map(e=>e.code);var B=[{code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},{code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},{code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},{code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},{code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},{code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},{code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},{code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},{code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},{code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},{code:"f",name:"start_step",parse:e=>{if(null==e||"object"!=typeof e||!("messageId"in e)||"string"!=typeof e.messageId)throw Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},{code:"g",name:"reasoning",parse:e=>{if("string"!=typeof e)throw Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},{code:"h",name:"source",parse:e=>{if(null==e||"object"!=typeof e)throw Error('"source" parts expect a Source object.');return{type:"source",value:e}}},{code:"i",name:"redacted_reasoning",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data)throw Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},{code:"j",name:"reasoning_signature",parse:e=>{if(null==e||"object"!=typeof e||!("signature"in e)||"string"!=typeof e.signature)throw Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},{code:"k",name:"file",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data||!("mimeType"in e)||"string"!=typeof e.mimeType)throw Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}}];function V(e,t){let n=B.find(t=>t.name===e);if(!n)throw Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}Object.fromEntries(B.map(e=>[e.code,e])),Object.fromEntries(B.map(e=>[e.name,e.code])),B.map(e=>e.code);var G=Symbol.for("vercel.ai.schema");function q(e){var t,n;return"object"==typeof e&&null!==e&&G in e&&!0===e[G]&&"jsonSchema"in e&&"validate"in e?e:function(e,{validate:t}={}){return{[G]:!0,_type:void 0,[o.pY]:!0,jsonSchema:e,validate:t}}(j(e,{$refStrategy:null!=(n=null==t?void 0:t.useReferences)&&n?"root":"none",target:"jsonSchema7"}),{validate:t=>{let n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}},89056:function(e,t,n){"use strict";let r;n.d(t,{x8:function(){return eQ},VY:function(){return eJ},dk:function(){return eX},aV:function(){return eK},h_:function(){return eZ},fC:function(){return eH},Dx:function(){return eY},xz:function(){return eW}});var o,a=n(67294),i=n.t(a,2);function s(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}function l(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function u(...e){return t=>{let n=!1,r=e.map(e=>{let r=l(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():l(e[t],null)}}}}function c(...e){return a.useCallback(u(...e),e)}var p=n(85893),d=globalThis?.document?a.useLayoutEffect:()=>{},m=i[" useId ".trim().toString()]||(()=>void 0),g=0;function f(e){let[t,n]=a.useState(m());return d(()=>{e||n(e=>e??String(g++))},[e]),e||(t?`radix-${t}`:"")}var h=i[" useInsertionEffect ".trim().toString()]||d;Symbol("RADIX:SYNC_STATE");var y=n(73935);function v(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:n,...r}=e;if(a.isValidElement(n)){let e,o;let i=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref,s=function(e,t){let n={...t};for(let r in t){let o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...e)=>{let t=a(...e);return o(...e),t}:o&&(n[r]=o):"style"===r?n[r]={...o,...a}:"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==a.Fragment&&(s.ref=t?u(t,i):i),a.cloneElement(n,s)}return a.Children.count(n)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=a.forwardRef((e,n)=>{let{children:r,...o}=e,i=a.Children.toArray(r),s=i.find(_);if(s){let e=s.props.children,r=i.map(t=>t!==s?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,p.jsx)(t,{...o,ref:n,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,p.jsx)(t,{...o,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}var b=Symbol("radix.slottable");function _(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===b}var w=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let n=v(`Primitive.${t}`),r=a.forwardRef((e,r)=>{let{asChild:o,...a}=e,i=o?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,p.jsx)(i,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function T(e){let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...e)=>t.current?.(...e),[])}var E="dismissableLayer.update",N=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),x=a.forwardRef((e,t)=>{let{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:u,onDismiss:d,...m}=e,g=a.useContext(N),[f,h]=a.useState(null),y=f?.ownerDocument??globalThis?.document,[,v]=a.useState({}),b=c(t,e=>h(e)),_=Array.from(g.layers),[x]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(x),k=f?_.indexOf(f):-1,O=g.layersWithOutsidePointerEventsDisabled.size>0,z=k>=A,C=function(e,t=globalThis?.document){let n=T(e),r=a.useRef(!1),o=a.useRef(()=>{});return a.useEffect(()=>{let e=e=>{if(e.target&&!r.current){let r=function(){S("dismissableLayer.pointerDownOutside",n,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",o.current),o.current=r,t.addEventListener("click",o.current,{once:!0})):r()}else t.removeEventListener("click",o.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{let t=e.target,n=[...g.branches].some(e=>e.contains(t));!z||n||(i?.(e),u?.(e),e.defaultPrevented||d?.())},y),R=function(e,t=globalThis?.document){let n=T(e),r=a.useRef(!1);return a.useEffect(()=>{let e=e=>{e.target&&!r.current&&S("dismissableLayer.focusOutside",n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{let t=e.target;[...g.branches].some(e=>e.contains(t))||(l?.(e),u?.(e),e.defaultPrevented||d?.())},y);return!function(e,t=globalThis?.document){let n=T(e);a.useEffect(()=>{let e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{k!==g.layers.size-1||(r?.(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},y),a.useEffect(()=>{if(f)return n&&(0===g.layersWithOutsidePointerEventsDisabled.size&&(o=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(f)),g.layers.add(f),I(),()=>{n&&1===g.layersWithOutsidePointerEventsDisabled.size&&(y.body.style.pointerEvents=o)}},[f,y,n,g]),a.useEffect(()=>()=>{f&&(g.layers.delete(f),g.layersWithOutsidePointerEventsDisabled.delete(f),I())},[f,g]),a.useEffect(()=>{let e=()=>v({});return document.addEventListener(E,e),()=>document.removeEventListener(E,e)},[]),(0,p.jsx)(w.div,{...m,ref:b,style:{pointerEvents:O?z?"auto":"none":void 0,...e.style},onFocusCapture:s(e.onFocusCapture,R.onFocusCapture),onBlurCapture:s(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:s(e.onPointerDownCapture,C.onPointerDownCapture)})});function I(){let e=new CustomEvent(E);document.dispatchEvent(e)}function S(e,t,n,{discrete:r}){let o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});(t&&o.addEventListener(e,t,{once:!0}),r)?o&&y.flushSync(()=>o.dispatchEvent(a)):o.dispatchEvent(a)}x.displayName="DismissableLayer",a.forwardRef((e,t)=>{let n=a.useContext(N),r=a.useRef(null),o=c(t,r);return a.useEffect(()=>{let e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),(0,p.jsx)(w.div,{...e,ref:o})}).displayName="DismissableLayerBranch";var A="focusScope.autoFocusOnMount",k="focusScope.autoFocusOnUnmount",O={bubbles:!1,cancelable:!0},z=a.forwardRef((e,t)=>{let{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[l,u]=a.useState(null),d=T(o),m=T(i),g=a.useRef(null),f=c(t,e=>u(e)),h=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(r){let e=function(e){if(h.paused||!l)return;let t=e.target;l.contains(t)?g.current=t:P(g.current,{select:!0})},t=function(e){if(h.paused||!l)return;let t=e.relatedTarget;null===t||l.contains(t)||P(g.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let n=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&P(l)});return l&&n.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[r,l,h.paused]),a.useEffect(()=>{if(l){j.add(h);let e=document.activeElement;if(!l.contains(e)){let t=new CustomEvent(A,O);l.addEventListener(A,d),l.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let n=document.activeElement;for(let r of e)if(P(r,{select:t}),document.activeElement!==n)return}(C(l).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&P(l))}return()=>{l.removeEventListener(A,d),setTimeout(()=>{let t=new CustomEvent(k,O);l.addEventListener(k,m),l.dispatchEvent(t),t.defaultPrevented||P(e??document.body,{select:!0}),l.removeEventListener(k,m),j.remove(h)},0)}}},[l,d,m,h]);let y=a.useCallback(e=>{if(!n&&!r||h.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,o=document.activeElement;if(t&&o){let t=e.currentTarget,[r,a]=function(e){let t=C(e);return[R(t,e),R(t.reverse(),e)]}(t);r&&a?e.shiftKey||o!==a?e.shiftKey&&o===r&&(e.preventDefault(),n&&P(a,{select:!0})):(e.preventDefault(),n&&P(r,{select:!0})):o===t&&e.preventDefault()}},[n,r,h.paused]);return(0,p.jsx)(w.div,{tabIndex:-1,...s,ref:f,onKeyDown:y})});function C(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function R(e,t){for(let n of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(n,{upTo:t}))return n}function P(e,{select:t=!1}={}){if(e&&e.focus){var n;let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&(n=e)instanceof HTMLInputElement&&"select"in n&&t&&e.select()}}z.displayName="FocusScope";var j=(r=[],{add(e){let t=r[0];e!==t&&t?.pause(),(r=M(r,e)).unshift(e)},remove(e){r=M(r,e),r[0]?.resume()}});function M(e,t){let n=[...e],r=n.indexOf(t);return -1!==r&&n.splice(r,1),n}var D=a.forwardRef((e,t)=>{let{container:n,...r}=e,[o,i]=a.useState(!1);d(()=>i(!0),[]);let s=n||o&&globalThis?.document?.body;return s?y.createPortal((0,p.jsx)(w.div,{...r,ref:t}),s):null});D.displayName="Portal";var L=e=>{let t,n;let{present:r,children:o}=e,i=function(e){var t,n;let[r,o]=a.useState(),i=a.useRef(null),s=a.useRef(e),l=a.useRef("none"),[u,c]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},a.useReducer((e,t)=>n[e][t]??e,t));return a.useEffect(()=>{let e=U(i.current);l.current="mounted"===u?e:"none"},[u]),d(()=>{let t=i.current,n=s.current;if(n!==e){let r=l.current,o=U(t);e?c("MOUNT"):"none"===o||t?.display==="none"?c("UNMOUNT"):n&&r!==o?c("ANIMATION_OUT"):c("UNMOUNT"),s.current=e}},[e,c]),d(()=>{if(r){let e;let t=r.ownerDocument.defaultView??window,n=n=>{let o=U(i.current).includes(n.animationName);if(n.target===r&&o&&(c("ANIMATION_END"),!s.current)){let n=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=n)})}},o=e=>{e.target===r&&(l.current=U(i.current))};return r.addEventListener("animationstart",o),r.addEventListener("animationcancel",n),r.addEventListener("animationend",n),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",o),r.removeEventListener("animationcancel",n),r.removeEventListener("animationend",n)}}c("ANIMATION_END")},[r,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:a.useCallback(e=>{i.current=e?getComputedStyle(e):null,o(e)},[])}}(r),s="function"==typeof o?o({present:i.isPresent}):a.Children.only(o),l=c(i.ref,(t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning?s.props.ref:s.props.ref||s.ref);return"function"==typeof o||i.isPresent?a.cloneElement(s,{ref:l}):null};function U(e){return e?.animationName||"none"}L.displayName="Presence";var $=0;function F(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var B=n(70655),V=n(71642),G=n(99495),q=(0,n(87122)._)(),H=function(){},W=a.forwardRef(function(e,t){var n=a.useRef(null),r=a.useState({onScrollCapture:H,onWheelCapture:H,onTouchMoveCapture:H}),o=r[0],i=r[1],s=e.forwardProps,l=e.children,u=e.className,c=e.removeScrollBar,p=e.enabled,d=e.shards,m=e.sideCar,g=e.noRelative,f=e.noIsolation,h=e.inert,y=e.allowPinchZoom,v=e.as,b=e.gapMode,_=(0,B._T)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=(0,G.q)([n,t]),T=(0,B.pi)((0,B.pi)({},_),o);return a.createElement(a.Fragment,null,p&&a.createElement(m,{sideCar:q,removeScrollBar:c,shards:d,noRelative:g,noIsolation:f,inert:h,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:b}),s?a.cloneElement(a.Children.only(l),(0,B.pi)((0,B.pi)({},T),{ref:w})):a.createElement(void 0===v?"div":v,(0,B.pi)({},T,{className:u,ref:w}),l))});W.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},W.classNames={fullWidth:V.zi,zeroRight:V.pF};var Z=n(66781),K=n(37087),J=n(6525),Y=!1;if("undefined"!=typeof window)try{var X=Object.defineProperty({},"passive",{get:function(){return Y=!0,!0}});window.addEventListener("test",X,X),window.removeEventListener("test",X,X)}catch(e){Y=!1}var Q=!!Y&&{passive:!1},ee=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===n[t])},et=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),en(e,r)){var o=er(e,r);if(o[1]>o[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},en=function(e,t){return"v"===e?ee(t,"overflowY"):ee(t,"overflowX")},er=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},eo=function(e,t,n,r,o){var a,i=(a=window.getComputedStyle(t).direction,"h"===e&&"rtl"===a?-1:1),s=i*r,l=n.target,u=t.contains(l),c=!1,p=s>0,d=0,m=0;do{if(!l)break;var g=er(e,l),f=g[0],h=g[1]-g[2]-i*f;(f||h)&&en(e,l)&&(d+=h,m+=f);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&l!==document.body||u&&(t.contains(l)||t===l));return p&&(o&&1>Math.abs(d)||!o&&s>d)?c=!0:!p&&(o&&1>Math.abs(m)||!o&&-s>m)&&(c=!0),c},ea=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ei=function(e){return[e.deltaX,e.deltaY]},es=function(e){return e&&"current"in e?e.current:e},el=0,eu=[],ec=(0,Z.L)(q,function(e){var t=a.useRef([]),n=a.useRef([0,0]),r=a.useRef(),o=a.useState(el++)[0],i=a.useState(J.Ws)[0],s=a.useRef(e);a.useEffect(function(){s.current=e},[e]),a.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var t=(0,B.ev)([e.lockRef.current],(e.shards||[]).map(es),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=a.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!s.current.allowPinchZoom;var o,a=ea(e),i=n.current,l="deltaX"in e?e.deltaX:i[0]-a[0],u="deltaY"in e?e.deltaY:i[1]-a[1],c=e.target,p=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===p&&"range"===c.type)return!1;var d=et(p,c);if(!d)return!0;if(d?o=p:(o="v"===p?"h":"v",d=et(p,c)),!d)return!1;if(!r.current&&"changedTouches"in e&&(l||u)&&(r.current=o),!o)return!0;var m=r.current||o;return eo(m,t,e,"h"===m?l:u,!0)},[]),u=a.useCallback(function(e){if(eu.length&&eu[eu.length-1]===i){var n="deltaY"in e?ei(e):ea(e),r=t.current.filter(function(t){var r;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(r=t.delta)[0]===n[0]&&r[1]===n[1]})[0];if(r&&r.should){e.cancelable&&e.preventDefault();return}if(!r){var o=(s.current.shards||[]).map(es).filter(Boolean).filter(function(t){return t.contains(e.target)});(o.length>0?l(e,o[0]):!s.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=a.useCallback(function(e,n,r,o){var a={name:e,delta:n,target:r,should:o,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(r)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),p=a.useCallback(function(e){n.current=ea(e),r.current=void 0},[]),d=a.useCallback(function(t){c(t.type,ei(t),t.target,l(t,e.lockRef.current))},[]),m=a.useCallback(function(t){c(t.type,ea(t),t.target,l(t,e.lockRef.current))},[]);a.useEffect(function(){return eu.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:m}),document.addEventListener("wheel",u,Q),document.addEventListener("touchmove",u,Q),document.addEventListener("touchstart",p,Q),function(){eu=eu.filter(function(e){return e!==i}),document.removeEventListener("wheel",u,Q),document.removeEventListener("touchmove",u,Q),document.removeEventListener("touchstart",p,Q)}},[]);var g=e.removeScrollBar,f=e.inert;return a.createElement(a.Fragment,null,f?a.createElement(i,{styles:"\n  .block-interactivity-".concat(o," {pointer-events: none;}\n  .allow-interactivity-").concat(o," {pointer-events: all;}\n")}):null,g?a.createElement(K.jp,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}),ep=a.forwardRef(function(e,t){return a.createElement(W,(0,B.pi)({},e,{ref:t,sideCar:ec}))});ep.classNames=W.classNames;var ed=n(23541),em="Dialog",[eg,ef]=function(e,t=[]){let n=[],r=()=>{let t=n.map(e=>a.createContext(e));return function(n){let r=n?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){let o=a.createContext(r),i=n.length;n=[...n,r];let s=t=>{let{scope:n,children:r,...s}=t,l=n?.[e]?.[i]||o,u=a.useMemo(()=>s,Object.values(s));return(0,p.jsx)(l.Provider,{value:u,children:r})};return s.displayName=t+"Provider",[s,function(n,s){let l=s?.[e]?.[i]||o,u=a.useContext(l);if(u)return u;if(void 0!==r)return r;throw Error(`\`${n}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=n.reduce((t,{useScope:n,scopeName:r})=>{let o=n(e)[`__scope${r}`];return{...t,...o}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}(r,...t)]}(em),[eh,ey]=eg(em),ev=e=>{let{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!0}=e,l=a.useRef(null),u=a.useRef(null),[c,d]=function({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){let[o,i,s]=function({defaultProp:e,onChange:t}){let[n,r]=a.useState(e),o=a.useRef(n),i=a.useRef(t);return h(()=>{i.current=t},[t]),a.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}({defaultProp:t,onChange:n}),l=void 0!==e,u=l?e:o;{let t=a.useRef(void 0!==e);a.useEffect(()=>{let e=t.current;if(e!==l){let t=l?"controlled":"uncontrolled";console.warn(`${r} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=l},[l,r])}return[u,a.useCallback(t=>{if(l){let n="function"==typeof t?t(e):t;n!==e&&s.current?.(n)}else i(t)},[l,e,i,s])]}({prop:r,defaultProp:o??!1,onChange:i,caller:em});return(0,p.jsx)(eh,{scope:t,triggerRef:l,contentRef:u,contentId:f(),titleId:f(),descriptionId:f(),open:c,onOpenChange:d,onOpenToggle:a.useCallback(()=>d(e=>!e),[d]),modal:s,children:n})};ev.displayName=em;var eb="DialogTrigger",e_=a.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,o=ey(eb,n),a=c(t,o.triggerRef);return(0,p.jsx)(w.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":e$(o.open),...r,ref:a,onClick:s(e.onClick,o.onOpenToggle)})});e_.displayName=eb;var ew="DialogPortal",[eT,eE]=eg(ew,{forceMount:void 0}),eN=e=>{let{__scopeDialog:t,forceMount:n,children:r,container:o}=e,i=ey(ew,t);return(0,p.jsx)(eT,{scope:t,forceMount:n,children:a.Children.map(r,e=>(0,p.jsx)(L,{present:n||i.open,children:(0,p.jsx)(D,{asChild:!0,container:o,children:e})}))})};eN.displayName=ew;var ex="DialogOverlay",eI=a.forwardRef((e,t)=>{let n=eE(ex,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=ey(ex,e.__scopeDialog);return a.modal?(0,p.jsx)(L,{present:r||a.open,children:(0,p.jsx)(eA,{...o,ref:t})}):null});eI.displayName=ex;var eS=v("DialogOverlay.RemoveScroll"),eA=a.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,o=ey(ex,n);return(0,p.jsx)(ep,{as:eS,allowPinchZoom:!0,shards:[o.contentRef],children:(0,p.jsx)(w.div,{"data-state":e$(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ek="DialogContent",eO=a.forwardRef((e,t)=>{let n=eE(ek,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=ey(ek,e.__scopeDialog);return(0,p.jsx)(L,{present:r||a.open,children:a.modal?(0,p.jsx)(ez,{...o,ref:t}):(0,p.jsx)(eC,{...o,ref:t})})});eO.displayName=ek;var ez=a.forwardRef((e,t)=>{let n=ey(ek,e.__scopeDialog),r=a.useRef(null),o=c(t,n.contentRef,r);return a.useEffect(()=>{let e=r.current;if(e)return(0,ed.Ry)(e)},[]),(0,p.jsx)(eR,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:s(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:s(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:s(e.onFocusOutside,e=>e.preventDefault())})}),eC=a.forwardRef((e,t)=>{let n=ey(ek,e.__scopeDialog),r=a.useRef(!1),o=a.useRef(!1);return(0,p.jsx)(eR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,"pointerdown"!==t.detail.originalEvent.type||(o.current=!0));let a=t.target;n.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),eR=a.forwardRef((e,t)=>{let{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=e,l=ey(ek,n),u=a.useRef(null),d=c(t,u);return a.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??F()),document.body.insertAdjacentElement("beforeend",e[1]??F()),$++,()=>{1===$&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),$--}},[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(z,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,p.jsx)(x,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":e$(l.open),...s,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eG,{titleId:l.titleId}),(0,p.jsx)(eq,{contentRef:u,descriptionId:l.descriptionId})]})]})}),eP="DialogTitle",ej=a.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,o=ey(eP,n);return(0,p.jsx)(w.h2,{id:o.titleId,...r,ref:t})});ej.displayName=eP;var eM="DialogDescription",eD=a.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,o=ey(eM,n);return(0,p.jsx)(w.p,{id:o.descriptionId,...r,ref:t})});eD.displayName=eM;var eL="DialogClose",eU=a.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,o=ey(eL,n);return(0,p.jsx)(w.button,{type:"button",...r,ref:t,onClick:s(e.onClick,()=>o.onOpenChange(!1))})});function e$(e){return e?"open":"closed"}eU.displayName=eL;var eF="DialogTitleWarning",[eB,eV]=function(e,t){let n=a.createContext(t),r=e=>{let{children:t,...r}=e,o=a.useMemo(()=>r,Object.values(r));return(0,p.jsx)(n.Provider,{value:o,children:t})};return r.displayName=e+"Provider",[r,function(r){let o=a.useContext(n);if(o)return o;if(void 0!==t)return t;throw Error(`\`${r}\` must be used within \`${e}\``)}]}(eF,{contentName:ek,titleName:eP,docsSlug:"dialog"}),eG=({titleId:e})=>{let t=eV(eF),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&!document.getElementById(e)&&console.error(n)},[n,e]),null},eq=({contentRef:e,descriptionId:t})=>{let n=eV("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${n.contentName}}.`;return a.useEffect(()=>{let n=e.current?.getAttribute("aria-describedby");t&&n&&!document.getElementById(t)&&console.warn(r)},[r,e,t]),null},eH=ev,eW=e_,eZ=eN,eK=eI,eJ=eO,eY=ej,eX=eD,eQ=eU},22424:function(e,t,n){"use strict";n.d(t,{Z:function(){return en}});/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */let{entries:r,setPrototypeOf:o,isFrozen:a,getPrototypeOf:i,getOwnPropertyDescriptor:s}=Object,{freeze:l,seal:u,create:c}=Object,{apply:p,construct:d}="undefined"!=typeof Reflect&&Reflect;l||(l=function(e){return e}),u||(u=function(e){return e}),p||(p=function(e,t,n){return e.apply(t,n)}),d||(d=function(e,t){return new e(...t)});let m=S(Array.prototype.forEach),g=S(Array.prototype.lastIndexOf),f=S(Array.prototype.pop),h=S(Array.prototype.push),y=S(Array.prototype.splice),v=S(String.prototype.toLowerCase),b=S(String.prototype.toString),_=S(String.prototype.match),w=S(String.prototype.replace),T=S(String.prototype.indexOf),E=S(String.prototype.trim),N=S(Object.prototype.hasOwnProperty),x=S(RegExp.prototype.test),I=(Y=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d(Y,t)});function S(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return p(e,t,r)}}function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;o&&o(e,null);let r=t.length;for(;r--;){let o=t[r];if("string"==typeof o){let e=n(o);e!==o&&(a(t)||(t[r]=e),o=e)}e[o]=!0}return e}function k(e){let t=c(null);for(let[n,o]of r(e))N(e,n)&&(Array.isArray(o)?t[n]=function(e){for(let t=0;t<e.length;t++)N(e,t)||(e[t]=null);return e}(o):o&&"object"==typeof o&&o.constructor===Object?t[n]=k(o):t[n]=o);return t}function O(e,t){for(;null!==e;){let n=s(e,t);if(n){if(n.get)return S(n.get);if("function"==typeof n.value)return S(n.value)}e=i(e)}return function(){return null}}let z=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),C=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),P=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),j=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),M=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),D=l(["#text"]),L=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),U=l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),B=u(/\{\{[\w\W]*|[\w\W]*\}\}/gm),V=u(/<%[\w\W]*|[\w\W]*%>/gm),G=u(/\$\{[\w\W]*/gm),q=u(/^data-[\-\w.\u00B7-\uFFFF]+$/),H=u(/^aria-[\-\w]+$/),W=u(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z=u(/^(?:\w+script|data):/i),K=u(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J=u(/^html$/i);var Y,X=Object.freeze({__proto__:null,ARIA_ATTR:H,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:u(/^[a-z][.\w]*(-[.\w]+)+$/i),DATA_ATTR:q,DOCTYPE_NAME:J,ERB_EXPR:V,IS_ALLOWED_URI:W,IS_SCRIPT_OR_DATA:Z,MUSTACHE_EXPR:B,TMPLIT_EXPR:G});let Q={element:1,text:3,progressingInstruction:7,comment:8,document:9},ee=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null,r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));let o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}},et=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};var en=function e(){let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,o=t=>e(t);if(o.version="3.2.6",o.removed=[],!n||!n.document||n.document.nodeType!==Q.document||!n.Element)return o.isSupported=!1,o;let{document:a}=n,i=a,s=i.currentScript,{DocumentFragment:u,HTMLTemplateElement:p,Node:d,Element:S,NodeFilter:B,NamedNodeMap:V=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:G,DOMParser:q,trustedTypes:H}=n,Z=S.prototype,K=O(Z,"cloneNode"),Y=O(Z,"remove"),en=O(Z,"nextSibling"),er=O(Z,"childNodes"),eo=O(Z,"parentNode");if("function"==typeof p){let e=a.createElement("template");e.content&&e.content.ownerDocument&&(a=e.content.ownerDocument)}let ea="",{implementation:ei,createNodeIterator:es,createDocumentFragment:el,getElementsByTagName:eu}=a,{importNode:ec}=i,ep=et();o.isSupported="function"==typeof r&&"function"==typeof eo&&ei&&void 0!==ei.createHTMLDocument;let{MUSTACHE_EXPR:ed,ERB_EXPR:em,TMPLIT_EXPR:eg,DATA_ATTR:ef,ARIA_ATTR:eh,IS_SCRIPT_OR_DATA:ey,ATTR_WHITESPACE:ev,CUSTOM_ELEMENT:eb}=X,{IS_ALLOWED_URI:e_}=X,ew=null,eT=A({},[...z,...C,...R,...j,...D]),eE=null,eN=A({},[...L,...U,...$,...F]),ex=Object.seal(c(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),eI=null,eS=null,eA=!0,ek=!0,eO=!1,ez=!0,eC=!1,eR=!0,eP=!1,ej=!1,eM=!1,eD=!1,eL=!1,eU=!1,e$=!0,eF=!1,eB=!0,eV=!1,eG={},eq=null,eH=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),eW=null,eZ=A({},["audio","video","img","source","image","track"]),eK=null,eJ=A({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eY="http://www.w3.org/1998/Math/MathML",eX="http://www.w3.org/2000/svg",eQ="http://www.w3.org/1999/xhtml",e0=eQ,e1=!1,e2=null,e4=A({},[eY,eX,eQ],b),e9=A({},["mi","mo","mn","ms","mtext"]),e5=A({},["annotation-xml"]),e3=A({},["title","style","font","a","script"]),e6=null,e7=["application/xhtml+xml","text/html"],e8=null,te=null,tt=a.createElement("form"),tn=function(e){return e instanceof RegExp||e instanceof Function},tr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!te||te!==e){if(e&&"object"==typeof e||(e={}),e=k(e),e8="application/xhtml+xml"===(e6=-1===e7.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?b:v,ew=N(e,"ALLOWED_TAGS")?A({},e.ALLOWED_TAGS,e8):eT,eE=N(e,"ALLOWED_ATTR")?A({},e.ALLOWED_ATTR,e8):eN,e2=N(e,"ALLOWED_NAMESPACES")?A({},e.ALLOWED_NAMESPACES,b):e4,eK=N(e,"ADD_URI_SAFE_ATTR")?A(k(eJ),e.ADD_URI_SAFE_ATTR,e8):eJ,eW=N(e,"ADD_DATA_URI_TAGS")?A(k(eZ),e.ADD_DATA_URI_TAGS,e8):eZ,eq=N(e,"FORBID_CONTENTS")?A({},e.FORBID_CONTENTS,e8):eH,eI=N(e,"FORBID_TAGS")?A({},e.FORBID_TAGS,e8):k({}),eS=N(e,"FORBID_ATTR")?A({},e.FORBID_ATTR,e8):k({}),eG=!!N(e,"USE_PROFILES")&&e.USE_PROFILES,eA=!1!==e.ALLOW_ARIA_ATTR,ek=!1!==e.ALLOW_DATA_ATTR,eO=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ez=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,eC=e.SAFE_FOR_TEMPLATES||!1,eR=!1!==e.SAFE_FOR_XML,eP=e.WHOLE_DOCUMENT||!1,eD=e.RETURN_DOM||!1,eL=e.RETURN_DOM_FRAGMENT||!1,eU=e.RETURN_TRUSTED_TYPE||!1,eM=e.FORCE_BODY||!1,e$=!1!==e.SANITIZE_DOM,eF=e.SANITIZE_NAMED_PROPS||!1,eB=!1!==e.KEEP_CONTENT,eV=e.IN_PLACE||!1,e_=e.ALLOWED_URI_REGEXP||W,e0=e.NAMESPACE||eQ,e9=e.MATHML_TEXT_INTEGRATION_POINTS||e9,e5=e.HTML_INTEGRATION_POINTS||e5,ex=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&tn(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ex.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&tn(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ex.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ex.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),eC&&(ek=!1),eL&&(eD=!0),eG&&(ew=A({},D),eE=[],!0===eG.html&&(A(ew,z),A(eE,L)),!0===eG.svg&&(A(ew,C),A(eE,U),A(eE,F)),!0===eG.svgFilters&&(A(ew,R),A(eE,U),A(eE,F)),!0===eG.mathMl&&(A(ew,j),A(eE,$),A(eE,F))),e.ADD_TAGS&&(ew===eT&&(ew=k(ew)),A(ew,e.ADD_TAGS,e8)),e.ADD_ATTR&&(eE===eN&&(eE=k(eE)),A(eE,e.ADD_ATTR,e8)),e.ADD_URI_SAFE_ATTR&&A(eK,e.ADD_URI_SAFE_ATTR,e8),e.FORBID_CONTENTS&&(eq===eH&&(eq=k(eq)),A(eq,e.FORBID_CONTENTS,e8)),eB&&(ew["#text"]=!0),eP&&A(ew,["html","head","body"]),ew.table&&(A(ew,["tbody"]),delete eI.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw I('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw I('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ea=(t=e.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===t&&(t=ee(H,s)),null!==t&&"string"==typeof ea&&(ea=t.createHTML(""));l&&l(e),te=e}},to=A({},[...C,...R,...P]),ta=A({},[...j,...M]),ti=function(e){let t=eo(e);t&&t.tagName||(t={namespaceURI:e0,tagName:"template"});let n=v(e.tagName),r=v(t.tagName);return!!e2[e.namespaceURI]&&(e.namespaceURI===eX?t.namespaceURI===eQ?"svg"===n:t.namespaceURI===eY?"svg"===n&&("annotation-xml"===r||e9[r]):!!to[n]:e.namespaceURI===eY?t.namespaceURI===eQ?"math"===n:t.namespaceURI===eX?"math"===n&&e5[r]:!!ta[n]:e.namespaceURI===eQ?(t.namespaceURI!==eX||!!e5[r])&&(t.namespaceURI!==eY||!!e9[r])&&!ta[n]&&(e3[n]||!to[n]):"application/xhtml+xml"===e6&&!!e2[e.namespaceURI])},ts=function(e){h(o.removed,{element:e});try{eo(e).removeChild(e)}catch(t){Y(e)}},tl=function(e,t){try{h(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){h(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e){if(eD||eL)try{ts(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}},tu=function(e){let n=null,r=null;if(eM)e="<remove></remove>"+e;else{let t=_(e,/^[\r\n\t ]+/);r=t&&t[0]}"application/xhtml+xml"===e6&&e0===eQ&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let o=t?t.createHTML(e):e;if(e0===eQ)try{n=new q().parseFromString(o,e6)}catch(e){}if(!n||!n.documentElement){n=ei.createDocument(e0,"template",null);try{n.documentElement.innerHTML=e1?ea:o}catch(e){}}let i=n.body||n.documentElement;return(e&&r&&i.insertBefore(a.createTextNode(r),i.childNodes[0]||null),e0===eQ)?eu.call(n,eP?"html":"body")[0]:eP?n.documentElement:i},tc=function(e){return es.call(e.ownerDocument||e,e,B.SHOW_ELEMENT|B.SHOW_COMMENT|B.SHOW_TEXT|B.SHOW_PROCESSING_INSTRUCTION|B.SHOW_CDATA_SECTION,null)},tp=function(e){return e instanceof G&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof V)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},td=function(e){return"function"==typeof d&&e instanceof d};function tm(e,t,n){m(e,e=>{e.call(o,t,n,te)})}let tg=function(e){let t=null;if(tm(ep.beforeSanitizeElements,e,null),tp(e))return ts(e),!0;let n=e8(e.nodeName);if(tm(ep.uponSanitizeElement,e,{tagName:n,allowedTags:ew}),eR&&e.hasChildNodes()&&!td(e.firstElementChild)&&x(/<[/\w!]/g,e.innerHTML)&&x(/<[/\w!]/g,e.textContent)||e.nodeType===Q.progressingInstruction||eR&&e.nodeType===Q.comment&&x(/<[/\w]/g,e.data))return ts(e),!0;if(!ew[n]||eI[n]){if(!eI[n]&&th(n)&&(ex.tagNameCheck instanceof RegExp&&x(ex.tagNameCheck,n)||ex.tagNameCheck instanceof Function&&ex.tagNameCheck(n)))return!1;if(eB&&!eq[n]){let t=eo(e)||e.parentNode,n=er(e)||e.childNodes;if(n&&t){let r=n.length;for(let o=r-1;o>=0;--o){let r=K(n[o],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,en(e))}}}return ts(e),!0}return e instanceof S&&!ti(e)||("noscript"===n||"noembed"===n||"noframes"===n)&&x(/<\/no(script|embed|frames)/i,e.innerHTML)?(ts(e),!0):(eC&&e.nodeType===Q.text&&(t=e.textContent,m([ed,em,eg],e=>{t=w(t,e," ")}),e.textContent!==t&&(h(o.removed,{element:e.cloneNode()}),e.textContent=t)),tm(ep.afterSanitizeElements,e,null),!1)},tf=function(e,t,n){if(e$&&("id"===t||"name"===t)&&(n in a||n in tt))return!1;if(ek&&!eS[t]&&x(ef,t));else if(eA&&x(eh,t));else if(!eE[t]||eS[t]){if(!(th(e)&&(ex.tagNameCheck instanceof RegExp&&x(ex.tagNameCheck,e)||ex.tagNameCheck instanceof Function&&ex.tagNameCheck(e))&&(ex.attributeNameCheck instanceof RegExp&&x(ex.attributeNameCheck,t)||ex.attributeNameCheck instanceof Function&&ex.attributeNameCheck(t))||"is"===t&&ex.allowCustomizedBuiltInElements&&(ex.tagNameCheck instanceof RegExp&&x(ex.tagNameCheck,n)||ex.tagNameCheck instanceof Function&&ex.tagNameCheck(n))))return!1}else if(eK[t]);else if(x(e_,w(n,ev,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===T(n,"data:")&&eW[e]);else if(eO&&!x(ey,w(n,ev,"")));else if(n)return!1;return!0},th=function(e){return"annotation-xml"!==e&&_(e,eb)},ty=function(e){tm(ep.beforeSanitizeAttributes,e,null);let{attributes:n}=e;if(!n||tp(e))return;let r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:eE,forceKeepAttr:void 0},a=n.length;for(;a--;){let{name:i,namespaceURI:s,value:l}=n[a],u=e8(i),c="value"===i?l:E(l);if(r.attrName=u,r.attrValue=c,r.keepAttr=!0,r.forceKeepAttr=void 0,tm(ep.uponSanitizeAttribute,e,r),c=r.attrValue,eF&&("id"===u||"name"===u)&&(tl(i,e),c="user-content-"+c),eR&&x(/((--!?|])>)|<\/(style|title)/i,c)){tl(i,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr||!ez&&x(/\/>/i,c)){tl(i,e);continue}eC&&m([ed,em,eg],e=>{c=w(c,e," ")});let p=e8(e.nodeName);if(!tf(p,u,c)){tl(i,e);continue}if(t&&"object"==typeof H&&"function"==typeof H.getAttributeType){if(s);else switch(H.getAttributeType(p,u)){case"TrustedHTML":c=t.createHTML(c);break;case"TrustedScriptURL":c=t.createScriptURL(c)}}if(c!==l)try{s?e.setAttributeNS(s,i,c):e.setAttribute(i,c),tp(e)?ts(e):f(o.removed)}catch(t){tl(i,e)}}tm(ep.afterSanitizeAttributes,e,null)},tv=function e(t){let n=null,r=tc(t);for(tm(ep.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)tm(ep.uponSanitizeShadowNode,n,null),tg(n),ty(n),n.content instanceof u&&e(n.content);tm(ep.afterSanitizeShadowDOM,t,null)};return o.sanitize=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=null,s=null,l=null;if((e1=!e)&&(e="<!-->"),"string"!=typeof e&&!td(e)){if("function"==typeof e.toString){if("string"!=typeof(e=e.toString()))throw I("dirty is not a string, aborting")}else throw I("toString is not a function")}if(!o.isSupported)return e;if(ej||tr(n),o.removed=[],"string"==typeof e&&(eV=!1),eV){if(e.nodeName){let t=e8(e.nodeName);if(!ew[t]||eI[t])throw I("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof d)(a=(r=tu("<!---->")).ownerDocument.importNode(e,!0)).nodeType===Q.element&&"BODY"===a.nodeName?r=a:"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!eD&&!eC&&!eP&&-1===e.indexOf("<"))return t&&eU?t.createHTML(e):e;if(!(r=tu(e)))return eD?null:eU?ea:""}r&&eM&&ts(r.firstChild);let c=tc(eV?e:r);for(;s=c.nextNode();)tg(s),ty(s),s.content instanceof u&&tv(s.content);if(eV)return e;if(eD){if(eL)for(l=el.call(r.ownerDocument);r.firstChild;)l.appendChild(r.firstChild);else l=r;return(eE.shadowroot||eE.shadowrootmode)&&(l=ec.call(i,l,!0)),l}let p=eP?r.outerHTML:r.innerHTML;return eP&&ew["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&x(J,r.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+p),eC&&m([ed,em,eg],e=>{p=w(p,e," ")}),t&&eU?t.createHTML(p):p},o.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};tr(e),ej=!0},o.clearConfig=function(){te=null,ej=!1},o.isValidAttribute=function(e,t,n){return te||tr({}),tf(e8(e),e8(t),n)},o.addHook=function(e,t){"function"==typeof t&&h(ep[e],t)},o.removeHook=function(e,t){if(void 0!==t){let n=g(ep[e],t);return -1===n?void 0:y(ep[e],n,1)[0]}return f(ep[e])},o.removeHooks=function(e){ep[e]=[]},o.removeAllHooks=function(){ep=et()},o}()}}]);