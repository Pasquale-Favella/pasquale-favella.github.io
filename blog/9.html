<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta property="og:url" content="https://pasquale-favella.github.io/"/><meta property="og:type" content="website"/><meta property="og:image" content="https://pasquale-favella.github.io/og-image.png"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Pasquale Favella blogfolio"/><link rel="icon" href="/favicon.ico"/><title>Pasquale Favella | Spring Mongo JPA - the basics</title><meta name="robots" content="index,follow"/><meta name="description" content="Pasquale Favella Blog - Spring Mongo JPA - the basics"/><meta property="og:title" content="Pasquale Favella | Spring Mongo JPA - the basics"/><meta property="og:description" content="Pasquale Favella Blog - Spring Mongo JPA - the basics"/><meta name="next-head-count" content="13"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/b28391ef4abf7c8d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b28391ef4abf7c8d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-c70911db797ae2ae.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-8b0a8fea1e6bc305.js" defer=""></script><script src="/_next/static/chunks/pages/_app-796211642da301dd.js" defer=""></script><script src="/_next/static/chunks/d64684d8-3d3e4e181a594542.js" defer=""></script><script src="/_next/static/chunks/29107295-8ab47bb7d9547e26.js" defer=""></script><script src="/_next/static/chunks/654-0882e080c3b30056.js" defer=""></script><script src="/_next/static/chunks/861-aad12832f5cb69b1.js" defer=""></script><script src="/_next/static/chunks/263-4a8117eb1be7deec.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-6825bab9b0504815.js" defer=""></script><script src="/_next/static/BsZ8ls8AersplSSlk3g8E/_buildManifest.js" defer=""></script><script src="/_next/static/BsZ8ls8AersplSSlk3g8E/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><header class="fixed top-0 left-0 right-0 z-40 shadow-sm backdrop-blur-[10px] bg-base-100/80 saturate-100"><div class="mx-auto flex h-[60px] max-w-6xl items-center justify-between px-8"><div><a aria-label="Pasquale&#x27;s website" href="/"><div class="flex items-center justify-between text-xl font-semibold">~ P: /blog<div class="Typewriter" data-testid="typewriter-wrapper"></div></div></a></div><div class="flex items-center gap-2"><div class="tooltip tooltip-bottom before:text-xs before:content-[attr(data-tip)]" data-tip="commands"><button class="btn btn-ghost btn-circle normal-case btn-sm"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg></button></div><div class="tooltip tooltip-bottom before:text-xs before:content-[attr(data-tip)]" data-tip="change theme"><label class="swap swap-rotate btn btn-ghost btn-circle btn-sm"><input type="checkbox"/><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="swap-off" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path></svg><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="swap-on" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path fill-rule="nonzero" d="M10 6a8 8 0 0 0 11.955 6.956C21.474 18.03 17.2 22 12 22 6.477 22 2 17.523 2 12c0-5.2 3.97-9.474 9.044-9.955A7.963 7.963 0 0 0 10 6zm-6 6a8 8 0 0 0 8 8 8.006 8.006 0 0 0 6.957-4.045c-.316.03-.636.045-.957.045-5.523 0-10-4.477-10-10 0-.321.015-.64.045-.957A8.006 8.006 0 0 0 4 12zm14.164-9.709L19 2.5v1l-.836.209a2 2 0 0 0-1.455 1.455L16.5 6h-1l-.209-.836a2 2 0 0 0-1.455-1.455L13 3.5v-1l.836-.209A2 2 0 0 0 15.29.836L15.5 0h1l.209.836a2 2 0 0 0 1.455 1.455zm5 5L24 7.5v1l-.836.209a2 2 0 0 0-1.455 1.455L21.5 11h-1l-.209-.836a2 2 0 0 0-1.455-1.455L18 8.5v-1l.836-.209a2 2 0 0 0 1.455-1.455L20.5 5h1l.209.836a2 2 0 0 0 1.455 1.455z"></path></g></svg></label></div></div></div></header><main class="relative mx-auto min-h-layout max-w-6xl px-8 pt-20 mb-2"><a class="group fixed top-24 hidden items-center justify-center text-sm font-medium xl:inline-flex" href="/blog"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="h-4 w-4 transition duration-200 group-hover:translate-x-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"></path></svg><span>See all Posts</span></a><div class="prose md:prose-lg lg:prose-xl mx-auto  mb-3 lg:mb-5"><h1 class="text-4xl font-extrabold leading-tight md:text-5xl">Spring Mongo JPA - the basics</h1></div><article class="prose md:prose-lg lg:prose-xl mx-auto"><p>Mongo JPA, or the Java Persistence API, is a powerful tool that allows developers to interact with MongoDB databases using the standard JPA interface. JPA is a specification for object-relational mapping in Java, which means that it allows developers to map Java classes to database tables and perform CRUD (Create, Read, Update, Delete) operations on those tables using standard Java methods.</p>
<p>MongoDB is a popular NoSQL database that is widely used in modern web applications due to its flexibility and scalability. With the rise of microservices architecture, many developers are turning to MongoDB as a preferred database solution. However, working with MongoDB can be challenging for developers who are not familiar with NoSQL concepts and query languages.</p>
<p>That's where Mongo JPA comes in. It provides a simple and intuitive way to work with MongoDB databases, allowing developers to focus on their business logic rather than database implementation details. By using Mongo JPA, developers can take advantage of the powerful features of MongoDB, such as schemaless data modeling, dynamic queries, and horizontal scaling.</p>
<p>One of the key benefits of using Mongo JPA is that it provides a consistent API for working with different types of databases, including relational databases and NoSQL databases. This means that developers can use the same Java code to interact with MongoDB and other databases, which can simplify their codebase and reduce the learning curve for new developers.</p>
<p>Another advantage of using Mongo JPA is that it supports the JPA Criteria API, which allows developers to create type-safe queries using Java code. This can help prevent errors and make code easier to maintain, especially for larger projects. Additionally, Mongo JPA supports advanced query features such as aggregation, sorting, and pagination, which can be challenging to implement using raw MongoDB queries.</p>
<p>To use Mongo JPA, developers can add the necessary dependencies to their project and create entity classes that map to MongoDB collections. They can then use standard JPA methods to interact with the database, such as <code>find</code> , <code>persist</code> , <code>merge</code> , and <code>remove</code>. Mongo JPA also provides annotations that can be used to define indexes, map embedded objects, and specify other database-related details.
Here an example</p>

<div style="position: relative">
	<pre><code class="hljs language-java"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> String id;
    
    <span class="hljs-meta">@Column(name = &quot;username&quot;)</span>
    <span class="hljs-keyword">private</span> String username;
    
    <span class="hljs-meta">@Column(name = &quot;password&quot;)</span>
    <span class="hljs-keyword">private</span> String password;
    
    <span class="hljs-meta">@Embedded</span>
    <span class="hljs-keyword">private</span> Address address;
    
    <span class="hljs-comment">// Getters and setters</span>
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> username;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUsername</span><span class="hljs-params">(String username)</span> {
        <span class="hljs-built_in">this</span>.username = username;
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPassword</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> password;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPassword</span><span class="hljs-params">(String password)</span> {
        <span class="hljs-built_in">this</span>.password = password;
    }
    
    <span class="hljs-keyword">public</span> Address <span class="hljs-title function_">getAddress</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> address;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAddress</span><span class="hljs-params">(Address address)</span> {
        <span class="hljs-built_in">this</span>.address = address;
    }
    
    <span class="hljs-comment">// Embedded class</span>
    
    <span class="hljs-meta">@Embeddable</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> {
        
        <span class="hljs-meta">@Column(name = &quot;street&quot;)</span>
        <span class="hljs-keyword">private</span> String street;
        
        <span class="hljs-meta">@Column(name = &quot;city&quot;)</span>
        <span class="hljs-keyword">private</span> String city;
        
        <span class="hljs-meta">@Column(name = &quot;state&quot;)</span>
        <span class="hljs-keyword">private</span> String state;
        
        <span class="hljs-meta">@Column(name = &quot;zip&quot;)</span>
        <span class="hljs-keyword">private</span> String zip;
        
        <span class="hljs-comment">// Getters and setters</span>
        
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getStreet</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> street;
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStreet</span><span class="hljs-params">(String street)</span> {
            <span class="hljs-built_in">this</span>.street = street;
        }
        
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCity</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> city;
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCity</span><span class="hljs-params">(String city)</span> {
            <span class="hljs-built_in">this</span>.city = city;
        }
        
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> state;
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setState</span><span class="hljs-params">(String state)</span> {
            <span class="hljs-built_in">this</span>.state = state;
        }
        
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getZip</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> zip;
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setZip</span><span class="hljs-params">(String zip)</span> {
            <span class="hljs-built_in">this</span>.zip = zip;
        }
    }
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="@Entity
public class User {
    
    @Id
    private String id;
    
    @Column(name = &quot;username&quot;)
    private String username;
    
    @Column(name = &quot;password&quot;)
    private String password;
    
    @Embedded
    private Address address;
    
    // Getters and setters
    
    public String getId() {
        return id;
    }
    
    public void setId(String id) {
        this.id = id;
    }
    
    public String getUsername() {
        return username;
    }
    
    public void setUsername(String username) {
        this.username = username;
    }
    
    public String getPassword() {
        return password;
    }
    
    public void setPassword(String password) {
        this.password = password;
    }
    
    public Address getAddress() {
        return address;
    }
    
    public void setAddress(Address address) {
        this.address = address;
    }
    
    // Embedded class
    
    @Embeddable
    public static class Address {
        
        @Column(name = &quot;street&quot;)
        private String street;
        
        @Column(name = &quot;city&quot;)
        private String city;
        
        @Column(name = &quot;state&quot;)
        private String state;
        
        @Column(name = &quot;zip&quot;)
        private String zip;
        
        // Getters and setters
        
        public String getStreet() {
            return street;
        }
        
        public void setStreet(String street) {
            this.street = street;
        }
        
        public String getCity() {
            return city;
        }
        
        public void setCity(String city) {
            this.city = city;
        }
        
        public String getState() {
            return state;
        }
        
        public void setState(String state) {
            this.state = state;
        }
        
        public String getZip() {
            return zip;
        }
        
        public void setZip(String zip) {
            this.zip = zip;
        }
    }
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>In this example, the <code>User</code> class is annotated with <code>@Entity</code>, which tells Mongo JPA that it should be mapped to a MongoDB collection. The <code>@Id</code> annotation is used to indicate that the <code>id</code> field is the primary key for the collection. The <code>@Column</code> annotation is used to specify the names of the fields in the collection.
The <code>Address</code> class is embedded in the <code>User</code> class using the <code>@Embedded</code> annotation. It is also annotated with <code>@Embeddable</code>, which indicates that it should be stored as part of the <code>User</code> document in the MongoDB collection.</p>
<p>The class above can be used to build a <code>MongoRepository</code></p>

<div style="position: relative">
	<pre><code class="hljs language-java"><span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MongoRepository</span>&lt;User, String&gt; {
    
    User <span class="hljs-title function_">findByUsername</span><span class="hljs-params">(String username)</span>;
    
    List&lt;User&gt; <span class="hljs-title function_">findByAddressCity</span><span class="hljs-params">(String city)</span>;
    
    <span class="hljs-meta">@Query(&quot;{ &#x27;address.state&#x27; : ?0 }&quot;)</span>
    List&lt;User&gt; <span class="hljs-title function_">findByAddressState</span><span class="hljs-params">(String state)</span>;
    
    List&lt;User&gt; <span class="hljs-title function_">findByAddressStateAndAddressCity</span><span class="hljs-params">(String state, String city)</span>;
    
    <span class="hljs-keyword">default</span> List&lt;User&gt; <span class="hljs-title function_">findUsersByCriteria</span><span class="hljs-params">(String state, String city)</span> {
        <span class="hljs-type">Criteria</span> <span class="hljs-variable">criteria</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Criteria</span>();
        
        <span class="hljs-keyword">if</span> (state != <span class="hljs-literal">null</span> &amp;&amp; !state.isEmpty()) {
            criteria = criteria.and(<span class="hljs-string">&quot;address.state&quot;</span>).is(state);
        }
        
        <span class="hljs-keyword">if</span> (city != <span class="hljs-literal">null</span> &amp;&amp; !city.isEmpty()) {
            criteria = criteria.and(<span class="hljs-string">&quot;address.city&quot;</span>).is(city);
        }
        
        <span class="hljs-type">Query</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Query</span>(criteria);
        <span class="hljs-keyword">return</span> mongoTemplate.find(query, User.class);
    }
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="@Repository
public interface UserRepository extends MongoRepository<User, String> {
    
    User findByUsername(String username);
    
    List<User> findByAddressCity(String city);
    
    @Query(&quot;{ &lt;address.state&lt; : ?0 }&quot;)
    List<User> findByAddressState(String state);
    
    List<User> findByAddressStateAndAddressCity(String state, String city);
    
    default List<User> findUsersByCriteria(String state, String city) {
        Criteria criteria = new Criteria();
        
        if (state != null && !state.isEmpty()) {
            criteria = criteria.and(&quot;address.state&quot;).is(state);
        }
        
        if (city != null && !city.isEmpty()) {
            criteria = criteria.and(&quot;address.city&quot;).is(city);
        }
        
        Query query = new Query(criteria);
        return mongoTemplate.find(query, User.class);
    }
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>In this example, the <code>findUsersByCriteria</code> method is a custom query that uses <code>Criteria</code> to build a dynamic query. <code>Criteria</code> is a flexible way to build complex queries with conditions that can change at runtime.
The method takes two parameters, <code>state</code> and <code>city</code>, which are used to build the <code>Criteria</code> object. The method first creates a new <code>Criteria</code> object and then adds conditions based on the values of <code>state</code> and <code>city</code>. If the <code>state</code> parameter is not null and not empty, it adds a condition to match the <code>state</code> field in the <code>address</code> object. If the <code>city</code> parameter is not null and not empty, it adds a condition to match the <code>city</code> field in the <code>address</code> object.
Finally, the method creates a new <code>Query</code> object with the <code>Criteria</code> object and uses <code>MongoTemplate</code> to execute the query and return a list of <code>User</code> objects.</p>
<p>In conclusion, Mongo JPA is a valuable tool for developers who want to work with MongoDB databases using standard Java methods. It provides a consistent and intuitive API that can simplify code and reduce the learning curve for new developers. By leveraging the powerful features of MongoDB, developers can build scalable and flexible applications that can meet the demands of modern web development.</p>
</article><div class="my-8"></div></main><footer class="text-gray-600 "><div class="max-w-6xl px-5 py-4 mx-auto flex items-center sm:flex-row flex-col"><a class="text-primary hover:underline underline-offset-2" aria-label="Email to paskfdev@gmail.com" title="Email to paskfdev@gmail.com" href="mailto:paskfdev@gmail.com">Pasquale Favella</a><p class="text-sm text-gray-500 sm:ml-4 sm:pl-4 sm:border-l-2 sm:border-gray-200 sm:py-2 sm:mt-0 mt-4">Â©<!-- -->2023<!-- --> â€¢ made with ðŸ’š</p><span class="inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center sm:justify-start gap-4"><a class="transition-all duration-300 hover:text-primary" href="https://github.com/Pasquale-Favella"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><a class="transition-all duration-300 hover:text-primary" href="https://it.linkedin.com/in/pasquale-favella-1a3682187"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a></span></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"Mongo JPA, or the Java Persistence API, is a powerful tool that allows developers to interact with MongoDB databases using the standard JPA interface. JPA is a specification for object-relational mapping in Java, which means that it allows developers to map Java classes to database tables and perform CRUD (Create, Read, Update, Delete) operations on those tables using standard Java methods.\r\n\r\nMongoDB is a popular NoSQL database that is widely used in modern web applications due to its flexibility and scalability. With the rise of microservices architecture, many developers are turning to MongoDB as a preferred database solution. However, working with MongoDB can be challenging for developers who are not familiar with NoSQL concepts and query languages.\r\n\r\nThat's where Mongo JPA comes in. It provides a simple and intuitive way to work with MongoDB databases, allowing developers to focus on their business logic rather than database implementation details. By using Mongo JPA, developers can take advantage of the powerful features of MongoDB, such as schemaless data modeling, dynamic queries, and horizontal scaling.\r\n\r\nOne of the key benefits of using Mongo JPA is that it provides a consistent API for working with different types of databases, including relational databases and NoSQL databases. This means that developers can use the same Java code to interact with MongoDB and other databases, which can simplify their codebase and reduce the learning curve for new developers.\r\n\r\nAnother advantage of using Mongo JPA is that it supports the JPA Criteria API, which allows developers to create type-safe queries using Java code. This can help prevent errors and make code easier to maintain, especially for larger projects. Additionally, Mongo JPA supports advanced query features such as aggregation, sorting, and pagination, which can be challenging to implement using raw MongoDB queries.\r\n\r\nTo use Mongo JPA, developers can add the necessary dependencies to their project and create entity classes that map to MongoDB collections. They can then use standard JPA methods to interact with the database, such as `find` , `persist` , `merge` , and `remove`. Mongo JPA also provides annotations that can be used to define indexes, map embedded objects, and specify other database-related details.\r\nHere an example\r\n``` java\r\n@Entity\r\npublic class User {\r\n    \r\n    @Id\r\n    private String id;\r\n    \r\n    @Column(name = \"username\")\r\n    private String username;\r\n    \r\n    @Column(name = \"password\")\r\n    private String password;\r\n    \r\n    @Embedded\r\n    private Address address;\r\n    \r\n    // Getters and setters\r\n    \r\n    public String getId() {\r\n        return id;\r\n    }\r\n    \r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n    \r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n    \r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n    \r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n    \r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n    \r\n    public Address getAddress() {\r\n        return address;\r\n    }\r\n    \r\n    public void setAddress(Address address) {\r\n        this.address = address;\r\n    }\r\n    \r\n    // Embedded class\r\n    \r\n    @Embeddable\r\n    public static class Address {\r\n        \r\n        @Column(name = \"street\")\r\n        private String street;\r\n        \r\n        @Column(name = \"city\")\r\n        private String city;\r\n        \r\n        @Column(name = \"state\")\r\n        private String state;\r\n        \r\n        @Column(name = \"zip\")\r\n        private String zip;\r\n        \r\n        // Getters and setters\r\n        \r\n        public String getStreet() {\r\n            return street;\r\n        }\r\n        \r\n        public void setStreet(String street) {\r\n            this.street = street;\r\n        }\r\n        \r\n        public String getCity() {\r\n            return city;\r\n        }\r\n        \r\n        public void setCity(String city) {\r\n            this.city = city;\r\n        }\r\n        \r\n        public String getState() {\r\n            return state;\r\n        }\r\n        \r\n        public void setState(String state) {\r\n            this.state = state;\r\n        }\r\n        \r\n        public String getZip() {\r\n            return zip;\r\n        }\r\n        \r\n        public void setZip(String zip) {\r\n            this.zip = zip;\r\n        }\r\n    }\r\n}\r\n```\r\nIn this example, the `User` class is annotated with `@Entity`, which tells Mongo JPA that it should be mapped to a MongoDB collection. The `@Id` annotation is used to indicate that the `id` field is the primary key for the collection. The `@Column` annotation is used to specify the names of the fields in the collection.\r\nThe `Address` class is embedded in the `User` class using the `@Embedded` annotation. It is also annotated with `@Embeddable`, which indicates that it should be stored as part of the `User` document in the MongoDB collection.\r\n\r\nThe class above can be used to build a `MongoRepository`\r\n``` java\r\n@Repository\r\npublic interface UserRepository extends MongoRepository\u003cUser, String\u003e {\r\n    \r\n    User findByUsername(String username);\r\n    \r\n    List\u003cUser\u003e findByAddressCity(String city);\r\n    \r\n    @Query(\"{ 'address.state' : ?0 }\")\r\n    List\u003cUser\u003e findByAddressState(String state);\r\n    \r\n    List\u003cUser\u003e findByAddressStateAndAddressCity(String state, String city);\r\n    \r\n    default List\u003cUser\u003e findUsersByCriteria(String state, String city) {\r\n        Criteria criteria = new Criteria();\r\n        \r\n        if (state != null \u0026\u0026 !state.isEmpty()) {\r\n            criteria = criteria.and(\"address.state\").is(state);\r\n        }\r\n        \r\n        if (city != null \u0026\u0026 !city.isEmpty()) {\r\n            criteria = criteria.and(\"address.city\").is(city);\r\n        }\r\n        \r\n        Query query = new Query(criteria);\r\n        return mongoTemplate.find(query, User.class);\r\n    }\r\n}\r\n```\r\nIn this example, the `findUsersByCriteria` method is a custom query that uses `Criteria` to build a dynamic query. `Criteria` is a flexible way to build complex queries with conditions that can change at runtime.\r\nThe method takes two parameters, `state` and `city`, which are used to build the `Criteria` object. The method first creates a new `Criteria` object and then adds conditions based on the values of `state` and `city`. If the `state` parameter is not null and not empty, it adds a condition to match the `state` field in the `address` object. If the `city` parameter is not null and not empty, it adds a condition to match the `city` field in the `address` object.\r\nFinally, the method creates a new `Query` object with the `Criteria` object and uses `MongoTemplate` to execute the query and return a list of `User` objects.\r\n\r\nIn conclusion, Mongo JPA is a valuable tool for developers who want to work with MongoDB databases using standard Java methods. It provides a consistent and intuitive API that can simplify code and reduce the learning curve for new developers. By leveraging the powerful features of MongoDB, developers can build scalable and flexible applications that can meet the demands of modern web development.","slug":"9","title":"Spring Mongo JPA - the basics"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"9"},"buildId":"BsZ8ls8AersplSSlk3g8E","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>