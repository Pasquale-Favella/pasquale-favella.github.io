<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta property="og:url" content="https://pasquale-favella.github.io/"/><meta property="og:image" content="https://pasquale-favella.github.io/og-image.png"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Pasquale Favella blogfolio"/><meta name="google-site-verification" content="BF08ecEW9P2w_w4mwWTU2LxdORMDiIO3XUeZLW7UC4o"/><link rel="icon" href="https://pasquale-favella.github.io/favicon.ico"/><title>Pasquale Favella | How to Prevent Angular Issues with API Contract Changes Using Zod</title><meta name="robots" content="index,follow"/><meta name="description" content="As a front-end developer, one common problem you may face is ensuring your application doesn&#x27;t break when the API contract changes"/><meta property="og:title" content="Pasquale Favella | How to Prevent Angular Issues with API Contract Changes Using Zod"/><meta property="og:description" content="As a front-end developer, one common problem you may face is ensuring your application doesn&#x27;t break when the API contract changes"/><meta property="og:type" content="article"/><meta property="article:tag" content="Angular"/><meta name="next-head-count" content="15"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/6922198f43e5aeec.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/6922198f43e5aeec.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9c1928c2f34dc1c6.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-314c182fa7e2bf37.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-a767d6d8830842fe.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-4cf08b0cf7387c88.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/5d416436-33d3c7295c991659.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/29107295-4cc022cea922dbb4.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/4245-3dfa6a5bbae30301.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f4e990c90e0f396e.js" defer="" crossorigin=""></script><script src="/_next/static/k41EvA04QB1QOOvjxlzdt/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/k41EvA04QB1QOOvjxlzdt/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><header class="fixed top-0 left-0 right-0 z-40 shadow-sm backdrop-blur-[10px] bg-base-100/80 saturate-100"><div class="mx-auto flex h-[60px] max-w-6xl items-center justify-between px-8"><div><a aria-label="Pasquale&#x27;s website" href="/"><div class="flex items-center justify-between text-xl font-semibold">~ P: /blog<div class="Typewriter" data-testid="typewriter-wrapper"></div></div></a></div><div class="flex items-center gap-2"><div class="tooltip tooltip-bottom before:text-xs before:content-[attr(data-tip)]" data-tip="commands"><button class="btn btn-ghost btn-circle btn-sm"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg></button></div><div class="tooltip tooltip-bottom before:text-xs before:content-[attr(data-tip)]" data-tip="change theme"><label class="swap swap-rotate btn btn-ghost btn-circle btn-sm"><input id="theme-toggle" type="checkbox"/><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="swap-on" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path></svg><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="swap-off" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6C10 10.4183 13.5817 14 18 14C19.4386 14 20.7885 13.6203 21.9549 12.9556C21.4738 18.0302 17.2005 22 12 22C6.47715 22 2 17.5228 2 12C2 6.79948 5.9698 2.52616 11.0444 2.04507C10.3797 3.21152 10 4.56142 10 6ZM4 12C4 16.4183 7.58172 20 12 20C14.9654 20 17.5757 18.3788 18.9571 15.9546C18.6407 15.9848 18.3214 16 18 16C12.4772 16 8 11.5228 8 6C8 5.67863 8.01524 5.35933 8.04536 5.04293C5.62119 6.42426 4 9.03458 4 12ZM18.1642 2.29104L19 2.5V3.5L18.1642 3.70896C17.4476 3.8881 16.8881 4.4476 16.709 5.16417L16.5 6H15.5L15.291 5.16417C15.1119 4.4476 14.5524 3.8881 13.8358 3.70896L13 3.5V2.5L13.8358 2.29104C14.5524 2.1119 15.1119 1.5524 15.291 0.835829L15.5 0H16.5L16.709 0.835829C16.8881 1.5524 17.4476 2.1119 18.1642 2.29104ZM23.1642 7.29104L24 7.5V8.5L23.1642 8.70896C22.4476 8.8881 21.8881 9.4476 21.709 10.1642L21.5 11H20.5L20.291 10.1642C20.1119 9.4476 19.5524 8.8881 18.8358 8.70896L18 8.5V7.5L18.8358 7.29104C19.5524 7.1119 20.1119 6.5524 20.291 5.83583L20.5 5H21.5L21.709 5.83583C21.8881 6.5524 22.4476 7.1119 23.1642 7.29104Z"></path></svg></label></div></div></div></header><main class="relative mx-auto min-h-layout max-w-6xl px-8 pt-20 mb-2"><a class="group fixed top-24 hidden items-center justify-center text-sm font-medium xl:inline-flex" href="/blog"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="h-4 w-4 transition duration-200 group-hover:translate-x-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"></path></svg><span>See all Posts</span></a><div class="prose md:prose-lg lg:prose-xl mx-auto  mb-3 lg:mb-5"><h1 class="text-4xl font-extrabold leading-tight md:text-5xl !mb-4">How to Prevent Angular Issues with API Contract Changes Using Zod</h1><div class="flex gap-2"><a class="badge badge-lg border-base-content hover:border-accent-content hover:opacity-80 no-underline py-4" href="/blog?tag=Angular"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 20 20" aria-hidden="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9.243 3.03a1 1 0 01.727 1.213L9.53 6h2.94l.56-2.243a1 1 0 111.94.486L14.53 6H17a1 1 0 110 2h-2.97l-1 4H15a1 1 0 110 2h-2.47l-.56 2.242a1 1 0 11-1.94-.485L10.47 14H7.53l-.56 2.242a1 1 0 11-1.94-.485L5.47 14H3a1 1 0 110-2h2.97l1-4H5a1 1 0 110-2h2.47l.56-2.243a1 1 0 011.213-.727zM9.03 8l-1 4h2.938l1-4H9.031z" clip-rule="evenodd"></path></svg>Angular</a></div></div><article class="prose md:prose-lg lg:prose-xl mx-auto"><p>As a front-end developer, one common problem you may face is ensuring your application doesn't break when the API contract changes. Whether you're working with API responses, external data, or handling backend integration, it’s critical to have a solution that validates the data your front-end consumes. In this article, we’ll explore how using <code>Zod</code>, a popular data validation library, can help prevent front-end issues due to <code>API contract changes</code>.</p>
<h2>Common Problem: Front-End Breaks Due to API Contract Changes</h2>
<p>Imagine you’re developing a feature for your project, and you agree on an <code>API contract</code> with the back-end team. You write your code, implement the feature, and even cover multiple test scenarios. Everything works perfectly. However, some time later, the feature stops working.</p>
<p>Upon investigation, you find that the <code>front-end code</code> is fine, and all your tests are passing. The issue? The <code>API response</code> has changed, and the <code>API contract</code> you initially agreed upon is no longer valid. As a result, the feature breaks, and these changes propagate through your entire application.</p>
<p>This is a common issue that many developers face when working with <code>API integrations</code>. The key question is: how can you prevent your application from breaking due to unexpected changes in external data?</p>
<h2>Solution: Using Zod for Data Validation</h2>
<p>One of the best ways to prevent front-end issues caused by API changes is by validating the external data before using it in your application. This is where <code>Zod</code>, a lightweight and flexible data validation library, comes into play. <a href="https://zod.dev/">Zod</a> allows you to define <code>schemas</code> for your data and validate it at runtime, ensuring that any incoming data adheres to the expected structure.</p>
<p>Let’s dive into how you can use Zod to solve this issue.</p>
<h2>Step-by-Step Guide: How to Use Zod for Data Validation</h2>
<p>Zod supports various types of data validation. Let’s start with something simple: validating string data.</p>

<div style="position: relative">
	<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">StringSchema</span> = z.<span class="hljs-title function_">string</span>();
<span class="hljs-keyword">const</span> <span class="hljs-title class_">EmailSchema</span> = z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">email</span>();
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LengthSchema</span> = z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">3</span>).<span class="hljs-title function_">max</span>(<span class="hljs-number">15</span>);
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="import { z } from &apos;zod&apos;;

const StringSchema = z.string();
const EmailSchema = z.string().email();
const LengthSchema = z.string().min(3).max(15);
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>In the above example, we are defining schemas that validate the data type. Zod doesn’t just check if the value is a string but also ensures that the string matches certain conditions—such as validating an email format or checking if the string has a specific length.</p>
<p>Here’s how you can validate data with Zod:</p>

<div style="position: relative">
	<pre><code class="hljs language-javascript"><span class="hljs-title class_">StringSchema</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-number">456</span>); <span class="hljs-comment">// Throws an error because 456 is not a string</span>
<span class="hljs-title class_">StringSchema</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;hello&#x27;</span>); <span class="hljs-comment">// Passes validation because &#x27;hello&#x27; is a string</span>

<span class="hljs-keyword">const</span> result = <span class="hljs-title class_">EmailSchema</span>.<span class="hljs-title function_">safeParse</span>(<span class="hljs-string">&#x27;not-an-email&#x27;</span>); 
<span class="hljs-comment">// Returns { success: false, error: {...} }</span>
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="StringSchema.parse(456); // Throws an error because 456 is not a string
StringSchema.parse(&apos;hello&apos;); // Passes validation because &apos;hello&apos; is a string

const result = EmailSchema.safeParse(&apos;not-an-email&apos;); 
// Returns { success: false, error: {...} }
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>You can also customize the error messages to be more informative:</p>

<div style="position: relative">
	<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">CustomStringSchema</span> = z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">refine</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> val === <span class="hljs-string">&#x27;expected&#x27;</span>, {
  <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;This is not the expected value!&#x27;</span>,
});
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="const CustomStringSchema = z.string().refine(val => val === &apos;expected&apos;, {
  message: &apos;This is not the expected value!&apos;,
});
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<h2>Using Zod to Validate API Responses</h2>
<p>Let’s apply Zod to a more complex scenario: <code>validating API responses</code>. Imagine you’re working with an API that returns the following structure:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">items</span>: <span class="hljs-title class_">Item</span>[];
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Item</span> {
  <span class="hljs-attr">productId</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">quantity</span>: <span class="hljs-built_in">number</span>;
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="interface ApiResponse {
  id: number;
  name: string;
  items: Item[];
}

interface Item {
  productId: string;
  quantity: number;
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>In a typical <code>Angular</code> application, you might fetch this data using the <code>HttpClient</code> service like this:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-meta">@Injectable</span>({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">&#x27;root&#x27;</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> http = <span class="hljs-title function_">inject</span>(<span class="hljs-title class_">HttpClient</span>);

  <span class="hljs-title function_">fetchData</span>(): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-title class_">ApiResponse</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">ApiResponse</span>&gt;(<span class="hljs-string">&#x27;/api/data&#x27;</span>);
  }
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="@Injectable({ providedIn: &apos;root&apos; })
export class ApiService {
  private readonly http = inject(HttpClient);

  fetchData(): Observable<ApiResponse> {
    return this.http.get<ApiResponse>(&apos;/api/data&apos;);
  }
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>Using <code>Zod</code>, you can define a schema that mirrors this structure and validates the API response:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ApiResponseSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">id</span>: z.<span class="hljs-title function_">number</span>(),
  <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">items</span>: z.<span class="hljs-title function_">array</span>(
    z.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">productId</span>: z.<span class="hljs-title function_">string</span>(),
      <span class="hljs-attr">quantity</span>: z.<span class="hljs-title function_">number</span>(),
    })
  ),
});

<span class="hljs-keyword">type</span> <span class="hljs-title class_">ApiResponse</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">ApiResponseSchema</span>&gt;;
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="import { z } from &apos;zod&apos;;

const ApiResponseSchema = z.object({
  id: z.number(),
  name: z.string(),
  items: z.array(
    z.object({
      productId: z.string(),
      quantity: z.number(),
    })
  ),
});

type ApiResponse = z.infer<typeof ApiResponseSchema>;
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>Here’s how you can integrate this <code>schema</code> into your service to ensure the data is valid:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-meta">@Injectable</span>({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">&#x27;root&#x27;</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ZodApiService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> http = <span class="hljs-title function_">inject</span>(<span class="hljs-title class_">HttpClient</span>);

  <span class="hljs-title function_">fetchData</span>(): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-title class_">ApiResponse</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/data&#x27;</span>).<span class="hljs-title function_">pipe</span>(
      <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> <span class="hljs-title class_">ApiResponseSchema</span>.<span class="hljs-title function_">parse</span>(response)) <span class="hljs-comment">// Validates the response</span>
    );
  }
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="@Injectable({ providedIn: &apos;root&apos; })
export class ZodApiService {
  private readonly http = inject(HttpClient);

  fetchData(): Observable<ApiResponse> {
    return this.http.get(&apos;/api/data&apos;).pipe(
      map((response) => ApiResponseSchema.parse(response)) // Validates the response
    );
  }
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>Now, if the API changes unexpectedly—say the backend sends <code>itemId</code> instead of <code>productId</code>—Zod will throw an error, allowing you to catch the issue immediately. This proactive validation helps prevent bugs caused by inconsistent data structures.</p>
<h2>Advanced Usage: Creating Custom RxJs Operators for Validation</h2>
<p>You can simplify the process even further by creating a custom <code>RxJs operator</code> to validate data throughout your application:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> validateWithZod&lt;T <span class="hljs-keyword">extends</span> z.<span class="hljs-property">ZodTypeAny</span>&gt;(<span class="hljs-attr">schema</span>: T) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">response: <span class="hljs-built_in">unknown</span></span>) =&gt;</span> schema.<span class="hljs-title function_">parse</span>(response));
}

<span class="hljs-meta">@Injectable</span>({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">&#x27;root&#x27;</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ZodApiService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> http = <span class="hljs-title function_">inject</span>(<span class="hljs-title class_">HttpClient</span>);

  <span class="hljs-title function_">fetchData</span>(): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-title class_">ApiResponse</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/data&#x27;</span>).<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">validateWithZod</span>(<span class="hljs-title class_">ApiResponseSchema</span>));
  }
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="export function validateWithZod<T extends z.ZodTypeAny>(schema: T) {
  return map((response: unknown) => schema.parse(response));
}

@Injectable({ providedIn: &apos;root&apos; })
export class ZodApiService {
  private readonly http = inject(HttpClient);

  fetchData(): Observable<ApiResponse> {
    return this.http.get(&apos;/api/data&apos;).pipe(validateWithZod(ApiResponseSchema));
  }
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>Now, whenever the backend returns an invalid response, <code>Zod</code> will catch it and display a clear error message in your browser’s console.</p>
<p>For instance, if the backend sends the following response:</p>

<div style="position: relative">
	<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">101</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Example&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;items&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;productId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;abc&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;quantity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;productId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;def&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;quantity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="{
  &quot;id&quot;: 101,
  &quot;name&quot;: &quot;Example&quot;,
  &quot;items&quot;: [
    { &quot;productId&quot;: &quot;abc&quot;, &quot;quantity&quot;: 3 },
    { &quot;productId&quot;: &quot;def&quot;, &quot;quantity&quot;: 2 }
  ]
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>Zod will validate the response. If the API structure is incorrect, Zod will notify you with an error message, making it clear where things went wrong.</p>
<h2>Why Data Validation is Crucial for Front-End Developers</h2>
<p>In modern <code>front-end development</code>, applications often rely on data fetched from external APIs. Since this data is external, it falls outside the scope of TypeScript’s type-checking. This means that when the API response structure changes, your front-end application is at risk of breaking—unless you validate the data.</p>
<p>Using a data validation library like Zod allows you to:</p>
<ul>
<li><code>Ensure data consistency</code> across your application</li>
<li><code>Catch errors early</code>, before they propagate through the system</li>
<li><code>Handle unexpected API changes</code> effectively</li>
<li>Provide <code>better error messages</code> for debugging</li>
</ul>
<h2>Conclusion</h2>
<p>To sum up, <code>validating API responses</code> and other external data is a crucial step in ensuring your front-end application remains robust, even when external systems change. While you can generate types from the API, using a runtime validation tool like Zod provides an extra layer of protection. Zod not only helps you validate data but also allows you to catch and handle errors proactively, saving you time and preventing bugs in the long run.</p>
<p>By integrating Zod into your front-end development workflow, you can effectively mitigate the risks associated with changing API contracts and maintain a stable application.</p>
<p>Happy coding!</p>
</article><div class="my-8"></div></main><footer class="text-gray-600"><div class="max-w-6xl px-5 py-4 mx-auto flex items-center sm:flex-row flex-col"><a class="text-primary hover:underline underline-offset-2" aria-label="Email to paskfdev@gmail.com" title="Email to paskfdev@gmail.com" href="mailto:paskfdev@gmail.com">Pasquale Favella</a><p class="text-sm text-gray-500 sm:ml-4 sm:pl-4 sm:border-l-2 sm:border-gray-200 sm:py-2 sm:mt-0 mt-4">©<!-- -->2025<!-- --> • made with 💚</p><span class="inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center items-center sm:justify-start gap-4"><a class="transition-all duration-300 hover:text-primary" href="https://github.com/Pasquale-Favella"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><a class="transition-all duration-300 hover:text-primary" href="https://it.linkedin.com/in/pasquale-favella-1a3682187"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a></span></div><div class="fixed bottom-4 right-1 sm:bottom-10 sm:right-6 z-50 tooltip tooltip-left before:text-xs before:content-[attr(data-tip)]" data-tip="ask a question" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rbl6:" data-state="closed"><button class="btn btn-ghost btn-circle "><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="40" width="40" xmlns="http://www.w3.org/2000/svg"><path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM7.194 6.766a1.688 1.688 0 0 0-.227-.272 1.467 1.467 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 5.734 6C4.776 6 4 6.746 4 7.667c0 .92.776 1.666 1.734 1.666.343 0 .662-.095.931-.26-.137.389-.39.804-.81 1.22a.405.405 0 0 0 .011.59c.173.16.447.155.614-.01 1.334-1.329 1.37-2.758.941-3.706a2.461 2.461 0 0 0-.227-.4zM11 9.073c-.136.389-.39.804-.81 1.22a.405.405 0 0 0 .012.59c.172.16.446.155.613-.01 1.334-1.329 1.37-2.758.942-3.706a2.466 2.466 0 0 0-.228-.4 1.686 1.686 0 0 0-.227-.273 1.466 1.466 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 10.07 6c-.957 0-1.734.746-1.734 1.667 0 .92.777 1.666 1.734 1.666.343 0 .662-.095.931-.26z"></path></svg></button></div></footer></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"content":"As a front-end developer, one common problem you may face is ensuring your application doesn't break when the API contract changes. Whether you're working with API responses, external data, or handling backend integration, it’s critical to have a solution that validates the data your front-end consumes. In this article, we’ll explore how using `Zod`, a popular data validation library, can help prevent front-end issues due to `API contract changes`.\r\n\r\n## Common Problem: Front-End Breaks Due to API Contract Changes\r\n\r\nImagine you’re developing a feature for your project, and you agree on an `API contract` with the back-end team. You write your code, implement the feature, and even cover multiple test scenarios. Everything works perfectly. However, some time later, the feature stops working.\r\n\r\nUpon investigation, you find that the `front-end code` is fine, and all your tests are passing. The issue? The `API response` has changed, and the `API contract` you initially agreed upon is no longer valid. As a result, the feature breaks, and these changes propagate through your entire application.\r\n\r\nThis is a common issue that many developers face when working with `API integrations`. The key question is: how can you prevent your application from breaking due to unexpected changes in external data?\r\n\r\n## Solution: Using Zod for Data Validation\r\n\r\nOne of the best ways to prevent front-end issues caused by API changes is by validating the external data before using it in your application. This is where `Zod`, a lightweight and flexible data validation library, comes into play. [Zod](https://zod.dev/) allows you to define `schemas` for your data and validate it at runtime, ensuring that any incoming data adheres to the expected structure.\r\n\r\nLet’s dive into how you can use Zod to solve this issue.\r\n\r\n## Step-by-Step Guide: How to Use Zod for Data Validation\r\n\r\nZod supports various types of data validation. Let’s start with something simple: validating string data.\r\n\r\n```javascript\r\nimport { z } from 'zod';\r\n\r\nconst StringSchema = z.string();\r\nconst EmailSchema = z.string().email();\r\nconst LengthSchema = z.string().min(3).max(15);\r\n```\r\nIn the above example, we are defining schemas that validate the data type. Zod doesn’t just check if the value is a string but also ensures that the string matches certain conditions—such as validating an email format or checking if the string has a specific length.\r\n\r\nHere’s how you can validate data with Zod:\r\n\r\n```javascript\r\nStringSchema.parse(456); // Throws an error because 456 is not a string\r\nStringSchema.parse('hello'); // Passes validation because 'hello' is a string\r\n\r\nconst result = EmailSchema.safeParse('not-an-email'); \r\n// Returns { success: false, error: {...} }\r\n```\r\nYou can also customize the error messages to be more informative:\r\n\r\n```javascript\r\nconst CustomStringSchema = z.string().refine(val =\u003e val === 'expected', {\r\n  message: 'This is not the expected value!',\r\n});\r\n```\r\n## Using Zod to Validate API Responses\r\n\r\nLet’s apply Zod to a more complex scenario: `validating API responses`. Imagine you’re working with an API that returns the following structure:\r\n\r\n```typescript\r\ninterface ApiResponse {\r\n  id: number;\r\n  name: string;\r\n  items: Item[];\r\n}\r\n\r\ninterface Item {\r\n  productId: string;\r\n  quantity: number;\r\n}\r\n```\r\nIn a typical `Angular` application, you might fetch this data using the `HttpClient` service like this:\r\n\r\n```typescript\r\n@Injectable({ providedIn: 'root' })\r\nexport class ApiService {\r\n  private readonly http = inject(HttpClient);\r\n\r\n  fetchData(): Observable\u003cApiResponse\u003e {\r\n    return this.http.get\u003cApiResponse\u003e('/api/data');\r\n  }\r\n}\r\n```\r\nUsing `Zod`, you can define a schema that mirrors this structure and validates the API response:\r\n\r\n```typescript\r\nimport { z } from 'zod';\r\n\r\nconst ApiResponseSchema = z.object({\r\n  id: z.number(),\r\n  name: z.string(),\r\n  items: z.array(\r\n    z.object({\r\n      productId: z.string(),\r\n      quantity: z.number(),\r\n    })\r\n  ),\r\n});\r\n\r\ntype ApiResponse = z.infer\u003ctypeof ApiResponseSchema\u003e;\r\n```\r\nHere’s how you can integrate this `schema` into your service to ensure the data is valid:\r\n\r\n```typescript\r\n@Injectable({ providedIn: 'root' })\r\nexport class ZodApiService {\r\n  private readonly http = inject(HttpClient);\r\n\r\n  fetchData(): Observable\u003cApiResponse\u003e {\r\n    return this.http.get('/api/data').pipe(\r\n      map((response) =\u003e ApiResponseSchema.parse(response)) // Validates the response\r\n    );\r\n  }\r\n}\r\n```\r\nNow, if the API changes unexpectedly—say the backend sends `itemId` instead of `productId`—Zod will throw an error, allowing you to catch the issue immediately. This proactive validation helps prevent bugs caused by inconsistent data structures.\r\n\r\n## Advanced Usage: Creating Custom RxJs Operators for Validation\r\n\r\nYou can simplify the process even further by creating a custom `RxJs operator` to validate data throughout your application:\r\n\r\n```typescript\r\nexport function validateWithZod\u003cT extends z.ZodTypeAny\u003e(schema: T) {\r\n  return map((response: unknown) =\u003e schema.parse(response));\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ZodApiService {\r\n  private readonly http = inject(HttpClient);\r\n\r\n  fetchData(): Observable\u003cApiResponse\u003e {\r\n    return this.http.get('/api/data').pipe(validateWithZod(ApiResponseSchema));\r\n  }\r\n}\r\n```\r\nNow, whenever the backend returns an invalid response, `Zod` will catch it and display a clear error message in your browser’s console.\r\n\r\nFor instance, if the backend sends the following response:\r\n```json\r\n{\r\n  \"id\": 101,\r\n  \"name\": \"Example\",\r\n  \"items\": [\r\n    { \"productId\": \"abc\", \"quantity\": 3 },\r\n    { \"productId\": \"def\", \"quantity\": 2 }\r\n  ]\r\n}\r\n```\r\nZod will validate the response. If the API structure is incorrect, Zod will notify you with an error message, making it clear where things went wrong.\r\n\r\n## Why Data Validation is Crucial for Front-End Developers\r\n\r\nIn modern `front-end development`, applications often rely on data fetched from external APIs. Since this data is external, it falls outside the scope of TypeScript’s type-checking. This means that when the API response structure changes, your front-end application is at risk of breaking—unless you validate the data.\r\n\r\nUsing a data validation library like Zod allows you to:\r\n- `Ensure data consistency` across your application\r\n- `Catch errors early`, before they propagate through the system\r\n- `Handle unexpected API changes` effectively\r\n- Provide `better error messages` for debugging\r\n\r\n## Conclusion\r\n\r\nTo sum up, `validating API responses` and other external data is a crucial step in ensuring your front-end application remains robust, even when external systems change. While you can generate types from the API, using a runtime validation tool like Zod provides an extra layer of protection. Zod not only helps you validate data but also allows you to catch and handle errors proactively, saving you time and preventing bugs in the long run.\r\n\r\nBy integrating Zod into your front-end development workflow, you can effectively mitigate the risks associated with changing API contracts and maintain a stable application.\r\n\r\nHappy coding!","slug":"21","title":"How to Prevent Angular Issues with API Contract Changes Using Zod","meta_description":"As a front-end developer, one common problem you may face is ensuring your application doesn't break when the API contract changes","tags":["Angular"]},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"21"},"buildId":"k41EvA04QB1QOOvjxlzdt","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>