<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta property="og:url" content="https://pasquale-favella.github.io/"/><meta property="og:image" content="https://pasquale-favella.github.io/og-image.png"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Pasquale Favella blogfolio"/><meta name="google-site-verification" content="BF08ecEW9P2w_w4mwWTU2LxdORMDiIO3XUeZLW7UC4o"/><link rel="icon" href="https://pasquale-favella.github.io/favicon.ico"/><title>Pasquale Favella | Angular  NgRx Component Store: A Comprehensive Guide</title><meta name="robots" content="index,follow"/><meta name="description" content="In the ever-evolving world of Angular development, efficient state management is crucial for building robust and scalable applications"/><meta property="og:title" content="Pasquale Favella | Angular  NgRx Component Store: A Comprehensive Guide"/><meta property="og:description" content="In the ever-evolving world of Angular development, efficient state management is crucial for building robust and scalable applications"/><meta property="og:type" content="article"/><meta property="article:tag" content="Angular"/><meta property="article:tag" content="Rxjs"/><meta name="next-head-count" content="16"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/6922198f43e5aeec.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/6922198f43e5aeec.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9c1928c2f34dc1c6.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-314c182fa7e2bf37.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-a767d6d8830842fe.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-4cf08b0cf7387c88.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/5d416436-33d3c7295c991659.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/29107295-4cc022cea922dbb4.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/4245-3dfa6a5bbae30301.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f4e990c90e0f396e.js" defer="" crossorigin=""></script><script src="/_next/static/k41EvA04QB1QOOvjxlzdt/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/k41EvA04QB1QOOvjxlzdt/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><header class="fixed top-0 left-0 right-0 z-40 shadow-sm backdrop-blur-[10px] bg-base-100/80 saturate-100"><div class="mx-auto flex h-[60px] max-w-6xl items-center justify-between px-8"><div><a aria-label="Pasquale&#x27;s website" href="/"><div class="flex items-center justify-between text-xl font-semibold">~ P: /blog<div class="Typewriter" data-testid="typewriter-wrapper"></div></div></a></div><div class="flex items-center gap-2"><div class="tooltip tooltip-bottom before:text-xs before:content-[attr(data-tip)]" data-tip="commands"><button class="btn btn-ghost btn-circle btn-sm"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg></button></div><div class="tooltip tooltip-bottom before:text-xs before:content-[attr(data-tip)]" data-tip="change theme"><label class="swap swap-rotate btn btn-ghost btn-circle btn-sm"><input id="theme-toggle" type="checkbox"/><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="swap-on" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path></svg><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="swap-off" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6C10 10.4183 13.5817 14 18 14C19.4386 14 20.7885 13.6203 21.9549 12.9556C21.4738 18.0302 17.2005 22 12 22C6.47715 22 2 17.5228 2 12C2 6.79948 5.9698 2.52616 11.0444 2.04507C10.3797 3.21152 10 4.56142 10 6ZM4 12C4 16.4183 7.58172 20 12 20C14.9654 20 17.5757 18.3788 18.9571 15.9546C18.6407 15.9848 18.3214 16 18 16C12.4772 16 8 11.5228 8 6C8 5.67863 8.01524 5.35933 8.04536 5.04293C5.62119 6.42426 4 9.03458 4 12ZM18.1642 2.29104L19 2.5V3.5L18.1642 3.70896C17.4476 3.8881 16.8881 4.4476 16.709 5.16417L16.5 6H15.5L15.291 5.16417C15.1119 4.4476 14.5524 3.8881 13.8358 3.70896L13 3.5V2.5L13.8358 2.29104C14.5524 2.1119 15.1119 1.5524 15.291 0.835829L15.5 0H16.5L16.709 0.835829C16.8881 1.5524 17.4476 2.1119 18.1642 2.29104ZM23.1642 7.29104L24 7.5V8.5L23.1642 8.70896C22.4476 8.8881 21.8881 9.4476 21.709 10.1642L21.5 11H20.5L20.291 10.1642C20.1119 9.4476 19.5524 8.8881 18.8358 8.70896L18 8.5V7.5L18.8358 7.29104C19.5524 7.1119 20.1119 6.5524 20.291 5.83583L20.5 5H21.5L21.709 5.83583C21.8881 6.5524 22.4476 7.1119 23.1642 7.29104Z"></path></svg></label></div></div></div></header><main class="relative mx-auto min-h-layout max-w-6xl px-8 pt-20 mb-2"><a class="group fixed top-24 hidden items-center justify-center text-sm font-medium xl:inline-flex" href="/blog"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="h-4 w-4 transition duration-200 group-hover:translate-x-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"></path></svg><span>See all Posts</span></a><div class="prose md:prose-lg lg:prose-xl mx-auto  mb-3 lg:mb-5"><h1 class="text-4xl font-extrabold leading-tight md:text-5xl !mb-4">Angular  NgRx Component Store: A Comprehensive Guide</h1><div class="flex gap-2"><a class="badge badge-lg border-base-content hover:border-accent-content hover:opacity-80 no-underline py-4" href="/blog?tag=Angular"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 20 20" aria-hidden="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9.243 3.03a1 1 0 01.727 1.213L9.53 6h2.94l.56-2.243a1 1 0 111.94.486L14.53 6H17a1 1 0 110 2h-2.97l-1 4H15a1 1 0 110 2h-2.47l-.56 2.242a1 1 0 11-1.94-.485L10.47 14H7.53l-.56 2.242a1 1 0 11-1.94-.485L5.47 14H3a1 1 0 110-2h2.97l1-4H5a1 1 0 110-2h2.47l.56-2.243a1 1 0 011.213-.727zM9.03 8l-1 4h2.938l1-4H9.031z" clip-rule="evenodd"></path></svg>Angular</a><a class="badge badge-lg border-base-content hover:border-accent-content hover:opacity-80 no-underline py-4" href="/blog?tag=Rxjs"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 20 20" aria-hidden="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9.243 3.03a1 1 0 01.727 1.213L9.53 6h2.94l.56-2.243a1 1 0 111.94.486L14.53 6H17a1 1 0 110 2h-2.97l-1 4H15a1 1 0 110 2h-2.47l-.56 2.242a1 1 0 11-1.94-.485L10.47 14H7.53l-.56 2.242a1 1 0 11-1.94-.485L5.47 14H3a1 1 0 110-2h2.97l1-4H5a1 1 0 110-2h2.47l.56-2.243a1 1 0 011.213-.727zM9.03 8l-1 4h2.938l1-4H9.031z" clip-rule="evenodd"></path></svg>Rxjs</a></div></div><article class="prose md:prose-lg lg:prose-xl mx-auto"><p>In the ever-evolving world of Angular development, efficient state management is crucial for building robust and scalable applications. NgRx Component Store, a powerful library in the NgRx ecosystem, offers a streamlined approach to managing local state in Angular apps. This comprehensive guide will walk you through implementing NgRx Component Store in a real-world scenario: an e-commerce product catalog system.</p>
<h2>Getting Started with NgRx Component Store</h2>
<p>Before diving into our e-commerce example, let's set up NgRx Component Store in your Angular project:</p>

<div style="position: relative">
	<pre><code class="hljs language-bash">ng add @ngrx/component-store
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="ng add @ngrx/component-store
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>This command adds the necessary dependencies to your project, setting the stage for efficient state management.</p>
<h2>Building a Product Catalog Store</h2>
<p>Let's create a component store for our product catalog:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentStore</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@ngrx/component-store&#x27;</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Product</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">category</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">inStock</span>: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ProductCatalogState</span> {
  <span class="hljs-attr">products</span>: <span class="hljs-title class_">Product</span>[];
  <span class="hljs-attr">loading</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">error</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">selectedProductId</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">searchTerm</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">categoryFilter</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
}

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductCatalogStore</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ComponentStore</span>&lt;<span class="hljs-title class_">ProductCatalogState</span>&gt; {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>({
      <span class="hljs-attr">products</span>: [],
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">selectedProductId</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">searchTerm</span>: <span class="hljs-string">&#x27;&#x27;</span>,
      <span class="hljs-attr">categoryFilter</span>: <span class="hljs-literal">null</span>
    });
  }
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="import { Injectable } from &apos;@angular/core&apos;;
import { ComponentStore } from &apos;@ngrx/component-store&apos;;

interface Product {
  id: number;
  name: string;
  description: string;
  price: number;
  category: string;
  inStock: boolean;
}

interface ProductCatalogState {
  products: Product[];
  loading: boolean;
  error: string | null;
  selectedProductId: number | null;
  searchTerm: string;
  categoryFilter: string | null;
}

@Injectable()
export class ProductCatalogStore extends ComponentStore<ProductCatalogState> {
  constructor() {
    super({
      products: [],
      loading: false,
      error: null,
      selectedProductId: null,
      searchTerm: &apos;&apos;,
      categoryFilter: null
    });
  }
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>This structure forms the foundation of our product catalog state management.</p>
<h2>Effective State Management Techniques</h2>
<p>Efficient state management is key to a performant Angular application. Let's add selectors to our store:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rxjs&#x27;</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductCatalogStore</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ComponentStore</span>&lt;<span class="hljs-title class_">ProductCatalogState</span>&gt; {
  <span class="hljs-comment">// ... previous code</span>

  <span class="hljs-comment">// Selectors</span>
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">products$</span>: <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-title class_">Product</span>[]&gt; = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">select</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">products</span>);
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">loading$</span>: <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">boolean</span>&gt; = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">select</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">loading</span>);
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">error$</span>: <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt; = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">select</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">error</span>);
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">selectedProduct$</span>: <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-title class_">Product</span> | <span class="hljs-literal">undefined</span>&gt; = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">select</span>(
    <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">products</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> product.<span class="hljs-property">id</span> === state.<span class="hljs-property">selectedProductId</span>)
  );
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">filteredProducts$</span>: <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-title class_">Product</span>[]&gt; = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">select</span>(
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">products$</span>,
    <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">searchTerm</span>,
    <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">categoryFilter</span>,
    <span class="hljs-function">(<span class="hljs-params">products, searchTerm, categoryFilter</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> products
        .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> product.<span class="hljs-property">name</span>.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">includes</span>(searchTerm.<span class="hljs-title function_">toLowerCase</span>()))
        .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> !categoryFilter || product.<span class="hljs-property">category</span> === categoryFilter);
    }
  );
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="import { Observable } from &apos;rxjs&apos;;

@Injectable()
export class ProductCatalogStore extends ComponentStore<ProductCatalogState> {
  // ... previous code

  // Selectors
  readonly products$: Observable<Product[]> = this.select(state => state.products);
  readonly loading$: Observable<boolean> = this.select(state => state.loading);
  readonly error$: Observable<string | null> = this.select(state => state.error);
  readonly selectedProduct$: Observable<Product | undefined> = this.select(
    state => state.products.find(product => product.id === state.selectedProductId)
  );
  readonly filteredProducts$: Observable<Product[]> = this.select(
    this.products$,
    state => state.searchTerm,
    state => state.categoryFilter,
    (products, searchTerm, categoryFilter) => {
      return products
        .filter(product => product.name.toLowerCase().includes(searchTerm.toLowerCase()))
        .filter(product => !categoryFilter || product.category === categoryFilter);
    }
  );
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>These selectors provide a clean way to access and derive state in your components.</p>
<h2>Implementing CRUD Operations</h2>
<p>CRUD (Create, Read, Update, Delete) operations are essential for any e-commerce platform. Let's implement these using updaters:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductCatalogStore</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ComponentStore</span>&lt;<span class="hljs-title class_">ProductCatalogState</span>&gt; {
  <span class="hljs-comment">// ... previous code</span>

  <span class="hljs-comment">// Updaters</span>
  <span class="hljs-keyword">readonly</span> setProducts = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updater</span>(<span class="hljs-function">(<span class="hljs-params">state, products: Product[]</span>) =&gt;</span> ({
    ...state,
    products
  }));

  <span class="hljs-keyword">readonly</span> addProduct = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updater</span>(<span class="hljs-function">(<span class="hljs-params">state, product: Product</span>) =&gt;</span> ({
    ...state,
    <span class="hljs-attr">products</span>: [...state.<span class="hljs-property">products</span>, product]
  }));

  <span class="hljs-keyword">readonly</span> updateProduct = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updater</span>(<span class="hljs-function">(<span class="hljs-params">state, updatedProduct: Product</span>) =&gt;</span> ({
    ...state,
    <span class="hljs-attr">products</span>: state.<span class="hljs-property">products</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span>
      product.<span class="hljs-property">id</span> === updatedProduct.<span class="hljs-property">id</span> ? updatedProduct : product
    )
  }));

  <span class="hljs-keyword">readonly</span> removeProduct = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updater</span>(<span class="hljs-function">(<span class="hljs-params">state, productId: <span class="hljs-built_in">number</span></span>) =&gt;</span> ({
    ...state,
    <span class="hljs-attr">products</span>: state.<span class="hljs-property">products</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> product.<span class="hljs-property">id</span> !== productId)
  }));
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="@Injectable()
export class ProductCatalogStore extends ComponentStore<ProductCatalogState> {
  // ... previous code

  // Updaters
  readonly setProducts = this.updater((state, products: Product[]) => ({
    ...state,
    products
  }));

  readonly addProduct = this.updater((state, product: Product) => ({
    ...state,
    products: [...state.products, product]
  }));

  readonly updateProduct = this.updater((state, updatedProduct: Product) => ({
    ...state,
    products: state.products.map(product =>
      product.id === updatedProduct.id ? updatedProduct : product
    )
  }));

  readonly removeProduct = this.updater((state, productId: number) => ({
    ...state,
    products: state.products.filter(product => product.id !== productId)
  }));
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>These updaters provide a predictable way to modify the state of our product catalog.</p>
<h2>Optimizing Performance with Selectors</h2>
<p>Selectors play a crucial role in optimizing the performance of your Angular application. They help in deriving complex state and preventing unnecessary re-renders:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { map } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rxjs/operators&#x27;</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductCatalogStore</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ComponentStore</span>&lt;<span class="hljs-title class_">ProductCatalogState</span>&gt; {
  <span class="hljs-comment">// ... previous code</span>

  <span class="hljs-keyword">readonly</span> productsByCategory$ = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">select</span>(
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">products$</span>,
    <span class="hljs-function">(<span class="hljs-params">products</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">categorizedProducts</span>: { [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-title class_">Product</span>[] } = {};
      products.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (!categorizedProducts[product.<span class="hljs-property">category</span>]) {
          categorizedProducts[product.<span class="hljs-property">category</span>] = [];
        }
        categorizedProducts[product.<span class="hljs-property">category</span>].<span class="hljs-title function_">push</span>(product);
      });
      <span class="hljs-keyword">return</span> categorizedProducts;
    }
  );

  <span class="hljs-keyword">readonly</span> totalValue$ = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">select</span>(
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">products$</span>,
    <span class="hljs-function">(<span class="hljs-params">products</span>) =&gt;</span> products.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, product</span>) =&gt;</span> total + product.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>)
  );
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="import { map } from &apos;rxjs/operators&apos;;

@Injectable()
export class ProductCatalogStore extends ComponentStore<ProductCatalogState> {
  // ... previous code

  readonly productsByCategory$ = this.select(
    this.products$,
    (products) => {
      const categorizedProducts: { [key: string]: Product[] } = {};
      products.forEach(product => {
        if (!categorizedProducts[product.category]) {
          categorizedProducts[product.category] = [];
        }
        categorizedProducts[product.category].push(product);
      });
      return categorizedProducts;
    }
  );

  readonly totalValue$ = this.select(
    this.products$,
    (products) => products.reduce((total, product) => total + product.price, 0)
  );
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>These advanced selectors demonstrate how to derive complex state efficiently.</p>
<h2>Handling Asynchronous Operations</h2>
<p>In real-world applications, asynchronous operations like API calls are common. Let's implement effects to handle these:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentStore</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@ngrx/component-store&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/common/http&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span>, catchError, switchMap, tap } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rxjs&#x27;</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductCatalogStore</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ComponentStore</span>&lt;<span class="hljs-title class_">ProductCatalogState</span>&gt; {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> http: HttpClient</span>) {
    <span class="hljs-variable language_">super</span>({
      <span class="hljs-attr">products</span>: [],
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">selectedProductId</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">searchTerm</span>: <span class="hljs-string">&#x27;&#x27;</span>,
      <span class="hljs-attr">categoryFilter</span>: <span class="hljs-literal">null</span>
    });
  }

  <span class="hljs-comment">// ... previous code</span>

  <span class="hljs-comment">// Effects</span>
  <span class="hljs-keyword">readonly</span> loadProducts = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">effect</span>(<span class="hljs-function">(<span class="hljs-params">trigger$: Observable&lt;<span class="hljs-built_in">void</span>&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> trigger$.<span class="hljs-title function_">pipe</span>(
      <span class="hljs-title function_">tap</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>)),
      <span class="hljs-title function_">switchMap</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">Product</span>[]&gt;(<span class="hljs-string">&#x27;https://api.example.com/products&#x27;</span>).<span class="hljs-title function_">pipe</span>(
        <span class="hljs-title function_">tap</span>({
          <span class="hljs-attr">next</span>: <span class="hljs-function">(<span class="hljs-params">products</span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setProducts</span>(products);
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
          },
          <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;Failed to load products. Please try again later.&#x27;</span>);
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
          }
        }),
        <span class="hljs-title function_">catchError</span>(<span class="hljs-function">() =&gt;</span> []) <span class="hljs-comment">// Return empty array on error</span>
      ))
    );
  });
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="import { Injectable } from &apos;@angular/core&apos;;
import { ComponentStore } from &apos;@ngrx/component-store&apos;;
import { HttpClient } from &apos;@angular/common/http&apos;;
import { Observable, catchError, switchMap, tap } from &apos;rxjs&apos;;

@Injectable()
export class ProductCatalogStore extends ComponentStore<ProductCatalogState> {
  constructor(private http: HttpClient) {
    super({
      products: [],
      loading: false,
      error: null,
      selectedProductId: null,
      searchTerm: &apos;&apos;,
      categoryFilter: null
    });
  }

  // ... previous code

  // Effects
  readonly loadProducts = this.effect((trigger$: Observable<void>) => {
    return trigger$.pipe(
      tap(() => this.setLoading(true)),
      switchMap(() => this.http.get<Product[]>(&apos;https://api.example.com/products&apos;).pipe(
        tap({
          next: (products) => {
            this.setProducts(products);
            this.setLoading(false);
          },
          error: (error) => {
            this.setError(&apos;Failed to load products. Please try again later.&apos;);
            this.setLoading(false);
          }
        }),
        catchError(() => []) // Return empty array on error
      ))
    );
  });
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>This effect demonstrates how to handle API calls and manage loading states effectively.</p>
<h2>Advanced Features: Search and Filtering</h2>
<p>Implementing search and filtering enhances user experience in an e-commerce application:</p>

<div style="position: relative">
	<pre><code class="hljs language-typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductCatalogStore</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ComponentStore</span>&lt;<span class="hljs-title class_">ProductCatalogState</span>&gt; {
  <span class="hljs-comment">// ... previous code</span>

  <span class="hljs-keyword">readonly</span> search = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">effect</span>(<span class="hljs-function">(<span class="hljs-params">searchTerm$: Observable&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> searchTerm$.<span class="hljs-title function_">pipe</span>(
      <span class="hljs-title function_">tap</span>(<span class="hljs-function">(<span class="hljs-params">searchTerm</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setSearchTerm</span>(searchTerm)),
      <span class="hljs-title function_">switchMap</span>(<span class="hljs-function">(<span class="hljs-params">searchTerm</span>) =&gt;</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">Product</span>[]&gt;(<span class="hljs-string">`https://api.example.com/products?search=<span class="hljs-subst">${searchTerm}</span>`</span>).<span class="hljs-title function_">pipe</span>(
          <span class="hljs-title function_">tap</span>({
            <span class="hljs-attr">next</span>: <span class="hljs-function">(<span class="hljs-params">products</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setProducts</span>(products),
            <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;Failed to search products. Please try again.&#x27;</span>)
          })
        )
      )
    );
  });

  <span class="hljs-keyword">readonly</span> filterByCategory = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">effect</span>(<span class="hljs-function">(<span class="hljs-params">category$: Observable&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> category$.<span class="hljs-title function_">pipe</span>(
      <span class="hljs-title function_">tap</span>(<span class="hljs-function">(<span class="hljs-params">category</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setCategoryFilter</span>(category)),
      <span class="hljs-title function_">switchMap</span>(<span class="hljs-function">(<span class="hljs-params">category</span>) =&gt;</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">Product</span>[]&gt;(<span class="hljs-string">`https://api.example.com/products<span class="hljs-subst">${category ? <span class="hljs-string">`?category=<span class="hljs-subst">${category}</span>`</span> : <span class="hljs-string">&#x27;&#x27;</span>}</span>`</span>).<span class="hljs-title function_">pipe</span>(
          <span class="hljs-title function_">tap</span>({
            <span class="hljs-attr">next</span>: <span class="hljs-function">(<span class="hljs-params">products</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setProducts</span>(products),
            <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;Failed to filter products. Please try again.&#x27;</span>)
          })
        )
      )
    );
  });
}
</code></pre>

	<button class="markdown-it-code-copy btn btn-ghost btn-circle btn-sm" data-clipboard-text="@Injectable()
export class ProductCatalogStore extends ComponentStore<ProductCatalogState> {
  // ... previous code

  readonly search = this.effect((searchTerm$: Observable<string>) => {
    return searchTerm$.pipe(
      tap((searchTerm) => this.setSearchTerm(searchTerm)),
      switchMap((searchTerm) =>
        this.http.get<Product[]>(`https://api.example.com/products?search=${searchTerm}`).pipe(
          tap({
            next: (products) => this.setProducts(products),
            error: (error) => this.setError(&apos;Failed to search products. Please try again.&apos;)
          })
        )
      )
    );
  });

  readonly filterByCategory = this.effect((category$: Observable<string | null>) => {
    return category$.pipe(
      tap((category) => this.setCategoryFilter(category)),
      switchMap((category) =>
        this.http.get<Product[]>(`https://api.example.com/products${category ? `?category=${category}` : &apos;&apos;}`).pipe(
          tap({
            next: (products) => this.setProducts(products),
            error: (error) => this.setError(&apos;Failed to filter products. Please try again.&apos;)
          })
        )
      )
    );
  });
}
" style="position: absolute; top: 7.5px; right: 6px; cursor: pointer; outline: none;" title="Copy">
		<span style="font-size: 21px; opacity: 0.4;" class="fa fa-solid fa-clone text-neutral-content"></span>
	</button>
</div>
<p>These effects demonstrate how to implement search and filtering functionality using NgRx Component Store.</p>
<h2>Best Practices for NgRx Component Store</h2>
<p>To get the most out of NgRx Component Store, follow these best practices:</p>
<ol>
<li><strong>Minimize State</strong>: Keep your state as lean as possible. Derive complex state using selectors.</li>
<li><strong>Use Updaters for Synchronous Operations</strong>: Prefer updaters for simple, synchronous state changes.</li>
<li><strong>Leverage Effects for Asynchronous Operations</strong>: Use effects to handle side effects and asynchronous operations like API calls.</li>
<li><strong>Optimize Selectors</strong>: Use the <code>distinctUntilChanged</code> operator on your selectors to prevent unnecessary re-renders.</li>
<li><strong>Handle Errors Gracefully</strong>: Always include error handling in your effects and provide meaningful error messages to users.</li>
<li><strong>Test Your Store</strong>: Write unit tests for your selectors, updaters, and effects to ensure they work as expected.</li>
</ol>
<h2>Conclusion</h2>
<p>NgRx Component Store offers a powerful and flexible approach to state management in Angular applications. By following the techniques and best practices outlined in this guide, you can build efficient, scalable, and maintainable e-commerce applications. Remember to keep your state focused, leverage RxJS operators for complex operations, and always prioritize performance and user experience.</p>
<p>As you continue to explore NgRx Component Store, you'll discover even more ways to optimize your Angular applications.</p>
<p>Happy coding</p>
</article><div class="my-8"></div></main><footer class="text-gray-600"><div class="max-w-6xl px-5 py-4 mx-auto flex items-center sm:flex-row flex-col"><a class="text-primary hover:underline underline-offset-2" aria-label="Email to paskfdev@gmail.com" title="Email to paskfdev@gmail.com" href="mailto:paskfdev@gmail.com">Pasquale Favella</a><p class="text-sm text-gray-500 sm:ml-4 sm:pl-4 sm:border-l-2 sm:border-gray-200 sm:py-2 sm:mt-0 mt-4">©<!-- -->2025<!-- --> • made with 💚</p><span class="inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center items-center sm:justify-start gap-4"><a class="transition-all duration-300 hover:text-primary" href="https://github.com/Pasquale-Favella"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><a class="transition-all duration-300 hover:text-primary" href="https://it.linkedin.com/in/pasquale-favella-1a3682187"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a></span></div><div class="fixed bottom-4 right-1 sm:bottom-10 sm:right-6 z-50 tooltip tooltip-left before:text-xs before:content-[attr(data-tip)]" data-tip="ask a question" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rbl6:" data-state="closed"><button class="btn btn-ghost btn-circle "><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="40" width="40" xmlns="http://www.w3.org/2000/svg"><path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM7.194 6.766a1.688 1.688 0 0 0-.227-.272 1.467 1.467 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 5.734 6C4.776 6 4 6.746 4 7.667c0 .92.776 1.666 1.734 1.666.343 0 .662-.095.931-.26-.137.389-.39.804-.81 1.22a.405.405 0 0 0 .011.59c.173.16.447.155.614-.01 1.334-1.329 1.37-2.758.941-3.706a2.461 2.461 0 0 0-.227-.4zM11 9.073c-.136.389-.39.804-.81 1.22a.405.405 0 0 0 .012.59c.172.16.446.155.613-.01 1.334-1.329 1.37-2.758.942-3.706a2.466 2.466 0 0 0-.228-.4 1.686 1.686 0 0 0-.227-.273 1.466 1.466 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 10.07 6c-.957 0-1.734.746-1.734 1.667 0 .92.777 1.666 1.734 1.666.343 0 .662-.095.931-.26z"></path></svg></button></div></footer></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"content":"In the ever-evolving world of Angular development, efficient state management is crucial for building robust and scalable applications. NgRx Component Store, a powerful library in the NgRx ecosystem, offers a streamlined approach to managing local state in Angular apps. This comprehensive guide will walk you through implementing NgRx Component Store in a real-world scenario: an e-commerce product catalog system.\n\n## Getting Started with NgRx Component Store\n\nBefore diving into our e-commerce example, let's set up NgRx Component Store in your Angular project:\n\n```bash\nng add @ngrx/component-store\n```\n\nThis command adds the necessary dependencies to your project, setting the stage for efficient state management.\n\n## Building a Product Catalog Store\n\nLet's create a component store for our product catalog:\n\n```typescript\nimport { Injectable } from '@angular/core';\nimport { ComponentStore } from '@ngrx/component-store';\n\ninterface Product {\n  id: number;\n  name: string;\n  description: string;\n  price: number;\n  category: string;\n  inStock: boolean;\n}\n\ninterface ProductCatalogState {\n  products: Product[];\n  loading: boolean;\n  error: string | null;\n  selectedProductId: number | null;\n  searchTerm: string;\n  categoryFilter: string | null;\n}\n\n@Injectable()\nexport class ProductCatalogStore extends ComponentStore\u003cProductCatalogState\u003e {\n  constructor() {\n    super({\n      products: [],\n      loading: false,\n      error: null,\n      selectedProductId: null,\n      searchTerm: '',\n      categoryFilter: null\n    });\n  }\n}\n```\n\nThis structure forms the foundation of our product catalog state management.\n\n## Effective State Management Techniques\n\nEfficient state management is key to a performant Angular application. Let's add selectors to our store:\n\n```typescript\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class ProductCatalogStore extends ComponentStore\u003cProductCatalogState\u003e {\n  // ... previous code\n\n  // Selectors\n  readonly products$: Observable\u003cProduct[]\u003e = this.select(state =\u003e state.products);\n  readonly loading$: Observable\u003cboolean\u003e = this.select(state =\u003e state.loading);\n  readonly error$: Observable\u003cstring | null\u003e = this.select(state =\u003e state.error);\n  readonly selectedProduct$: Observable\u003cProduct | undefined\u003e = this.select(\n    state =\u003e state.products.find(product =\u003e product.id === state.selectedProductId)\n  );\n  readonly filteredProducts$: Observable\u003cProduct[]\u003e = this.select(\n    this.products$,\n    state =\u003e state.searchTerm,\n    state =\u003e state.categoryFilter,\n    (products, searchTerm, categoryFilter) =\u003e {\n      return products\n        .filter(product =\u003e product.name.toLowerCase().includes(searchTerm.toLowerCase()))\n        .filter(product =\u003e !categoryFilter || product.category === categoryFilter);\n    }\n  );\n}\n```\n\nThese selectors provide a clean way to access and derive state in your components.\n\n## Implementing CRUD Operations\n\nCRUD (Create, Read, Update, Delete) operations are essential for any e-commerce platform. Let's implement these using updaters:\n\n```typescript\n@Injectable()\nexport class ProductCatalogStore extends ComponentStore\u003cProductCatalogState\u003e {\n  // ... previous code\n\n  // Updaters\n  readonly setProducts = this.updater((state, products: Product[]) =\u003e ({\n    ...state,\n    products\n  }));\n\n  readonly addProduct = this.updater((state, product: Product) =\u003e ({\n    ...state,\n    products: [...state.products, product]\n  }));\n\n  readonly updateProduct = this.updater((state, updatedProduct: Product) =\u003e ({\n    ...state,\n    products: state.products.map(product =\u003e\n      product.id === updatedProduct.id ? updatedProduct : product\n    )\n  }));\n\n  readonly removeProduct = this.updater((state, productId: number) =\u003e ({\n    ...state,\n    products: state.products.filter(product =\u003e product.id !== productId)\n  }));\n}\n```\n\nThese updaters provide a predictable way to modify the state of our product catalog.\n\n## Optimizing Performance with Selectors\n\nSelectors play a crucial role in optimizing the performance of your Angular application. They help in deriving complex state and preventing unnecessary re-renders:\n\n```typescript\nimport { map } from 'rxjs/operators';\n\n@Injectable()\nexport class ProductCatalogStore extends ComponentStore\u003cProductCatalogState\u003e {\n  // ... previous code\n\n  readonly productsByCategory$ = this.select(\n    this.products$,\n    (products) =\u003e {\n      const categorizedProducts: { [key: string]: Product[] } = {};\n      products.forEach(product =\u003e {\n        if (!categorizedProducts[product.category]) {\n          categorizedProducts[product.category] = [];\n        }\n        categorizedProducts[product.category].push(product);\n      });\n      return categorizedProducts;\n    }\n  );\n\n  readonly totalValue$ = this.select(\n    this.products$,\n    (products) =\u003e products.reduce((total, product) =\u003e total + product.price, 0)\n  );\n}\n```\n\nThese advanced selectors demonstrate how to derive complex state efficiently.\n\n## Handling Asynchronous Operations\n\nIn real-world applications, asynchronous operations like API calls are common. Let's implement effects to handle these:\n\n```typescript\nimport { Injectable } from '@angular/core';\nimport { ComponentStore } from '@ngrx/component-store';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, switchMap, tap } from 'rxjs';\n\n@Injectable()\nexport class ProductCatalogStore extends ComponentStore\u003cProductCatalogState\u003e {\n  constructor(private http: HttpClient) {\n    super({\n      products: [],\n      loading: false,\n      error: null,\n      selectedProductId: null,\n      searchTerm: '',\n      categoryFilter: null\n    });\n  }\n\n  // ... previous code\n\n  // Effects\n  readonly loadProducts = this.effect((trigger$: Observable\u003cvoid\u003e) =\u003e {\n    return trigger$.pipe(\n      tap(() =\u003e this.setLoading(true)),\n      switchMap(() =\u003e this.http.get\u003cProduct[]\u003e('https://api.example.com/products').pipe(\n        tap({\n          next: (products) =\u003e {\n            this.setProducts(products);\n            this.setLoading(false);\n          },\n          error: (error) =\u003e {\n            this.setError('Failed to load products. Please try again later.');\n            this.setLoading(false);\n          }\n        }),\n        catchError(() =\u003e []) // Return empty array on error\n      ))\n    );\n  });\n}\n```\n\nThis effect demonstrates how to handle API calls and manage loading states effectively.\n\n## Advanced Features: Search and Filtering\n\nImplementing search and filtering enhances user experience in an e-commerce application:\n\n```typescript\n@Injectable()\nexport class ProductCatalogStore extends ComponentStore\u003cProductCatalogState\u003e {\n  // ... previous code\n\n  readonly search = this.effect((searchTerm$: Observable\u003cstring\u003e) =\u003e {\n    return searchTerm$.pipe(\n      tap((searchTerm) =\u003e this.setSearchTerm(searchTerm)),\n      switchMap((searchTerm) =\u003e\n        this.http.get\u003cProduct[]\u003e(`https://api.example.com/products?search=${searchTerm}`).pipe(\n          tap({\n            next: (products) =\u003e this.setProducts(products),\n            error: (error) =\u003e this.setError('Failed to search products. Please try again.')\n          })\n        )\n      )\n    );\n  });\n\n  readonly filterByCategory = this.effect((category$: Observable\u003cstring | null\u003e) =\u003e {\n    return category$.pipe(\n      tap((category) =\u003e this.setCategoryFilter(category)),\n      switchMap((category) =\u003e\n        this.http.get\u003cProduct[]\u003e(`https://api.example.com/products${category ? `?category=${category}` : ''}`).pipe(\n          tap({\n            next: (products) =\u003e this.setProducts(products),\n            error: (error) =\u003e this.setError('Failed to filter products. Please try again.')\n          })\n        )\n      )\n    );\n  });\n}\n```\n\nThese effects demonstrate how to implement search and filtering functionality using NgRx Component Store.\n\n## Best Practices for NgRx Component Store\n\nTo get the most out of NgRx Component Store, follow these best practices:\n\n1. **Minimize State**: Keep your state as lean as possible. Derive complex state using selectors.\n2. **Use Updaters for Synchronous Operations**: Prefer updaters for simple, synchronous state changes.\n3. **Leverage Effects for Asynchronous Operations**: Use effects to handle side effects and asynchronous operations like API calls.\n4. **Optimize Selectors**: Use the `distinctUntilChanged` operator on your selectors to prevent unnecessary re-renders.\n5. **Handle Errors Gracefully**: Always include error handling in your effects and provide meaningful error messages to users.\n6. **Test Your Store**: Write unit tests for your selectors, updaters, and effects to ensure they work as expected.\n\n## Conclusion\n\nNgRx Component Store offers a powerful and flexible approach to state management in Angular applications. By following the techniques and best practices outlined in this guide, you can build efficient, scalable, and maintainable e-commerce applications. Remember to keep your state focused, leverage RxJS operators for complex operations, and always prioritize performance and user experience.\n\nAs you continue to explore NgRx Component Store, you'll discover even more ways to optimize your Angular applications. \n\nHappy coding","slug":"24","title":"Angular  NgRx Component Store: A Comprehensive Guide","meta_description":"In the ever-evolving world of Angular development, efficient state management is crucial for building robust and scalable applications","tags":["Angular","Rxjs"]},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"24"},"buildId":"k41EvA04QB1QOOvjxlzdt","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>